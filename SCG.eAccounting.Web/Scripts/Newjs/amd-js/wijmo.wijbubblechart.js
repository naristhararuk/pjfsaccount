var wijmo;define(["./wijmo.wijchartcore","globalize"],function(){var e=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};(function(t){(function(n){var r=1e4,i=function(){function e(e){this.bubMax=0,this.bubMin=0,this.bubDiff=0,this.y1Array=[],this.y1ValueGroup={},this.bubbleRadius={},this.chartDatas=[];var t=e.options;this.widget=e,this.seriesList=t.seriesList,this.maximumSize=t.maximumSize||20,this.minimumSize=t.minimumSize||5,this.sizingMethod=t.sizingMethod||"diameter",this._init(),this._calculateMaxMin()}return e.prototype._init=function(){var e=this,t,n,r;$.each(this.seriesList,function(i,s){n=s.markers||{},r=n.type||"circle",t=s.data,t&&t.y1&&t.x&&t.y&&$.each(t.y1,function(n,i){e.y1Array.push(i),e.y1ValueGroup[r]||(e.y1ValueGroup[r]=[]),e.y1ValueGroup[r].push(i),e.chartDatas.push({x:t.x[n],y:t.y[n],y1:t.y1[n]})})})},e.prototype._calculateMaxMin=function(){this.bubMax=Math.max.apply(null,this.y1Array),this.bubMin=Math.min.apply(null,this.y1Array),this.bubDiff=this.bubMax-this.bubMin},e.prototype._calculateRadius=function(e,t,n,r,i,s,o,u){var a,f=e,l=t-n,c=r.endX-r.startX,h=r.endY-r.startY;return f<0&&(f=0),s===0?f=1:f/=i,f=this._calculateRadiusByArea(f,o,u),f*=l,f+=n,a=Math.min(c,h),f*=a/200,f},e.prototype._calculateRadiusByArea=function(e,t,n){var r=e;if(t==="area")switch(n){case"circle":r=Math.sqrt(r/Math.PI);break;case"tri":case"invertedTri":r=Math.sqrt(r/(3*Math.sin(Math.PI/6)*Math.cos(Math.PI/6)));break;case"box":r=Math.sqrt(r/2);break;case"diamond":case"cross":r=Math.sqrt(r/2);break;default:r=Math.sqrt(4*r/Math.PI)}return r},e.prototype.calculateRadius=function(){var e=this,t=this.widget.canvasBounds;this.bubbleRadius={},$.each(this.y1ValueGroup,function(n,r){$.each(r,function(r,i){e.bubbleRadius[i]=e._calculateRadius(i,e.maximumSize,e.minimumSize,t,e.bubMax,e.bubDiff,e.sizingMethod,n)})})},e.prototype.getAdjust=function(e,t){var n=this,r=this.widget.canvasBounds,i=e.max,s=e.min,o=[],u=[],a=0,f=t.unitMinor,l=t.origin,c=r.endX-r.startX,h=r.endY-r.startY,p,d,v,m=[],g={},y=!1;return this.calculateRadius(),$.each(this.chartDatas,function(e,t){var r=t.x;isNaN(r)&&!n.widget._isDate(r)&&$.inArray(r,m)===-1&&m.push(r)}),$.each(m,function(e,t){g[t]=e}),$.each(this.chartDatas,function(t,r){var f=r.x,l=r.y,p=r.y1,d=n.bubbleRadius[p];n.widget._isDate(f)?f=$.toOADate(f):isNaN(f)&&(f=g[f]),n.widget._isDate(l)&&(l=$.toOADate(l)),e.id==="x"?(v=c,a=d*(i-s)/v,o.push(f-a),u.push(f+a)):(v=h,a=d*(i-s)/v,o.push(l-a),u.push(l+a))}),p=Math.max.apply(null,u),d=Math.min.apply(null,o),p>i&&(i+=Math.ceil((p-i)/f)*f,y=!0),d<s&&(s-=Math.ceil((s-d)/f)*f,y=!0),l!==null&&l!==undefined&&(l<s?s=l:l>i&&(i=l)),y?(e.max=i,e.min=s,this.widget._calculateMajorMinor(t,e),this.getAdjust(e,t)):{max:i,min:s}},e.prototype.dispose=function(){this.y1Array=[],this.bubbleRadius=null,this.y1ValueGroup=null},e}();n.BubbleAxisAdjust=i;var s=function(t){function s(){t.apply(this,arguments)}return e(s,t),s.prototype._setOption=function(e,n){var i=this,s=i.options;e==="minimumSize"||e==="minimumSize"?(isNaN(n)||n<0?n=0:n>r&&(n=r),s[e]=n,i.redraw()):e==="chartLabel"?($.extend(s.chartLabel,n),i.redraw()):(e==="chartLabelStyle"&&(s[e]=n,i._setLabelOption()),t.prototype._setOption.call(this,e,n)),e==="seriesList"&&(i.indexs=null)},s.prototype._create=function(){var e=this,n=e.options,r=e._getDefFill();this._handleChartStyles(),e._setLabelOption(),t.prototype._create.call(this),e.chartElement.addClass(n.wijCSS.bubbleChart)},s.prototype._paintChartArea=function(){this.bubbleAxisAdjust&&this.bubbleAxisAdjust.dispose(),this.bubbleAxisAdjust=new i(this),t.prototype._paintChartArea.call(this)},s.prototype._bindSeriesData=function(e,n,r){var i=n.data,s=i.y1;t.prototype._bindSeriesData.call(this,e,n,r),s&&s.bind&&(i.y1=this._getBindData(e,s.bind))},s.prototype._setLabelOption=function(){var e=this.options;!$.isPlainObject(e.chartLabel.style)&&$.isPlainObject(e.chartLabelStyle)&&(e.chartLabel.style=e.chartLabelStyle)},s.prototype._clearChartElement=function(){var e=this,n=e.options,r=e.chartElement.data("fields");t.prototype._clearChartElement.call(this),r&&r.bubbleInfos&&$.each(r.bubbleInfos,function(e,t){t.bubble&&t.bubble.wijRemove(),t.dcl&&t.dcl.wijRemove(),t.symbol&&t.symbol.wijRemove()}),r&&r.bubbles&&e._destroyRaphaelArray(r.bubbles),e.element.removeData("plotInfos"),n.seriesTransition.enabled||r&&r.bubblesAnimationInfos&&(r.bubblesAnimationInfos=null)},s.prototype.destroy=function(){var e=this;e.chartElement.removeClass(e.options.wijCSS.bubbleChart+" ui-helper-reset"),e._destroyEles(),this.bubbleAxisAdjust&&(this.bubbleAxisAdjust.dispose(),this.bubbleAxisAdjust=null),t.prototype.destroy.call(this)},s.prototype.getBubble=function(e){return this.chartElement.data("fields").bubbles[e]},s.prototype.redraw=function(e){t.prototype.redraw.call(this,e)},s.prototype._destroyEles=function(){var e=this,t=e.element,n=t.data("fields");n.bubbleInfos&&$.each(n.bubbleInfos,function(t,n){e._removeEle(n.bubble),e._removeEle(n.dcl),e._removeEle(n.symbol),n=null}),t.removeData("fields")},s.prototype._removeEle=function(e){e&&(e.node&&$(e.node).removeData(),e.wijRemove(),e=null)},s.prototype._paintPlotArea=function(){var e=this,t=this.chartElement,n=e.options,r=n.seriesList,i=r.length,s=[].concat(n.seriesStyles.slice(0,i)),o=[].concat(n.seriesHoverStyles.slice(0,i)),u=e.canvasBounds,f=e.axisInfo.x,l=e.axisInfo.y[0],c;if(i===0)return;this.bubbleAxisAdjust.calculateRadius(),this.bubbleChartRender=new a(this.chartElement,{seriesList:r,seriesStyles:s,seriesHoverStyles:o,canvas:e.canvas,bounds:u,xAxisInfo:f,yAxisInfo:l,showChartLabels:n.showChartLabels,chartLabel:n.chartLabel,textStyle:n.textStyle,chartLabelStyle:n.chartLabelStyle,chartLabelFormatString:n.chartLabelFormatString,chartLabelFormatter:n.chartLabelFormatter,bubbleRadius:e.bubbleAxisAdjust.bubbleRadius,animation:n.animation,seriesTransition:n.seriesTransition,sizingMethod:n.sizingMethod,minimumSize:n.minimumSize,maximumSize:n.maximumSize,mouseDown:$.proxy(e._mouseDown,e),mouseUp:$.proxy(e._mouseUp,e),mouseOver:$.proxy(e._mouseOver,e),mouseOut:$.proxy(e._mouseOut,e),mouseMove:$.proxy(e._mouseMove,e),click:$.proxy(e._click,e),disabled:e._isDisabled(),culture:e._getCulture(),wijCSS:n.wijCSS,shadow:n.shadow,widget:this}),this.bubbleChartRender.render(),c=t.data("fields").bubbleInfos;if(!c)return;e.tooltipbubbles=[],$.each(c,function(t,n){e.tooltipbubbles.push(n.bubble),n.dcl&&e.tooltipbubbles.push(n.dcl),n.symbol&&e.tooltipbubbles.push(n.symbol)}),e.tooltip&&e.tooltip.setTargets(e.tooltipbubbles)},s.prototype._getLegendbasicInfo=function(){var e,n=t.prototype._getLegendbasicInfo.call(this);return e=n.iconSize,e.r||(e.r=Math.min(e.width,e.height)),n.iconSize=e,n},s.prototype._getLegendInfoFromSeries=function(e,n,r){if(n.LegendEntry===!1)return undefined;var i,s,o,u;return u=t.prototype._getLegendInfoFromSeries.call(this,e,n,r),s=u.iconStyle,o=$.extend({fill:s.fill,stroke:s.stroke,opacity:1},n.markerStyle),u.iconStyle=o,n.markers&&n.markers.type?u.icon=n.markers.type:u.icon="circle",u.markers=undefined,u.markerVisible=!1,u.markerStyle=undefined,u},s.prototype._calculateParameters=function(e,n){t.prototype._calculateParameters.call(this,e,n);if(!n.autoMax&&!n.autoMin)return;this._adjust(n,e)},s.prototype._adjust=function(e,t){var n=e.unitMinor,r=this,i=e.autoMin,s=e.autoMax,o=r.canvasBounds,u={x:o.startX,y:o.startY},a=o.endX-u.x,f=o.endY-u.y,l=t.max,c=t.min,h=e.origin,p=this.bubbleAxisAdjust.getAdjust(t,e);l=p.max,c=p.min;if(l!==t.max||c!==t.min)t.min=c,t.max=l,this._calculateMajorMinor(e,t)},s.prototype._showSerieEles=function(e){if(e.isTrendline){n.TrendlineRender.showSerieEles(e);return}$.each(e,function(e,t){t.bubble&&(t.bubble.show(),t.bubble.shadow&&t.bubble.shadow.show(),t.bubble.tracker&&t.bubble.tracker.show(),$(t.bubble.node).data("wijchartDataObj")&&($(t.bubble.node).data("wijchartDataObj").visible=!0)),t.dcl&&t.dcl.show(),t.symbol&&t.symbol.show()})},s.prototype._hideSerieEles=function(e){if(e.isTrendline){n.TrendlineRender.hideSerieEles(e);return}$.each(e,function(e,t){t.bubble&&(t.bubble.hide(),t.bubble.shadow&&t.bubble.shadow.hide(),t.bubble.tracker&&t.bubble.tracker.hide(),$(t.bubble.node).data("wijchartDataObj")&&($(t.bubble.node).data("wijchartDataObj").visible=!1)),t.dcl&&t.dcl.hide(),t.symbol&&t.symbol.hide()})},s.prototype._indicatorLineShowing=function(e){t.prototype._indicatorLineShowing.call(this,e),$.each(e,function(e,t){t.bubble&&t.bubble.attr(t.hoverStyle)})},s.prototype._removeIndicatorStyles=function(e){$.each(e,function(e,t){t.bubble&&t.bubble.attr(t.style)})},s.prototype._parseTable=function(){if(!this.element.is("table"))return;var e=this,t=e.element,n=e.options,r=$("caption",t),i=$("thead th",t),s=[],o=$("tbody tr",t),u=null,a=null,f=[],l=[],c=[],h=function(e){var t=$.trim(e);return isNaN(e)||(t=parseFloat(e.toString())),t};r.length&&(n.header=$.extend({visible:!0,text:$.trim($(r[0]).text())},n.header),r.length>1&&(n.footer=$.extend({visibel:!0,text:$.trim($(r[1]).text())},n.footer))),n.legend=$.extend({visible:!0},n.legend),u=$.trim(i.eq(1).text()),o.each(function(e,t){var n=$("td",t);return n.length>=3&&(f.push(h(n.eq(0).text())),l.push(h(n.eq(1).text())),c.push(h(n.eq(2).text()))),this}),a={label:u,legendEntry:!0,data:{x:f,y:l,y1:c}},s.push(a),e.options.seriesList=s},s.prototype._unbindLiveEvents=function(){var e=this;$("."+e.options.wijCSS.bubbleElement,e.chartElement[0]).off(".wijbubblechart").off("wijbubblechart"),e.tooltip&&(e.tooltip.destroy(),e.tooltip=null)},s.prototype._paintTooltip=function(){var e=this,n=e.chartElement.data("fields");t.prototype._paintTooltip.call(this),e.tooltip&&n&&n.trackers&&n.trackers.length&&(e.tooltip.setTargets(n.trackers),e.tooltip.setOptions({relatedElement:n.trackers[0]}))},s.prototype._getTooltipText=function(e,t){var n=$(t.node),r,i;return n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),i={data:r,value:r.value,label:r.label,total:r.total,target:t,fmt:e,x:r.x,y:r.y,y1:r.y1},$.proxy(e,i)()},s}(n.wijchartcore);n.wijbubblechart=s,s.prototype.widgetEventPrefix="wijbubblechart";var o=function(t){function n(){t.apply(this,arguments),this.bubbleChart="wijmo-wijbubblechart",this.bubbleElement="wijbubblechart-bubble",this.bubbleTracker="bubbletracker",this.bubbleLabel="wijbubblechart-label",this.bubbleSymbol="wijbubblechart-symbol"}return e(n,t),n}(n.wijchartcore_css);n.wijbubblechart_css=o;var u=function(n){function r(){n.apply(this,arguments),this.initSelector=":jqmData(role='wijbubblechart')",this.wijCSS=new t.chart.wijbubblechart_css,this.minimumSize=5,this.maximumSize=20,this.sizingMethod="diameter",this.animation={enabled:!0,duration:1e3,easing:">"},this.seriesTransition={enabled:!0,duration:400,easing:">"},this.seriesList=[],this.seriesHoverStyles=[{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5}],this.chartLabel={position:"inside",compass:"north",visible:!0,style:{},chartLabelFormatString:""},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return e(r,n),r}(n.wijchartcore_options);s.prototype.options=$.extend(!0,{},t.wijmoWidget.prototype.options,new u),$.wijmo.registerWidget("wijbubblechart",s.prototype);var a=function(){function e(e,t){this.element=e,this.options=t,this._init()}return e.prototype._init=function(){var e=this.options,t=e.bounds;this.fields=this.element.data("fields")||{},this.canvas=e.canvas,this.seriesList=$.arrayClone(e.seriesList),this.seriesStyles=e.seriesStyles,this.seriesHoverStyles=e.seriesHoverStyles,this.startLocation={x:t.startX,y:t.startY},this.width=t.endX-this.startLocation.x,this.height=t.endY-this.startLocation.y,this.seriesEles=[],this.bubbles=[],this.bubbleInfos=[],this.trackers=this.canvas.set(),this.animationSet=this.canvas.set(),this.fieldsAniPathAttr=[],this.paths=[],this.aniPathsAttr=[],this.showBubbleLabels=e.chartLabel.visible&&e.showChartLabels},e.prototype.initAnimationState=function(e,t){var n=e.bubble,r=e.symbol,i;n.type==="circle"?n.attr({r:1e-4,cx:t.startX,cy:t.endY}):(i=n.wijGetBBox(),n.transform("t"+(t.startX-i.x)+","+(t.endY-i.y)+"s0.001..."),n.shadow&&n.shadow.transform("t"+(t.startX-i.x)+","+(t.endY-i.y)+"s0.001...")),r&&r.hide()},e.prototype.playAnimation=function(){var e=this,t=e.options,n=t.animation,r=t.bounds,i=e.fields.bubblesAnimationInfos,s=[],o=e.fields.bubbleInfos,u=t.seriesTransition,a,f,l;if(!o)return;n&&n.enabled?(a=n.duration||400,f=n.easing,o&&$.each(o,function(t,n){var o=n.bubble,c,h,p=o.wijGetBBox();o.type==="circle"?c={r:o.attr("r"),cx:o.attr("cx"),cy:o.attr("cy")}:c={transform:o.matrix.toTransformString(),"stroke-width":o.attr("stroke-width"),width:p.width,x:p.x,y:p.y},o.shadow&&o.shadow.hide(),i&&u.enabled?(h=i[t],h?(o.type==="circle"?o.attr({cx:h.cx,cy:h.cy,r:h.r}):(p=o.wijGetBBox(),l=h.width/p.width,c.transform=o.matrix.toTransformString(),o.transform(Raphael.format("s{0}t{1}{2}...",l,h.x-p.x,h.y-p.y)),o.shadow&&o.shadow.transform(Raphael.format("s{0}t{1}{2}...",l,h.x-p.x,h.y-p.y))),a=u.duration,f=u.easing):e.initAnimationState(n,r)):e.initAnimationState(n,r),s.push(c),o.wijAnimate(c,a,f,function(){$(n.bubble.node).data("wijchartDataObj")&&$(n.bubble.node).data("wijchartDataObj").visible&&(n.dcl&&n.dcl.show(),n.symbol&&(n.symbol.show(),n.bubble.wijAttr("opacity",.1)),o.shadow&&o.shadow.show())})}),e.fields.bubblesAnimationInfos=s):$.each(o,function(e,t){$(t.bubble.node).data("wijchartDataObj")&&$(t.bubble.node).data("wijchartDataObj").visible&&(t.dcl&&t.dcl.show(),t.symbol&&t.symbol.show())})},e.prototype.playTrendLineAnimation=function(){var e=this,t=e.options,r=t.animation,i=r&&r.enabled,s=t.seriesTransition,o=e.fields.trendLines,u,a;i&&(u=r.duration||400,a=r.easing||"linear",o&&o.length&&n.TrendlineRender.playAnimation(i,u,a,s,t.bounds,o,e.fieldsAniPathAttr,t.widget.options.axis,t.widget.extremeValue))},e.prototype.getSymbol=function(e,t){var n;return $.each(e,function(e,r){if(r.index===t)return n=r,!1}),n},e.prototype.getLabelVisible=function(e,t){var n=!0;return $.each(e,function(e,r){if(t===r)return n=!1,!1}),n},e.prototype.paintMarker=function(e,t,n,r){var i;return this.canvas[e]&&(i=this.canvas[e](t,n,r)),i},e.prototype.getLabelBox=function(e){var t=this.canvas.text(0,0,e),n=t.wijGetBBox(),r;return r={width:n.width,height:n.height},t.remove(),r},e.prototype.applyLabelCompass=function(e,t){var n=this.options.chartLabel.compass||"north",r=this.getLabelBox(t),i=e.r;switch(n){case"north":e.y-=i+r.height/2;break;case"south":e.y+=i+r.height/2;break;case"east":e.x+=i+r.width/2;break;case"west":e.x-=i+r.width/2}},e.prototype.paintDefaultChartLabel=function(e,t){var r=this.options,i=r.chartLabel,s=r.culture,o=$.extend(!0,{},r.textStyle,r.chartLabelStyle,i.style),u=$.round(t.y1,2),a=i.chartLabelFormatString===""?r.chartLabelFormatString:i.chartLabelFormatString,f=this.options.widget,l,c=n.ChartUtil.getChartLabel(a,u,s,{index:t.sIdx,data:{x:t.x,y:t.y,y1:t.y1},value:t.y1,chartLabelFormatter:r.chartLabelFormatter});return u=c.text,l=f._text.call(f,e.x,e.y,u),l.wijAttr(o),l},e.prototype._getSortedBubbleIndex=function(e){if(!e||!e.y1||!e.y1.length)return undefined;var t=e.y1.length,n=[],r=[];for(var i=0;i<t;i++)n.push({dataIndex:i,y1:e.y1[i]});n.sort(function(e,t){return t.y1-e.y1});for(var s=0;s<t;s++)r.push(n[s].dataIndex);return r},e.prototype.paintbubble=function(e,t,r,i,s,o,u,a,f){var l=e.data,c=i.min,h=s.min,p=i.max,d=s.max,v=o/(p-c),m=u/(d-h),g=[],y=this.options,b=this,w=y.bounds,E=y.wijCSS,S=y.widget,x=y.chartLabel,T=y.bubbleRadius,N,C,k,L,A,O=[],M=[];if(l.y1===undefined)return;if(l.x===undefined||l.y===undefined)return!0;A=b._getSortedBubbleIndex(l);if(!A||!A.length)return;$.each(A,function(o,u){var a=l.y1[u],h=l.x[u],p=l.y[u],y=e.markers||{},A=y.type||"circle",_=y.symbol,D=e.invisibleMarkLabels||[],P=T[a],H,B,j,F,I,q,R,U,z;i.isTime?h=$.toOADate(h):isNaN(h)&&(h=u),s.isTime&&(p=$.toOADate(p)),I=w.startX+(h-c)*v,q=w.startY+(d-p)*m,_&&(R=b.getSymbol(_,u)),F=b.paintMarker(A,I,q,P),F.attr(t),R&&(C=R.width||P*2,k=R.height||P*2,U=b.canvas.image(R.url,I-P,q-P,C,k)),b.options.shadow&&n.ChartUtil.paintShadow(F,2,null),$.wijraphael.addClass($(F.node),E.canvasObject+" "+E.bubbleElement),R&&F.attr("opacity",.1),j=$.extend(!1,{index:u,bubble:F,style:t,y1:a,x:h,y:p,type:"bubble",hoverStyle:r,visible:!0},e),R&&(j.symbol=!0,j.hoverStyle=$.extend({},r,{opacity:.1}),$(U.node).data("wijchartDataObj",j),$.wijraphael.addClass($(U.node),E.bubbleSymbol)),$(F.node).data("wijchartDataObj",j),S.dataPoints=S.dataPoints||{},S.pointXs=S.pointXs||[],L=$.round(I,2),S.dataPoints[L.toString()]||(S.dataPoints[L.toString()]=[],S.pointXs.push(L)),S.dataPoints[L.toString()].push(j),z=F.clone(),$.browser.msie&&parseInt($.browser.version)<9?z.attr({opacity:.01,fill:"white","stroke-width":0,"fill-opacity":.01}):z.attr({opacity:.01,fill:"white","fill-opacity":.01}),$(z.node).data("owner",$(F.node)),$.wijraphael.addClass($(z.node),E.canvasObject+" "+E.bubbleElement+" "+E.bubbleTracker),F.tracker=z,O[u]=z,M[u]=F,H={x:I,y:q,r:P},b.showBubbleLabels&&b.getLabelVisible(D,u)&&(x.position==="outside"&&b.applyLabelCompass(H,a),N=b.paintDefaultChartLabel(H,{x:h,y:p,y1:a,sIdx:f}),N.hide(),$(N.node).data("wijchartDataObj",j),$.wijraphael.addClass($(N.node),E.bubbleLabel)),B={bubble:F,dcl:N,symbol:U},g[u]=B,e.visible===!1&&(F.hide(),N&&N.hide(),z.hide(),U&&U.hide())}),$.each(O,function(e,t){t&&b.trackers.push(t)}),$.each(M,function(e,t){t&&b.bubbles.push(t)}),b.fields.bubbles=b.bubbles,$.each(g,function(e,t){t&&b.bubbleInfos.push(t)}),b.fields.bubbleInfos=b.bubbleInfos,b.seriesEles.push(g)},e.prototype.paintBubbles=function(){var e=this,t=e.options,r=t.xAxisInfo,i=t.yAxisInfo,s=t.animation,o=t.seriesTransition,u=t.wijCSS,a=[],f=t.canvas,l=t.widget.options.axis;$.each(e.seriesList,function(c,h){var p=e.seriesStyles[c],d=e.seriesHoverStyles[c];h.isTrendline?n.TrendlineRender.renderSingleTrendLine(h,p,d,l,t.hole,e.fieldsAniPathAttr,s,o,c,t.bounds,f,e.paths,a,e.animationSet,e.aniPathsAttr,u,e.seriesEles):e.paintbubble(h,p,d,r,i,e.width,e.height,e.startLocation,c)}),this.fields.trendLines=e.paths},e.prototype.bindLiveEvents=function(e,t,r,i,s,o,u,a){var f=this.options,l=f.wijCSS,c="",h={mousedown:function(n){if(a)return;var r=$(n.target),i;r.data("owner")&&(r=r.data("owner")),i=r.data("wijchartDataObj"),t.call(e,n,i)},mouseup:function(t){if(a)return;var n=$(t.target),i;n.data("owner")&&(n=n.data("owner")),i=n.data("wijchartDataObj"),r.call(e,t,i)},mouseover:function(t){if(a)return;var n=$(t.target),r,s;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),s=r.bubble,r.hoverStyle?(s.attr(r.hoverStyle),s.shadow&&s.shadow.attr(r.hoverStyle)):s&&s.attr({opacity:"0.8"}),i.call(e,t,r)},mouseout:function(t){if(a)return;var n=$(t.target),r,i;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),i=r.bubble;if(r.symbol)return;r.hoverStyle?(r.hoverStyle["stroke-width"]&&!r.style["stroke-width"]&&(i.attr("stroke-width",""),i.shadow&&i.shadow.attr("stroke-width","")),i.wijAttr({transform:""}),i.wijAttr(r.style),r.style.opacity&&(i.attr("opacity",r.style.opacity),i.shadow&&i.shadow.attr("opacity",r.style.opacity))):i&&i.attr({opacity:"1"}),s.call(e,t,r)},mousemove:function(t){if(a)return;var n=$(t.target),r,i;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),o.call(e,t,r)},click:function(t){if(a)return;var n=$(t.target),r;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),u.call(e,t,r)}};$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(c="wij"),$.each(["click","mouseover","mouseout","mousemove","mousedown","mouseup"],function(t,n){$("."+l.bubbleTracker,e).on(c+n+".wijbubblechart",h[n])}),n.TrendlineRender.unbindLiveEvents(e,f.widget.widgetName,l),n.TrendlineRender.bindLiveEvents(e,f.widget.widgetName,t,r,i,s,o,u,a,l,!1)},e.prototype.render=function(){var e=this.options,t=e.mouseDown,n=e.mouseUp,r=e.mouseOver,i=e.mouseOut,s=e.mouseMove,o=e.click,u=e.disabled;this.paintBubbles(),this.fields.seriesEles=this.seriesEles,this.playAnimation(),this.playTrendLineAnimation(),this.trackers.toFront(),this.fields.trackers=this.trackers,this.bindLiveEvents(this.element,t,n,r,i,s,o,u),this.element.data("fields",this.fields)},e}();n.BubbleChartRender=a})(t.chart||(t.chart={}));var n=t.chart})(wijmo||(wijmo={}))});