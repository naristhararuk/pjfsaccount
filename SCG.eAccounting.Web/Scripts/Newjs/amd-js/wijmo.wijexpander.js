var wijmo;define(["./wijmo.widget"],function(){var e=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};(function(t){(function(n){var r=jQuery,i="wijexpander",s="ui-expander-content",o=function(n){function i(){n.apply(this,arguments)}return e(i,n),i.prototype._setOption=function(e,t){var n=this.element.find("> ."+s);switch(e){case"contentUrl":t?n.wijContent(t):n.html(this.storeContentHTML);break;case"expandDirection":this._onDirectionChange(t,!0,this.options.expandDirection);break;case"expanded":t?this.expand():this.collapse();return;default:}r.wijmo.widget.prototype._setOption.apply(this,arguments)},i.prototype._innerDisable=function(){n.prototype._innerDisable.call(this),this._toggleDisableExpander(!0)},i.prototype._innerEnable=function(){n.prototype._innerEnable.call(this),this._toggleDisableExpander(!1)},i.prototype._toggleDisableExpander=function(e){var t=this.element.find("> ."+s);this.element.toggleClass(this.options.wijCSS.stateDisabled,e).find("> .ui-expander-header").toggleClass(this.options.wijCSS.stateDisabled,e),t.toggleClass(this.options.wijCSS.stateDisabled,e)},i.prototype._create=function(){var e=this.options,i=this.element.children(),o,u,a=e.wijCSS;window.wijmoApplyWijTouchUtilEvents&&(r=window.wijmoApplyWijTouchUtilEvents(r)),this.element.addClass("wijmo-wijexpander ui-expander "+e.wijCSS.widget+" ui-expander-icons"),this.header=o=r(i[0]),this.content=u=r(i[1]);if(e.expandDirection==="left"||e.expandDirection==="top")o.remove(),o.insertAfter(u);o.addClass("ui-expander-header"),o.attr("role","tab"),u.attr("role","tabpanel"),o.find("> a").length===0&&(o.wrapInner('<a href="javascript:void(null)"></a>'),this.headerLink=o.children()),o.find("> ."+t.getCSSSelector(a.icon)).length===0&&(this.headerIcon=r("<span></span>").addClass(a.icon).insertBefore(r("> a",o)[0])),u.addClass(s+" "+a.content),this.storeContentHTML=u.html(),n.prototype._create.call(this)},i.prototype._init=function(){var e=this.options,n=this.element.find("> ."+s);this._onDirectionChange(e.expandDirection,!1),e.contentUrl&&n.wijContent(this.options.contentUrl),e.expanded?(this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateDefault+" "+e.wijCSS.stateActive).attr({"aria-expanded":"true",tabIndex:0}).addClass(this._headerCornerOpened).find("> ."+t.getCSSSelector(e.wijCSS.icon)).addClass(this._triangleIconOpened),n.addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility()):(n.hide(),this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}).find("> ."+t.getCSSSelector(e.wijCSS.icon)).addClass(this._triangleIconClosed)),this._isDisabled()&&(this.element.addClass(e.wijCSS.stateDisabled).find("> .ui-expander-header").addClass(e.wijCSS.stateDisabled),n.addClass(e.wijCSS.stateDisabled)),this._bindLiveEvents()},i.prototype.destroy=function(){var e=this.options,t="wijmo-wijexpander ui-expander "+e.wijCSS.widget+" "+"ui-helper-reset ui-expander-icons "+"ui-expander-"+e.expandDirection+" "+e.wijCSS.stateFocus+" "+e.wijCSS.stateHover+" "+e.wijCSS.stateDisabled,n="ui-expander-header "+e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll+" "+e.wijCSS.stateActive+" "+this._headerCornerOpened,i=s+" "+e.wijCSS.content+" "+"ui-expander-content-active "+e.wijCSS.stateDisabled+" "+this._contentCornerOpened;this._unbindLiveEvents(),this.element.removeClass(t),this.headerIcon&&(this.headerIcon.remove(),this.headerIcon=null),this.headerLink&&(this.header.html(this.headerLink.html()),this.headerLink.remove(),this.headerLink=null),this.header.removeClass(n),this.header.removeAttr("role").removeAttr("aria-expanded").removeAttr("tabIndex"),this.content.removeClass(i),this.content.removeAttr("role"),e.contentUrl&&this.content.html(this.storeContentHTML),this.header.insertBefore(this.content),r.wijmo.widget.prototype.destroy.apply(this,arguments)},i.prototype._bindLiveEvents=function(){var e=this.options,t="";this.element.off(".wijexpander"),r.support.isTouchEnabled&&r.support.isTouchEnabled()&&(t="wij"),this.element.on(t+"click.wijexpander",">.ui-expander-header",jQuery.proxy(this._onHeaderClick,this)),this.element.on(t+"mouseenter.wijexpander",".ui-expander-header",function(){r(this).addClass(e.wijCSS.stateHover)}),this.element.on(t+"mouseleave.wijexpander",".ui-expander-header",function(){r(this).removeClass(e.wijCSS.stateHover)}),this.element.on(t+"focus.wijexpander",".ui-expander-header",function(){r(this).addClass(e.wijCSS.stateFocus)}),this.element.on(t+"blur.wijexpander",".ui-expander-header",function(){r(this).removeClass(e.wijCSS.stateFocus)})},i.prototype._unbindLiveEvents=function(){this.element.off(".wijexpander",".ui-expander-header")},i.prototype._onDirectionChange=function(e,t,n){typeof n=="undefined"&&(n=null);var i,o,u,a,f,l,c,h,p=this.options;n&&n!==e&&this.element.removeClass("ui-expander-"+n),t&&(o=this.element.find(".ui-expander-header."+this._headerCornerOpened),o.removeClass(this._headerCornerOpened),u=this.element.find("."+s+"."+this._contentCornerOpened),u.removeClass(this._contentCornerOpened),a=this.element.find("."+this._triangleIconOpened),f=this.element.find("."+this._triangleIconClosed),a.removeClass(this._triangleIconOpened),f.removeClass(this._triangleIconClosed));switch(e){case"top":this._headerCornerOpened="ui-corner-bottom",this._contentCornerOpened="ui-corner-top",this._triangleIconOpened=p.wijCSS.iconArrowUp,this._triangleIconClosed=p.wijCSS.iconArrowRight,i=!0,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-top");break;case"right":this._headerCornerOpened="ui-corner-left",this._contentCornerOpened="ui-corner-right",this._triangleIconOpened=p.wijCSS.iconArrowRight,this._triangleIconClosed=p.wijCSS.iconArrowDown,i=!1,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-right");break;case"left":this._headerCornerOpened="ui-corner-right",this._contentCornerOpened="ui-corner-left",this._triangleIconOpened=p.wijCSS.iconArrowLeft,this._triangleIconClosed=p.wijCSS.iconArrowDown,i=!0,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-left");break;default:this._headerCornerOpened="ui-corner-top",this._contentCornerOpened="ui-corner-bottom",this._triangleIconOpened=p.wijCSS.iconArrowDown,this._triangleIconClosed=p.wijCSS.iconArrowRight,i=!1,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-bottom")}l=this.element.data("rightToLeft"),this.element.data("rightToLeft",i),t&&(a.addClass(this._triangleIconOpened),f.addClass(this._triangleIconClosed),o.addClass(this._headerCornerOpened),u.addClass(this._contentCornerOpened)),t&&i!==l&&this.element.children(".ui-expander-header").each(function(e,t){h=r(this),i?(c=h.next("."+s),h.remove(),h.insertAfter(c)):(c=h.prev("."+s),h.remove(),h.insertBefore(c))})},i.prototype.collapse=function(){var e=this.options,n,i,o,u,a=this.element.find("> ."+s);if(!e.allowExpand)return;return this.element.hasAllClasses(e.wijCSS.stateDisabled)?!1:this._trigger("beforeCollapse")?(e.animated?(n={expand:!1,content:a,complete:jQuery.proxy(function(){a.removeClass("ui-expander-content-active"),this._trigger("afterCollapse"),a.css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},i=r.wijmo.wijexpander.animations,o=e.duration,u=e.animated,u&&!i[u]&&!r.easing[u]&&(u="slide"),i[u]||(i[u]=function(e){this.slide(e,{easing:u,duration:o||700})}),i[u](n)):(a.hide(),this._trigger("afterCollapse")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.stateActive).removeClass(this._headerCornerOpened).attr({"aria-expanded":"false",tabIndex:-1}).addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).find("> ."+t.getCSSSelector(e.wijCSS.icon)).removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),this.options.expanded=!1,!0):!1},i.prototype.expand=function(){var e=this.options,n,i,o,u,a=this.element.find("> ."+s);if(!e.allowExpand)return;return this.element.hasAllClasses(e.wijCSS.stateDisabled)?!1:this._trigger("beforeExpand")?(e.animated?(n={expand:!0,content:a,complete:jQuery.proxy(function(){a.addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility(),this._trigger("afterExpand"),a.css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},i=r.wijmo.wijexpander.animations,o=e.duration,u=e.animated,u&&!i[u]&&!r.easing[u]&&(u="slide"),i[u]||(i[u]=function(e){this.slide(e,{easing:u,duration:o||700})}),i[u](n)):(a.show(),this._trigger("afterExpand")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.cornerAll).addClass(e.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> ."+t.getCSSSelector(e.wijCSS.icon)).removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),this.options.expanded=!0,!0):!1},i.prototype._onHeaderClick=function(e){this.option("expanded",!this.options.expanded)},i}(t.wijmoWidget);n.wijexpander=o;var u=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-content ui-body ui-body-b"},this.initSelector=":jqmData(role='wijexpander')",this.allowExpand=!0,this.animated="slide",this.contentUrl="",this.expanded=!0,this.expandDirection="bottom",this.beforeCollapse=null,this.beforeExpand=null,this.afterCollapse=null,this.afterExpand=null}return e}();o.prototype.options=r.extend(!0,{},t.wijmoWidget.prototype.options,new u),r.wijmo.registerWidget(i,o.prototype),r.extend(r.wijmo.wijexpander,{animations:{slide:function(e,t){var n;e=r.extend({easing:"swing",duration:300},e,t),e.expand?(e.horizontal?n={width:"show",opacity:"show"}:n={height:"show",opacity:"show"},e.content.stop(!0,!0).animate(n,e)):(e.horizontal?n={width:"hide",opacity:"hide"}:n={height:"hide",opacity:"hide"},e.content.stop(!0,!0).animate(n,e))}}})})(t.expander||(t.expander={}));var n=t.expander})(wijmo||(wijmo={}))});