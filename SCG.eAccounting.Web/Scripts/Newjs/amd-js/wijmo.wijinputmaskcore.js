var wijmo;define(["./wijmo.wijstringinfo","./wijmo.wijinpututility","./wijmo.wijinputcore"],function(){var e=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};(function(t){(function(t){var n=jQuery,r=function(){function e(e,t,n){this.filterLabel=e,this._include=n,this._owner=t}return e.prototype.Check=function(e,t){var n={};n.success=!1,n.strValue="",n.index=t;var r=e.Substring(t,t+1),i=this.IsValid(r);if(i)return e=e.Substring(t,t+1),t++,n.strValue=e,n.index=t,n;if(this._owner.GetAutoConvert()&&(r.length===1||r.length===3)){n=this.Convert(e,t);if(n.success)return n}return n},e.prototype.IsValid=function(e){return e.length===2&&(e.charCodeAt(1)===65438||e.charCodeAt(1)===65439)&&!t.CharProcess.CharEx.IsFullWidth(e)&&t.CharProcess.CharEx.IsKatakana(e)?this.IsValidTwoByte(e):e.length>1?this.IsValidMoreByte(e):this.IsValidTwoByte(e)},e.prototype.IsValidTwoByte=function(e){return!1},e.prototype.IsValidMoreByte=function(e){return!1},e.prototype.Convert=function(e,n){var r={};r.success=!0,r.strValue="",r.index=n;var i=e.Substring(n,n+1),s,o=t.CharProcess.CharEx;if(o.IsAlphabet(i)){var u=o.IsLower(i)?i.toUpperCase():i.toLowerCase();return s=this.IsValid(u),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=u,r):(i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this.IsValid(i),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=i,r):(u=o.IsFullWidth(u)?o.ToHalfWidth(u):o.ToFullWidth(u).text,s=this.IsValid(u),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=u,r):(r.success=!1,r)))}if(o.IsHiragana(i)){if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}i=o.ToKatakana(i),s=this.IsValid(i);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=i,r;if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}var l=o.ToHalfWidthEx(i);s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r;if(o.IsLowerKana(l)){l=o.ToUpperKana(l),s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r}else if(o.HasLowerKana(l)){l=o.ToLowerKana(l),s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r}return r.success=!1,r}if(o.IsKatakana(i)){if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}var u=i,c=!1;if(o.IsFullWidth(i)){var h=o.ToHalfWidthEx(i);if(h.GetLength()>0){s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}if(o.IsLowerKana(h)){h=o.ToUpperKana(h),s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}else if(o.HasLowerKana(h)){h=o.ToLowerKana(h),s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}}else{if(n==null){u=o.ToFullWidth(i).text;if(!o.IsKatakana(u))return r;s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=u,r}else{if(n+1<e.GetLength()){var p=o.ToFullWidth(e.Substring(n,n+2));u=p.text,c=p.processedAll}else u=o.ToFullWidth(i).text;if(!o.IsKatakana(u))return r;s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,c&&n++,r.index=n,r.strValue=u,r}if(o.IsLowerKana(u)){var a=o.ToUpperKana(u);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(u)){var f=o.ToLowerKana(u);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}}u=o.ToHiragana(u),s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,c&&n++,r.index=n,r.strValue=u,u==="\u3094"&&(c?r.strValue="\u3046\u309b":(n--,r.index=n,r.strValue="",r.success=!1)),r;if(o.IsLowerKana(u)){var a=o.ToUpperKana(u);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(u)){var f=o.ToLowerKana(u);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}}return i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this.IsValid(i),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=i,r):(r.success=!1,r)},e}();t.CharacterFilter=r;var i=function(n){function r(e,t){n.call(this,"HalfWidthFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsFullWidth(e)?e==="\r"||e==="\n"?!0:!1:!0},r}(r),s=function(n){function r(e,t){n.call(this,"FullWidthFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsFullWidth(e)?!0:e==="\r"||e==="\n"?!0:!1},r}(r),o=function(n){function r(e,t){n.call(this,"HiraganaFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsHiragana(e)?!0:e==="\r"||e==="\n"?!0:!1},r}(r),u=function(n){function r(e,t){n.call(this,"ShiftJISFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsShiftJIS(e)},r}(r),a=function(n){function r(e,t){n.call(this,"JISX0208Filter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsJISX0208(e)},r}(r),f=function(n){function r(e,t){n.call(this,"DBCSHiraganaFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsUpperKana(e)&&t.CharProcess.CharEx.IsHiragana(e)},r}(r),l=function(n){function r(e,t){n.call(this,"DBCSKatakanaFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsFullWidth(e)&&t.CharProcess.CharEx.IsKatakana(e)&&!t.CharProcess.CharEx.IsLowerKana(e)},r}(r),c=function(n){function r(e,t){n.call(this,"SBCSKatakanaFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return!t.CharProcess.CharEx.IsFullWidth(e)&&t.CharProcess.CharEx.IsKatakana(e)&&!t.CharProcess.CharEx.IsLowerKana(e)},r}(r),h=function(n){function r(e,t){n.call(this,"SurrogateFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsSurrogatePair(e)?!0:e==="\r"||e==="\n"?!0:!1},r.prototype.IsValidMoreByte=function(e){for(var n=0;n<e.length;n++)if(t.CharProcess.CharEx.IsSurrogate(e[n]))return!0;return!1},r}(r),p=function(n){function r(e,t){n.call(this,"HalfWidthKatakanaFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return!t.CharProcess.CharEx.IsFullWidth(e)&&t.CharProcess.CharEx.IsKatakana(e)?!0:e==="\r"||e==="\n"?!0:!1},r}(r),d=function(n){function r(e,t){n.call(this,"FullWidthKatakanaFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsFullWidth(e)&&t.CharProcess.CharEx.IsKatakana(e)?!0:e==="\r"||e==="\n"?!0:!1},r}(r),v=function(n){function r(e,t){n.call(this,"HalfWidthSymbolsFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return!t.CharProcess.CharEx.IsFullWidth(e)&&t.CharProcess.CharEx.IsSymbol(e)?!0:e==="\r"||e==="\n"?!0:!1},r}(r),m=function(n){function r(e,t){n.call(this,"FullWidthSymbolsFilter",e,t)}return e(r,n),r.prototype.IsValidTwoByte=function(e){return t.CharProcess.CharEx.IsFullWidth(e)&&t.CharProcess.CharEx.IsSymbol(e)?!0:e==="\r"||e==="\n"?!0:!1},r}(r),g=function(t){function n(e,n,r,i){t.call(this,"LimitedFilter",r,i),this._includeChars=e,this._excludeChars=n}return e(n,t),n.prototype.IsValidTwoByte=function(e){return this._includeChars!==""&&this._includeChars.IndexOf(e)>-1||this._excludeChars!==""&&this._excludeChars.IndexOf(e)===-1?!0:e==="\r"||e==="\n"?!0:!1},n.prototype.IsValidMoreByte=function(e){return this._includeChars!==""&&this._includeChars.IndexOf(e)>-1||this._excludeChars!==""&&this._excludeChars.IndexOf(e)===-1?!0:e==="\r"||e==="\n"?!0:!1},n}(r),y=function(t){function n(e,n,r,i){t.call(this,"RangeFilter",r,i),this._startChar=e,this._endChar=n}return e(n,t),n.prototype.IsValidTwoByte=function(e){return e>=this._startChar&&e<=this._endChar?!0:e==="\r"||e==="\n"?!0:!1},n}(r),b=function(t){function n(e,n){t.call(this,"UnionFilter",e,n),this.filterArray=[]}return e(n,t),n.prototype.Add=function(e){if(e==null)return;e.filterLabel==="HiraganaFilter"?this.hiranagaFilter=e:e.filterLabel==="FullWidthKatakanaFilter"&&(this.katakanaFilter=e),this.filterArray.push(e)},n.prototype.AddRange=function(e){for(var t=0;t<e.length;t++)this.Add(e[t])},n.prototype.IsValidTwoByte=function(e){if(this.filterArray.length===0)return e==="\r"||e==="\n"?!0:!1;var t=!1,n=!1;for(var r=0;r<this.filterArray.length;r++)this.filterArray[r]._include&&(n=!0);var i=e==="\u30fc";if(i)if(this.hiranagaFilter&&this.katakanaFilter){if(n)return!0}else{if(this.hiranagaFilter)return!0;if(this.katakanaFilter)return!0}for(var r=0;r<this.filterArray.length;r++)if(this.filterArray[r].IsValid(e)){if(!this.filterArray[r]._include)return!1;t=!0}else n||(t=!0);return t?!0:e==="\r"||e==="\n"?!0:!1},n.prototype.IsValidMoreByte=function(e){return this.IsValidTwoByte(e)},n}(r),w=function(){function e(e){this.minLength=-1,this.maxLength=-1,this.text="",this.oldText="",this.fieldLabel=e}return e.prototype.Snap=function(){var e={};return e.text=this.text,e.oldText=this.oldText,e},e.prototype.Revert=function(e){this.text=e.text,this.oldText=e.oldText},e.prototype.GetFieldText=function(){return this.oldText==null?null:this.oldText},e.prototype.GetText=function(){return this.text},e.prototype.SetText=function(e){this.text=e},e.prototype.GetFillingString=function(e){if(!e)return null;var t="";for(var n=0;n<this.minLength;n++)t+=e;return t},e.prototype.GetFieldStatus=function(){return 0},e.prototype.GetTextExcludeLiterals=function(e,t){var n=this.text.GetLength();n<t&&(t=n);var r=this.text.Substring(e,t);return r=r.replace(/[^\d]/g,""),r},e.prototype.SaveOldState=function(){},e.prototype.RollBack=function(){},e.prototype.PerformSpin=function(e,t,n){return 0},e.prototype.Insert=function(e,t,n,r){},e.prototype.Replace=function(e,t,n){},e.prototype.Delete=function(e,t){},e.prototype.SaveUndoState=function(){},e.prototype.Clear=function(){this.text=null},e.prototype.Undo=function(){},e.prototype.SetTextInternal=function(e,t,n,r){},e.prototype.GetLength=function(){return this.text.GetLength()>this.minLength?this.text.GetLength():this.minLength},e}();t.Field=w;var E=function(t){function n(e){t.call(this,"PromptField"),this.text=e,this.minLength=this.text.GetLength(),this.maxLength=this.text.GetLength()}return e(n,t),n.prototype.GetFillingString=function(){return this.text},n.prototype.SetText=function(e){var t={};return e===this.promptText?(t.existInvalid=!1,e=e.Substring(this.text.GetLength())):t.existInvalid=!0,t.text=e,t},n.prototype.GetLength=function(){return this.text.GetLength()},n}(w),S=function(n){function i(e){n.call(this,"FilterField"),this._minLength=0,this._maxLength=0,this._filter=new r,this._bitStates=null,this._oldBitState=null,this.undoText="",this.undoTempText="",this._undoBitState=null,this._trueLength=0,this._bitState=null,this._owner=e}return e(i,n),i.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},i.prototype.GetAutoConvert=function(){return this._owner.GetAutoConvert()},i.prototype.FilterField=function(e,t,n,r){if(e>t)return!1;if(!n)return!1;this._minLength=e,this._maxLength=t,this._filter=n,this._bitState=r,this._oldBitState=r,this._undoBitState=r,this._trueLength=0;if(this._bitState!=null){var i=0;while(this._bitState[i]!=null)i++;for(var s=i;s>=0;s--)if(this._bitState[s]!=null)this._bitState[s]===!1&&this._trueLength--;else{if(this._bitState[s]!=null)break;this._trueLength--}}return this.Clear(),!0},i.prototype.InitialText=function(e){while(e.IndexOf("@#GCD#@")!=-1)e=e.replace("@#GCD#@","'");while(e.IndexOf("@#GCM#@")!=-1)e=e.replace("@#GCM#@",'"');this.text=e,this.oldText=e,this.undoText=e,this.undoTempText=e},i.prototype.GetFieldStatus=function(){return this._trueLength>=this._minLength&&this._trueLength>0?2:this._trueLength>0&&this._trueLength<this._minLength?1:0},i.prototype.GetFieldIsFull=function(){if(this._trueLength>=this._minLength&&this._trueLength>0){for(var e=0;e<this._trueLength;e++)if(this._bitState[e]===!1)return!1;return!0}return!1},i.prototype.SetTextInternal=function(e,n,r,i){var s={};s.offset=n,s.text=e,s.existInvalid=!1,s.exception=!1;var o=!1;if(n>this._maxLength||e===""||e.GetLength()===0)return s;var u="",a=0,f=[],l=n;for(var c=0;c<n;c++)f[c]=this._bitState[c];while(a<e.GetLength()){var h=this._filter.Check(e,a),p=h.strValue;a=h.index;if(p===""&&e.Substring(a,a+1)!==this.GetPromptChar()){if(!r&&n+u.GetLength()>=this._minLength&&n+u.GetLength()===this._trueLength+u.GetLength())break;o=!0,a++;break}p!==""?(i&&i!==""&&i.Substring(l,l+1)===t.Utility.MaskValChar?(u+=this.GetPromptChar(),f[l]=!1):p==="\r"||p==="\n"?(u+=this.GetPromptChar(),f[l]=!1):(u+=p,f[l]=!0),l++,p.GetLength()===2&&(f[l]=!0,l++)):(u+=this.GetPromptChar(),a++,f[l]=!1,l++);if(n+u.GetLength()===this._maxLength)break;if(n+u.GetLength()>this._maxLength){u=u.Substring(0,u.GetLength()-1);break}}n+u.GetLength()<this._minLength&&(e=e.Substring(a,e.GetLength()-a),s.existInvalid=o,s.exception=!0);var d=this.text.Substring(0,n)+u+this.text.Substring(n,this.text.GetLength());d.GetLength()>this._maxLength&&(d=d.Substring(0,this._maxLength));if(d.GetLength()>n+u.GetLength())for(var v=1;v<=d.GetLength()-n-u.GetLength();v++)this._bitState[n+v]!=null&&(f[l]=this._bitState[n+v],l++);this._bitState=new Array(l),this._bitState=f,this._trueLength=l;for(var v=l-1;v>=0;v--){if(this._bitState[v]!==!1)break;this._trueLength--}if(d.GetLength()<this._minLength)for(var v=0;v<this._minLength-d.GetLength();v--)d+=this.GetPromptChar();for(var v=d.GetLength();v>this._minLength;v--){if(!(d.Substring(v-1,v)===this.GetPromptChar()&&v>this._trueLength))break;d=d.Substring(0,v-1)}return this.text=d,a===e.GetLength()?e="":e=e.Substring(a,e.GetLength()),n+=u.GetLength(),s.offset=n,s.text=e,s},i.prototype.SaveOldState=function(){this.oldText=this.text,this._oldBitState=this._bitState},i.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoBitState=this._bitState},i.prototype.GetValue=function(){},i.prototype.GetText=function(){return this._text},i.prototype.UpdateState=function(e){},i.prototype.RollBack=function(){if(this.oldText===this.text)return;var e=this.oldText;this.text=e,this._bitState=this._oldBitState,this._trueLength=e.GetLength();for(var t=e.GetLength()-1;t>=0;t--){if(this._bitState[t]!=0)break;this._trueLength--}},i.prototype.Undo=function(){if(this.undoTempText===this.text)return!1;var e=this.undoTempText;this.undoTempText=this.text;var t=this._bitState;this.text=e,this._bitState=this._undoBitState,this._trueLength=e.GetLength();if(this._bitState.length===0)this._trueLength=0;else for(var n=e.GetLength()-1;n>=0;n--){if(this._bitState[n]!==!1)break;this._trueLength--}return this._undoBitState=t,!0},i.prototype.Clear=function(){this._trueLength=0;var e="",t=[];if(this._minLength>0){for(var n=0;n<this._minLength;n++)t[n]=!1;this._bitState=new Array(this._minLength),this._bitState=t;if(this.GetPromptChar()!=="")for(var n=0;n<this._minLength;n++)e+=this.GetPromptChar();else for(var n=0;n<this._minLength;n++)e+=" ";this.text=e}else this.text="",this._bitStates=null},i.prototype.Insert=function(e,t,n,r){r||(r=!0);var i={};i.offset=e,i.text=t,i.existInvalid=!1,i.exception=!1;var s=!1;if(e>this._maxLength||t===""||t.GetLength()===0)return i;var o=[],u=e;for(var a=0;a<e;a++)o[a]=this._bitState[a];var f="",l=0;while(l<t.GetLength()){var c=this._filter.Check(t,l),h=c.strValue;l=c.index;if(!(h!==""||!r&&t.CharAt(l)===" ")){if(!n&&e+f.GetLength()>=this._minLength&&e+f.GetLength()>=this._trueLength+f.GetLength())break;s=!0,l++;continue}h===""&&!r&&t.CharAt(l)===" "?(f+=this.GetPromptChar(),o[u]=!1,u++,l++):h==="\r"||h==="\n"?(f+=this.GetPromptChar(),o[u]=!1,u++):(f+=h,o[u]=!0,u++,h.GetLength()===2&&(o[u]=!0,u++));if(e+f.GetLength()===this._maxLength)break;if(e+f.GetLength()>this._maxLength){f=f.Substring(0,f.GetLength()-1);break}}if(f.GetLength()===0)return t=t.Substring(l,t.GetLength()-l),i.existInvalid=s,i.exception=!0,i;var p=this.text.Substring(0,e)+f+this.text.Substring(e,this.text.GetLength());p.GetLength()>this._maxLength&&(p=p.Substring(0,this._maxLength));if(p.GetLength()>e+f.GetLength())for(var d=0;d<p.GetLength()-e-f.GetLength();d++)this._bitState[e+d]!=null?o[u]=this._bitState[e+d]:o[u]=!1,u++;this._bitState=new Array(u),this._bitState=o,this._trueLength=u;for(var d=u-1;d>=0;d--){if(this._bitState[d]!==!1)break;this._trueLength--}if(p.GetLength()<this._minLength)for(var d=0;d<this._minLength-p.GetLength();d--)p+=this.GetPromptChar();for(var d=p.GetLength();d>this._minLength;d--){if(!(p.Substring(d-1,d)===this.GetPromptChar()&&d>this._trueLength))break;p=p.Substring(0,d-1)}return this.text=p,l===t.GetLength()?t="":t=t.Substring(l,t.GetLength()),e+=f.GetLength(),i.offset=e,i.text=t,i},i.prototype.Replace=function(e,n,r,i){var s={};s.offset=e,s.text=r;if(n===0)return s;var o=r.charCodeAt(0),u=[12364,12460,12366,12462,12376,12472];if(t.Utility.ArrayIndexOf(u,o)!==-1&&n===1){var a=this._filter.Check(r,0);a.strValue&&a.strValue.length===2&&(n=2)}return e=this.Delete(e,n),s=this.Insert(e,r,i),s},i.prototype.Delete=function(e,t){if(t===0||e>=this.text.GetLength())return e;e+t>this.text.GetLength()&&(t=this.text.GetLength()-e);var n=[],r=e;for(var i=0;i<e;i++)n[i]=this._bitState[i];var s=this.text.Substring(0,e)+this.text.Substring(e+t,this.text.GetLength());if(e+t<this.text.GetLength())for(var o=0;o<this.text.Substring(e+t,this.text.GetLength()).GetLength();o++)this._bitState[e+t+o]!=null?n[r]=this._bitState[e+t+o]:n[r]=!1,r++;if(r<this._minLength)for(var o=r;o<this._minLength;o++)n[o]=!1;this._bitState=new Array(r),this._bitState=n,this._trueLength=r;for(var o=r-1;o>=0;o--){if(this._bitState[o]!==!1)break;this._trueLength--}if(s.GetLength()<this._minLength){var u=this._minLength-s.GetLength();for(var o=0;o<u;o++)s+=this.GetPromptChar()}return this.text=s,e},i}(w),x=function(n){function r(e){n.call(this,"EnumField"),this._activeItem=-1,this._trueLength=0,this._lastActiveItem=-1,this.undoText="",this.undoTempText="",this._undoItem=-1,this._minLength=0,this._maxLength=0,this._itemCount=0,this._owner=e}return e(r,n),r.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},r.prototype.GetText=function(){var e="";return this._activeItem<0?e=t.Utility.ToString(this.GetPromptChar(),this._minLength):e+=this._items[this._activeItem],e},r.prototype.GetFieldStatus=function(){return this._activeItem===-1?0:2},r.prototype.GetFieldIsFull=function(){return this._activeItem===-1?!1:!0},r.prototype.IsOver=function(){return this._activeItem!==-1},r.prototype.Init=function(e){var t=Number.MAX_VALUE,n=Number.MIN_VALUE;for(var r=0;r<e.length;r++)t=Math.min(t,e[r].length),n=Math.max(n,e[r].length);this.EnumField(t,n,e,e.length,-1)},r.prototype.EnumField=function(e,t,n,r,i){this._minLength=e,this._maxLength=t;if(!n)return!1;this._itemCount=r,this._activeItem=i,this._lastActiveItem=i,this._undoItem=i,this.InitialItems(n),i!==-1?this._trueLength=n[i].toString().GetLength():this._trueLength=0,this.text=this.GetText()},r.prototype.InitialItems=function(e){this._items=new Array(e.length);for(var t=0;t<e.length;t++){var n=e[t];while(n.IndexOf("@#GCD#@")!==-1)n=n.replace("@#GCD#@","'");while(n.IndexOf("@#GCM#@")!==-1)n=n.replace("@#GCM#@",'"');n&&(n=n.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this._items[t]=n}},r.prototype.InitialText=function(e){while(e.IndexOf("@#GCD#@")!==-1)e=e.replace("@#GCD#@","'");while(e.IndexOf("@#GCM#@")!==-1)e=e.replace("@#GCM#@",'"');e&&(e=e.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this.text=e,this.oldText=e,this.undoText=e,this.undoTempText=e},r.prototype.Insert=function(e,t,n){var r={};r.offset=e,r.text=t,r.existInvalid=!1,r.exception=!1;var i=e,s="";this._activeItem===-1&&(i=0),i!==0&&(s=this._items[this._activeItem].toString().Substring(0,i));var o=new Array(this._itemCount),u=new Array(this._itemCount),a=new Array(this._itemCount),f=new Array(this._itemCount);for(var l=0;l<this._itemCount;l++)o[l]=i,u[l]=0,a[l]=99999,f[l]=new Array;for(var l=0;l<this._itemCount;l++){var c=this._items[l].toString();if(s.GetLength()>0&&c.Substring(0,s.GetLength())!==s)continue;while(u[l]<t.GetLength()){if(o[l]>=c.length)break;var h=this.JudgeIfValid(c,o[l],t,u[l]);o[l]=h.index1,u[l]=h.index2,h.isValid?a[l]===99999&&(a[l]=u[l]):u[l]++}}var p=0,d=0,v=!1,m=o[p];for(var g=0;g<this._itemCount;g++){var c=this._items[g].toString();if(o[g]===t.GetLength()+i&&t.GetLength()===c.length){p=g,m=o[p],v=!0;break}if(a[g]===99999)continue;if(a[p]>=a[g])if(a[p]===a[g]){var y=o[g];m<y?(p=g,m=y,d=1):m===y&&d++}else p=g,m=o[p],d=1}var b;if(v)return u[p]===0?(b=!0,r.existInvalid=!0,r):(t=t.Substring(u[p]+1,t.GetLength()),e=this._items[p].toString().GetLength(),b=f[p].Count===0?!1:!0,this._activeItem=p,this.text=this._items[p].toString(),this._trueLength=this._items[p].toString().GetLength(),r.offset=e,r.text=t,r.existInvalid=b,r);if(m===i)return n===!1&&this._activeItem!==-1&&e===this._items[this._activeItem].toString().GetLength()?(t=t.Substring(u[p],t.GetLength()),b=!1,r.offset=e,r.text=t,r):(b=!0,r.exception=!0,r.existInvalid=!0,r);var w=-1;for(var l=0;l<f[p].Count;l++)w=0;return d===1?e=this._items[p].toString().GetLength():e=m,w===-1?(t=t.Substring(u[p],t.GetLength()),b=!1):(t=t.Substring(u[p],t.GetLength()),b=!0),this._activeItem=p,this.text=this._items[p].toString(),this._trueLength=this._items[p].toString().GetLength(),r.offset=e,r.text=t,r},r.prototype.Replace=function(e,t,n,r){return this.Insert(e,n,r)},r.prototype.Delete=function(e,t){if(t===0||e>=this.text.GetLength())return e;e=0,this._activeItem=-1,this.text="";if(this._minLength>0)for(var n=0;n<this._minLength;n++)this.text+=this.GetPromptChar();return this._trueLength=0,e},r.prototype.SaveOldState=function(){this._lastActiveItem=this._activeItem,this.oldText=this.text},r.prototype.RollBack=function(){if(this.oldText===this.text)return;var e=this._lastActiveItem;this._activeItem=e;if(e>=0&&e<this._itemCount)this.text=this._items[e].toString();else{this.text="";for(var t=0;t<this._minLength;t++)this.text+=this.GetPromptChar()}var n=0;for(var t=this.text.GetLength();t>0;t--){if(this.text.Substring(t-1,t)!==this.GetPromptChar())break;n++}this._trueLength=this.text.GetLength()-n},r.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoItem=this._activeItem},r.prototype.Undo=function(){if(this.undoTempText===this.text)return;this.undoTempText=this.text;var e=this._activeItem;this._activeItem=this._undoItem,this._undoItem=e;if(this._activeItem>=0&&this._activeItem<this._itemCount)this.text=this._items[this._activeItem].toString();else{this.text="";for(var t=0;t<this._minLength;t++)this.text+=this.GetPromptChar()}var n=0;for(var t=this.text.GetLength();t>0;t--){if(this.text.Substring(t-1,t)!==this.GetPromptChar())break;n++}this._trueLength=this.text.GetLength()-n},r.prototype.SetTextInternal=function(e,t,n,r){var i,s=new Array(this._itemCount),o=new Array(this._itemCount),u=new Array(this._itemCount);for(i=0;i<this._itemCount;i++)s[i]=0,o[i]=0,u[i]=!1;for(i=0;i<this._itemCount;i++){var a=this._items[i].toString();while(s[i]<e.GetLength()){var f=this.JudgeIfValid(a,o[i],e,s[i]);o[i]=f.index1,s[i]=f.index2;if(!f.isValid&&n===!0){u[i]=!0;break}if(!f.isValid&&a.GetLength()===s[i])break;if(!f.isValid&&a.GetLength()>s[i]){u[i]=!0;break}if(o[i].toString().GetLength()===a.GetLength()&&s[i].toString().GetLength()<e.GetLength()&&n===!0){u[i]=!0;break}if(s[i].toString().GetLength()===e.GetLength()&&o[i].toString().GetLength()<a.GetLength()){u[i]=!0;break}}}var l=this._itemCount;for(i=0;i<this._itemCount;i++)if(u[i]===!1){l===this._itemCount&&(l=i);var a=this._items[i].toString();if(a.GetLength()===this._maxLength&&e.GetLength()>=this._maxLength){l=i;break}}var c=l,h={};h.existInvalid=!1,h.exception=!1;if(c>=this._itemCount){var p="";h.exception=!0;for(i=0;i<this._minLength;i++)p+=this.GetPromptChar();return e.Substring(0,this._minLength)===p?(e=e.Substring(this._minLength,e.GetLength()),h.offset=this._minLength,h.text=e,h.existInvalid=!1,h.exception=!0,this.Clear(),h):(h.text=e,this.text=p,this._activeItem=-1,h.existInvalid=!0,h.exception=!0,h)}return this._activeItem=c,this.text=this._items[c].toString(),this._trueLength=this._items[c].toString().GetLength(),h.offset=this._trueLength,h.text=e.Substring(this._trueLength,e.GetLength()),h},r.prototype.PerformSpin=function(e,t,n){var r=this._itemCount;if(r<t)if(r>1)while(r<t)t-=r;else t=1;else if(r<-t)if(r>1)while(r<-t)t+=r;else t=-1;if(t===0)return e;var i;if(this._activeItem===-1)i=t>0?0:r-1;else{i=this._activeItem+t;if(i<0||i>=r)n?(i=t>0?i-r:i+r,t>0&&i<this._activeItem?this._activeItem<r-1?i=r-1:i=0:t<0&&i>this._activeItem&&(this._activeItem>0?i=0:i=r-1)):i=t>0?r-1:0}var s=this._items[i].toString().GetLength();return e=Math.min(e,s),this._activeItem=i,this.text=this._items[i].toString(),this._trueLength=this._activeItem===-1?0:this.text.GetLength(),e},r.prototype.Clear=function(){this._activeItem=-1},r.prototype.JudgeIfValid=function(e,n,r,i){var s=t.CharProcess.CharEx,o={};o.index1=n,o.index2=i,o.isValid=!1;if(n>=e.GetLength())return o;if(e.Substring(n,n+1)===r.Substring(i,i+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;if(this._owner.GetAutoConvert()===!1)return o;if(r.Substring(i,i+1).charCodeAt(0)>=65345&&r.Substring(i,i+1).charCodeAt(0)<=65370){var u=String.fromCharCode(r.Substring(i,i+1).charCodeAt(0)-32);if(u===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var a=s.ToHalfWidth(r.Substring(i,i+1));if(a===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var f=s.ToHalfWidth(u);return f===e.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(r.Substring(i,i+1).charCodeAt(0)>=65313&&r.Substring(i,i+1).charCodeAt(0)<=65338){var l=String.fromCharCode(r.Substring(i,i+1).charCodeAt(0)-32);if(l===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var f=s.ToHalfWidth(r.Substring(i,i+1));if(f===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var a=s.ToHalfWidth(l);return a===e.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsUpper(r.Substring(i,i+1))){var a=r.Substring(i,i+1).toLowerCase();if(a===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var u=s.ToFullWidth(r.Substring(i,i+1)).text;if(u===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var l=s.ToFullWidth(a).text;return l===e.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsLower(r.Substring(i,i+1))){var f=r.Substring(i,i+1).toUpperCase();if(f===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var l=s.ToFullWidth(r.Substring(i,i+1)).text;if(l===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var u=s.ToFullWidth(l).text;return u===e.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsHiragana(r.Substring(i,i+1))){var c=s.ToKatakana(r.Substring(i,i+1));if(c===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var h=s.ToKatakana(c),p=s.ToHalfWidthEx(h);return p.length===1&&p===e.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):p.length===2&&p.Substring(0,1)===e.Substring(n,n+1)&&n+1<e.GetLength()&&p.Substring(1,2)===e.Substring(n+1,n+2)?(n+=2,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsKatakana(r.Substring(i,i+1))&&s.IsFullWidth(r.Substring(i,i+1))){var h=s.ToKatakana(r.Substring(i,i+1)),p=s.ToHalfWidthEx(h);if(p.length===1&&p===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;if(p.length===2&&p.Substring(0,1)===e.Substring(n,n+1)&&n+1<e.GetLength()&&p.Substring(1,2)===e.Substring(n+1,n+2))return n+=2,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(r.Substring(i,i+1));return d==="\u3094"?o:d===e.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsKatakana(r.Substring(i,i+1))&&!s.IsFullWidth(r.Substring(i,i+1))){var v;i+1<r.GetLength()&&s.IsKatakana(r.Substring(i+1,i+2))&&!s.IsFullWidth(r.Substring(i+1,i+2))?v=r.Substring(i+1,i+2):v=" ";if(v===" "){var c=s.ToFullWidth(r.Substring(i,i+1)).text;if(c===e.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(c);return d==="\u3094"?o:d===e.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}var m=s.ToFullWidth(r.Substring(i,i+2)),c=m.text,g=m.processedAll;if(c===e.Substring(n,n+1))return n++,g?i+=2:i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(c);return d==="\u3094"?g?"\u3046\u309b"===e.Substring(n,n+2)?(n+=2,i+=2,o.index1=n,o.index2=i,o.isValid=!0,o):o:o:d===e.Substring(n,n+1)?(n++,g?i+=2:i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsFullWidth(r.Substring(i,i+1))){var y=s.ToHalfWidth(r.Substring(i,i+1));return y===e.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}var b=s.ToFullWidth(r.Substring(i,i+1)).text;return b===e.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o},r}(w),T=function(){function e(e){this.fieldArray=[],this.fieldCount=0,this.fieldCount=e}return e.prototype.GetLength=function(){var e=0;for(var t=0;t<this.fieldCount;t++){var n=this.GetFieldByIndex(t);e+=n.GetLength()}return e},e.prototype.Add=function(e){e&&this.fieldArray.push(e)},e.prototype.AddRange=function(e){if(!e||e.length===0||this.fieldCount!==e.length)return;var t=new Array;for(var n=0;n<e.length;n++)t[n]=e[n];this.fieldArray=t},e.prototype.GetFieldByIndex=function(e){return this.fieldArray[e]},e.prototype.GetText=function(){var e="";for(var t=0;t<this.fieldCount;t++)e+=this.GetFieldByIndex(t).GetText();return e},e.prototype.GetFillingString=function(e){var t="";for(var n=0;n<this.fieldCount;n++){var r=this.fieldArray[n];if(r.fieldLabel==="PromptField")t+=r.GetText();else for(var i=0;i<r._minLength;i++)t+=e}return t},e.prototype.SetText=function(e,t){},e.prototype.Insert=function(e,t,n){},e.prototype.Replace=function(e,t,n,r){},e.prototype.Delete=function(e,t){},e.prototype.PerformSpin=function(e,t,n){},e.prototype.GetFieldIndex=function(e,t){var n={},r=0;for(var i=0;i<this.fieldCount;i++){var s=this.fieldArray[i],o=s.GetLength();if(e===r&&o===0||e>=r&&e<r+o)return n.index=i,n.offset=e-r,n;r+=o}if(e>=r){var s=this.fieldArray[this.fieldCount-1];return n.index=this.fieldCount-1,n.offset=s.GetLength(),n}},e.prototype.GetFieldRange=function(e){var t={};t.start=0,t.length=0;var n=0;for(var r=0;r<e;r++){var i=this.GetFieldByIndex(r);n+=i.GetLength()}var s=this.GetFieldByIndex(e);return s?(t.start=n,t.length=s.GetLength(),t):t},e}();t.FieldCollection=T;var N=function(){function e(){this.KeyActionList=null,this.Text="",this.Value=null,this.DroppedDown=!1,this.SelectionLength=0,this.SelectionStart=0,this.SelectionEnd=0,this.IsMouseDown=!1,this.OldSelectionStart=0,this.OldSelectionEnd=0,this._acceptCrlf=0,this._clipContent=0,this._editMode=0,this.__editModeInternal=0,this._useClipboard=!0,this._readOnly=!1,this._autoPostBack=!1,this._highlightText=0,this._exitOnLeftRightKey=0,this.FocusType=0,this.IsInUpdatePanelAndAsyncPostBack=!1,this.NeedResetFocus=!1,this.NeedReCalCursorPos=!0,this.SpinBtnPressed=!1,this.DropDownBtnPressed=!1,this.OldValue="",this.ValueBeforeUndo="",this.FocusExit=!1,this.Delay=0,this.SpinOnKeys=!0,this.Wrap=!0,this.SpinEnabled=!0,this.Increment=1,this.Visible=!1,this.MouseButton=-1,this.TouchDropDownScale=1,this.UIUpdate=new t.InputUIUpdate(this),this.Format={Fields:null}}return e.prototype.Snap=function(){var e={Text:this.Text,Value:this.Value,SelectionStart:this.SelectionStart,SelectionEnd:this.SelectionEnd};return e},e.prototype.Revert=function(e){this.Text=e.Text,this.Value=e.Value,this.SelectionStart=e.SelectionStart,this.SelectionEnd=e.SelectionEnd},e.prototype.ReLoadData=function(){},e.prototype.GetOverwrite=function(){return this.GetEditMode()===2||this.GetEditMode()===3?this.GetEditMode()===3:this._getEditModeInternal()!==0&&this._getEditModeInternal()!==2},e.prototype.GetImeMode=function(){return this.InputElement.style.imeMode||"auto"},e.prototype.SetImeMode=function(e){this.GetInputElement().style.imeMode=e},e.prototype.GetEnabled=function(){return this.GetInputElement().disabled},e.prototype.SetEnabled=function(e){e?n(this.GetInputElement()).removeAttr("diabled"):n(this.GetInputElement()).attr("diabled","true")},e.prototype.SetFocus=function(){n(this.GetInputElement()).focus()},e.prototype.GetDroppedDown=function(){return this.DroppedDown},e.prototype.GetSelectionStart=function(){return Math.min(this.SelectionStart,this.SelectionEnd)},e.prototype.SetSelectionStart=function(e){e=t.Utility.CheckInt(e,0,Math.pow(2,31)),e=Math.min(e,this.Text.GetLength()),this.SetInnerSelectionStart(e),this.SetInnerSelectionEnd(e+this.SelectionLength),this.NeedReCalCursorPos=!0},e.prototype.GetSelectionLength=function(){return Math.abs(this.SelectionEnd-this.SelectionStart)},e.prototype.SetSelectionLength=function(e){e=t.Utility.CheckInt(e,0,Math.pow(2,31)),this.SelectionStart+e>this.Text.GetLength()&&(e=this.Text.GetLength()-this.SelectionStart),this.SelectionLength=e,this.SetInnerSelectionEnd(this.SelectionStart+e),this.NeedReCalCursorPos=!0},e.prototype.SetInnerSelectionStart=function(e){this.SelectionStart=e},e.prototype.SetInnerSelectionEnd=function(e){this.SelectionEnd=e},e.prototype.SetDroppedDown=function(e){if(!this.Enabled)return;this.DroppedDown=e},e.prototype.DoSpinUp=function(e,t){t==null&&(t=this.Increment),this.DoSpin("up",this.SelectionEnd,t)},e.prototype.DoSpinDown=function(e,t){t==null&&(t=this.Increment),this.DoSpin("down",this.SelectionEnd,t)},e.prototype.DoSpin=function(e,t,n){e==="down"&&(n*=-1);if(typeof t=="number"&&isNaN(t)||typeof n=="number"&&isNaN(n))return;var r=this.UIProcess.PerformSpin(t,n,this.Wrap);if(!r)return;typeof r.SelectionStart=="number"&&!isNaN(r.SelectionStart)&&(this.SelectionStart=r.SelectionStart),typeof r.SelectionEnd=="number"&&!isNaN(r.SelectionEnd)&&(this.SelectionEnd=r.SelectionEnd);if(r.Text!=null&&!this.UpdateText(r))return;this.UpdateDisplayText(this.Text),e==="up"?this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):e==="down"&&this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")},e.prototype.GetExitOnLeftRightKey=function(){return this._exitOnLeftRightKey},e.prototype.SetExitOnLeftRightKey=function(e){this._exitOnLeftRightKey=e},e.prototype.GetAcceptsCrlf=function(){return this._acceptCrlf},e.prototype.SetAcceptsCrlf=function(e){this._acceptCrlf=e},e.prototype.SetInnerFocus=function(){this.FocusType=3,this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype.UpdateDisplayText=function(e){this.UIUpdate.SetText(e),this.SetHideValue()},e.prototype.SetHideText=function(e){},e.prototype.SetSelection=function(e,n,r){if(e==null||n==null||isNaN(e)||isNaN(n))return;if(r&&t.CoreUtility.IsIE10OrLater()){var i=this;setTimeout(function(){t.Utility.SetSelection(i.InputElement,e,n)},0)}else t.Utility.SetSelection(this.InputElement,e,n);this.SelectionStart=e,this.SelectionEnd=n,e===n&&(this.UIProcess.isMulSelected=!1)},e.prototype._getAutoPostBack=function(){return this._autoPostBack},e.prototype._setAutoPostBack=function(e){e=t.Utility.CheckBool(e),this._autoPostBack=e},e.prototype.GetUseClipboard=function(){return this._useClipboard},e.prototype.SetUseClipboard=function(e){this._useClipboard=e},e.prototype.GetClipContent=function(){return this._clipContent},e.prototype.SetClipContent=function(e){this._clipContent=e},e.prototype.GetTextHAlign=function(){return this.UIUpdate.GetTextHAlign()},e.prototype.SetTextHAlign=function(e){this.UIUpdate.SetTextHAlign(e)},e.prototype.GetEditMode=function(){return this._editMode},e.prototype.SetEditMode=function(e){if(e!==this._editMode){var t=!1;this._isinsertGroup(e)&&this._isOverwriteGroup(this._editMode)?t=!0:this._isinsertGroup(this._editMode)&&this._isOverwriteGroup(e)&&(t=!0),this._editMode=e,this.__editModeInternal=e,t&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},e.prototype._getEditModeInternal=function(){return this.__editModeInternal},e.prototype._setEditModeInternal=function(e){if(e!==this.__editModeInternal){var t=!1;this._isinsertGroup(e)&&this._isOverwriteGroup(this.__editModeInternal)?t=!0:this._isinsertGroup(this.__editModeInternal)&&this._isOverwriteGroup(e)&&(t=!0),this.__editModeInternal=e,t&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},e.prototype._isinsertGroup=function(e){return e===0||e===2},e.prototype._isOverwriteGroup=function(e){return e===1||e===3},e.prototype.GetHighlightText=function(){return this._highlightText},e.prototype.SetHighlightText=function(e){this._highlightText=e},e.prototype.GetReadOnly=function(){return this._readOnly},e.prototype.SetReadOnly=function(e){this._readOnly=e},e.prototype.GetTextboxValue=function(){return this.UIUpdate.GetText()},e.prototype.GetOldValue=function(){return this.OldValue},e.prototype.CanUndo=function(){return this.GetValue()===this.GetOldValue()?!1:!0},e.prototype.GetValue=function(){return""},e.prototype.DragStart=function(){this.DragStartElementID=this.ID},e.prototype.DragEnd=function(e){return this.DragStartElementID="",t.Utility.PreventDefault(e),!1},e.prototype.MouseOut=function(){if(this.IsMouseDown!==!0)return;if(this.MouseUpPointerType!==undefined&&this.MouseUpPointerType!==4&&this.MouseUpPointerType!=="mouse")return;var e=Math.min(this.OldSelectionStart,this.OldSelectionEnd),n=Math.max(this.OldSelectionStart,this.OldSelectionEnd),r=this.GetText().Substring(e,n);r!==""&&(this.SetSelection(this.OldSelectionStart,this.OldSelectionEnd),t.Utility.DragDrop(this.InputElement)),this.IsMouseDown=!1},e.prototype.GetText=function(){return""},e.prototype.Focus=function(e){e.SelectionStart=this.SelectionStart;var n=this.UIProcess.Focus(e);t.Utility.CurrentActiveControlId=this.ID;if(!n)return;return n.Text!=null&&(this.Text=n.Text),n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd),this.GetReadOnly()&&this.FocusType===0&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),n},e.prototype.LoseFocus=function(e){this.FireKeyExit();if((this.SpinBtnPressed||this.DropDownBtnPressed||this.DropDownObj&&this.DropDownObj.IsMouseOver)&&this.FocusType!==4)return;return this.DroppedDown&&(this.DropDownBtnPressed=!1,this.CloseDropDown()),this.SetLastClientValues(),this.UIProcess.LoseFocus(e)},e.prototype.FireKeyExit=function(){},e.prototype.SetLastClientValues=function(){},e.prototype.MouseDown=function(e){var n=t.Utility.GetMouseButton(e);this.MouseButton=n,this.FocusType=1,this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd,this.IsMouseDown=!0,this.MouseDownX=e.x,this.MouseButton===0&&(t.CoreUtility.IsIE()||t.CoreUtility.firefox)&&t.Utility.ClearSelection(this.GetInputElement()),this.DroppedDown&&this.CloseDropDown();if(this.IsNullFormat())return;var r=this.UIProcess.MouseDown(n);if(!r)return;r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd))},e.prototype.GetInputElement=function(){return this.InputElement},e.prototype.MouseUp=function(e){this.IsMouseDown=!1,this.MouseUpX=e.x,this.IsNullFormat();var n=this.UIProcess.MouseUp(this.InputElement,this.SelectionStart,this.SelectionEnd,this.MouseButton);if(!n)return;n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd);if(t.Utility.GetMouseButton(e)===0&&this.MouseDownX!=null&&this.MouseDownX>this.MouseUpX){var r=this.SelectionStart;this.SelectionStart=this.SelectionEnd,this.SelectionEnd=r}this.MouseDownX=null,this.MouseButton=-1},e.prototype.MouseWheel=function(e){if(this.ImeMode===!0)return!1;if(this.GetSpinEnabled()){var n=t.Utility.GetMouseWheelValue(0,e);return n>0?this.PerformSpin("up"):n<0&&this.PerformSpin("down"),t.Utility.PreventDefault(e),!1}},e.prototype.PreProcessContextMenu=function(e){return!1},e.prototype.ProcessReservedKey=function(e){switch(e){case 131138:case 131140:case 131141:case 131144:case 131145:case 131148:case 131150:case 131154:case 131159:case 131188:case 262181:case 262183:case 112:case 114:case 115:case 116:case 117:case 121:case 122:case 123:case 65657:case 131081:case 196617:case 131179:case 131181:case 131120:case 131259:case 131261:case 131146:case 196680:case 196681:case 196682:case 131153:case 131156:case 196689:case 262157:return!0}return!1},e.prototype.IsNullFormat=function(){return!1},e.prototype.SetHideValue=function(){var e="";this.GetValue()!=null&&(e=this.GetValue().toString()),this.SetHideText(e)},e.prototype.KeyDown=function(e){var n={},r=e.FuncKeysPressed,i=e.KeyCode;if(this.PreProcessContextMenu(i))return n.System=!1,n;if(i===229)return n.System=!0,n;r.Shift&&(i|=65536),r.Ctrl&&(i|=131072);if(r.Alt){if(this.AccessKey!=null&&this.AccessKey.toLowerCase()===String.fromCharCode(i).toLowerCase())return this.SelectionStart=0,this.SelectionEnd=this.Text.GetLength(),n.System=!0,n;i|=262144}if(this.ProcessReservedKey(i))return n.System=!0,n;var s=i|524288;if(i!==s){var o=this.UIProcess.GetKeyActionName(s,this.Shortcuts);if(o!=null){var u=!0,a=!1;if(u)return n.System=!1,n}}var f=this.UIProcess.GetKeyActionName(i,this.Shortcuts);switch(f){case"DropDown":return this.GetDropDownEnabled()&&(this.PerformDropDown(),n.System=!1),n;case"SpinUp":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("up"),n.System=!1),n;case"SpinDown":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("down"),n.System=!1),n}var l=!1;if(this.KeyActionList)for(var c=0;c<this.KeyActionList.length;c++)if(this.KeyActionList[c]===i.toString()){l=!0;break}if(this.DroppedDown&&this.DropDownObj&&i!=262182&&i!=262184&&i!=27&&i!=118&&i!=9&&i!=65545){f!=null&&this.DropDownObj.IsShortcut(i)&&(f=null);if(!f){if(i===93)return this.CloseDropDown(),!0;n.System=!1;if(!l){var h={keyCode:0,shiftKey:!1,ctrlKey:!1,altKey:!1};return h.keyCode=e.KeyCode,h.shiftKey=r.Shift,h.ctrlKey=r.Ctrl,h.altKey=r.Alt,this.DropDownObj.KeyDown(h),n}}}e.KeyAction=f,e.KeyCode=i;var p=this.UIProcess.KeyDown(e);if(!p){switch(i){case 27:return this.DroppedDown&&(this.CloseDropDown(),this.SetInnerFocus()),n.System=!1,n;case 262182:case 262184:return l||(this.PerformDropDown(),n.System=!0),n;case 262152:return n.KeyCode=10,n;case 38:return l||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("up"),n.System=!1),n;case 40:return l||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("down"),n.System=!1),n;case 13:return n.System=!0,n}if(this.IsNullFormat()||i===20||r&&(r.Ctrl||r.Alt)||i===91||i===144||i===145||i===93||i===92)return n.System=!0,n;if(r&&r.Shift&&i===65552)return n.System=!0,n;if(this.Type==="Number")return n.System=!0,n;if(i===120||i===123||i===113||i===118||i===119)return n;var d=this.UIProcess.FireEvent(this,this.InvalidInputEvent,null,"InvalidInput");return d!=null&&(this.FocusType=d),n}p.Overwrite!=null&&this.GetOverwrite()!==p.Overwrite&&(this._getEditModeInternal()===0?this._setEditModeInternal(1):this._getEditModeInternal()===1&&this._setEditModeInternal(0));if(p.Text!=null&&!this.UpdateText(p))return n.System=!1,n;var v=this.GetSelectionLength();p.SelectionStart!=null&&(this.SelectionStart=p.SelectionStart),p.SelectionEnd!=null&&(this.SelectionEnd=p.SelectionEnd);var m=this.GetSelectionLength();p.System||(p.FocusExit?(this.SetHideValue(),p.System=!1):(this.UpdateDisplayText(this.Text),v===0&&m!==0?t.Utility.ShouldFireOnSelectStart=!0:t.Utility.ShouldFireOnSelectStart=!1,this.SetSelection(this.SelectionStart,this.SelectionEnd),t.Utility.ShouldFireOnSelectStart=!1,p.HasSetSelection=!0));if(p.EventInfo)if(p.EventInfo.Type==="KeyExit")this.EventInfo=p.EventInfo;else{var d=this.UIProcess.FireEvent(this,p.EventInfo.Name,p.EventInfo.Args,p.EventInfo.Type);d!=null&&(this.FocusType=d)}return p.FocusType!=null&&(this.FocusType=p.FocusType),n=p,n.KeyAction=f,n},e.prototype.GetImeInputText=function(e){var t=this.GetTextboxValue();if(t===this.Text)return"";var n;if(this.Text!==""){var r=Math.min(this.SelectionStart,this.SelectionEnd),i=Math.max(this.SelectionStart,this.SelectionEnd);if(i<this.Text.GetLength()){var s=this.Text.Substring(i,this.GetText().GetLength()),o=t.IndexOf(s);o!==-1?n=t.Substring(r,t.GetLength()-s.GetLength()):n=""}else n=t.Substring(r,t.GetLength())}else n=t;e==="ReInput"&&(n=n.Substring(0,n.GetLength()));if(e==="Record")return n;if(e==="LoseFocusInput"&&n==="")return"";this.ImeMode=!1,this.ImeSelect=!1;if(e==="ReInput"||e==="ClickInput")this.FocusType=8,this.InputElement.blur(),this.InputElement.focus();return n},e.prototype.KeyUp=function(e){},e.prototype.GetVisible=function(){return!0},e.prototype.PerformDropDown=function(){if(!this.Enabled||!this.GetDropDownEnabled())return;if(!this.GetVisible())return;if(!this.DroppedDown){if(this.DropDownObj&&this.DropDownObj.GetDropDownContainer!==undefined){var e=this.DropDownObj.GetDropDownContainer();t.Utility.IsTouchMouseDown?t.Utility.SetZoomStyle(e,this.TouchDropDownScale,this.DropDownObj.GetAlign()):t.Utility.SetZoomStyle(e,"")}this.ShowDropDown()}else this.CloseDropDown()},e.prototype.DropDownBtnMouseDown=function(e){this.DropDownBtnPressed=!0;if(e!==0&&e!=null)return;this.PerformDropDown(),this.SetInnerFocus(),this.DroppedDown&&this.ResetLocation()},e.prototype.DropDownBtnMouseUp=function(){this.DropDownBtnPressed=!1,this.SetInnerFocus()},e.prototype.ResetLocation=function(){},e.prototype.DropDownBtnMouseOut=function(){this.DropDownBtnPressed&&(this.SetInnerFocus(),this.DropDownBtnPressed=!1)},e.prototype.ShowDropDown=function(e){e!=null&&this.UIUpdate.WriteCssStyle(e)},e.prototype.CloseDropDown=function(){this.DroppedDown=!1,this.DropDownObj.Close(),this.UIUpdate.ClearCssStyle();var e=this.UIProcess.FireEvent(this,this.DropDownCloseEvent,null,"DropDownClose");e!=null&&(this.FocusType=e)},e.prototype.PerformSpin=function(e){var t=this.Increment;if(this.IsNullFormat())this.SetSelection(this.SelectionStart,this.SelectionEnd);else if(!this.GetReadOnly()){e==="down"&&(t*=-1);var n=this.UIProcess.PerformSpin(this.SelectionEnd,t,this.Wrap);if(!n)return;if(n.Text!=null&&!this.UpdateText(n))return;n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart,this.SelectionEnd=n.SelectionStart),this.UpdateDisplayText(this.Text),this.SetInnerFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)}var r=3;e==="up"?r=this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):e==="down"&&(r=this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")),r!=null&&(this.FocusType=r)},e.prototype.SpinBtnMouseDown=function(e,n){this.SpinBtnPressed=!0;if(this.DroppedDown){this.CloseDropDown(),this.SetInnerFocus();return}if(e!=0&&e!=null)return;var r=n===!0?"up":"down";this.PerformSpin(r),this.SetInnerFocus();if(t.Utility.SpinTimer==null){var i=this;t.Utility.SpinTimer=setInterval(function(){i.PerformSpin(r)},this._getRealSpinDelay())}},e.prototype._getRealSpinDelay=function(){return this.Delay===0?150:this.Delay},e.prototype.SpinBtnMouseUp=function(){this.SpinBtnPressed&&(this.SetInnerFocus(),this.SpinBtnPressed=!1),t.Utility.SpinTimer!=null&&(clearInterval(t.Utility.SpinTimer),t.Utility.SpinTimer=null)},e.prototype.SelectStart=function(e){if(this.IsNullFormat())return!0;var t=this.UIProcess.SelectStart(this.InputElement,e,this.MouseButton);t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart);if(t.SetFalse!=null)return t.SetFalse},e.prototype.DoubleClick=function(){if(this.IsNullFormat())return!0;var e=this.UIProcess.DoubleClick(this.SelectionStart);e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd))},e.prototype.Undo=function(){if(this.GetReadOnly())return;var e=this.UIProcess.Undo();if(!e)return;if(e.Text!=null){if(!this.UpdateText(e))return;this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)}},e.prototype.Cut=function(){if(this.GetReadOnly())return;var e=this.UIProcess.Cut(this.GetClipContent(),this.SelectionStart,this.SelectionEnd);if(!e)return;if(e.Text!=null&&!this.UpdateText(e))return;e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),e.Text!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),e.Color!==null&&this.UIUpdate.SetForeColor(e.Color)},e.prototype.Copy=function(){this.UIProcess.Copy(this.GetClipContent(),this.SelectionStart,this.SelectionEnd)},e.prototype.Paste=function(e){if(this.GetReadOnly())return!1;if(this.IsNullFormat())return!1;var n=t.Utility.GetPasteData(this.GetUseClipboard());e&&(n=e);var r=this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,n);return r?r.Text!=null&&!this.UpdateText(r)?!1:(r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),r.EventInfo!=null&&this.UIProcess.FireEvent(this,r.EventInfo.Name,r.EventInfo.Args,r.EventInfo.Type),r.FocusExit!=null&&(this.FocusExit=r.FocusExit),!0):!1},e.prototype.Delete=function(){if(this.GetReadOnly())return;var e=this.UIProcess.ProcessDelete(this.SelectionStart,this.SelectionEnd);if(!e)return;if(e.Text!=null&&!this.UpdateText(e))return;e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),e.Text!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.DoDeleteExtraWork())},e.prototype.DoDeleteExtraWork=function(){},e.prototype.SelectAll=function(){var e=this.UIProcess.SelectAll();e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.FocusType=2},e.prototype.DragDrop=function(e){if(!t.CoreUtility.IsIE()&&this.GetReadOnly())return!1;if(this.DragStartElementID===this.ID)return this.DragStartElementID="",!1;var n=this.UIProcess.Paste(0,0,e);if(!n)return;if(n.Text!=null){if(!this.UpdateText(n))return;t.CoreUtility.IsIE()||this.SetInnerFocus()}n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),n.EventInfo!=null&&this.UIProcess.FireEvent(this,n.EventInfo.Name,n.EventInfo.Args,n.EventInfo.Type)},e.prototype.SetInnerText=function(e){this.SetText(e)},e.prototype.SetText=function(e){},e.prototype.GetInnerText=function(){return this.Text},e.prototype.UpdateText=function(e){return e!=null&&e.Text!=null&&(this.Text=e.Text),!0},e.prototype.RollBack=function(){},e.prototype.AddAllEventsHandler=function(){var e=this,r=this.GetInputElement();r!=null&&(n(r).bind("mousedown.wijinput",function(n){t.GlobalEventHandler.OnMouseDown(e,n)}),n(r).bind("mouseup.wijinput",function(n){t.GlobalEventHandler.OnMouseUp(e,n)}),n(r).bind("selectstart.wijinput",function(n){t.GlobalEventHandler.OnSelectStart(e,n)}),n(r).bind("keydown.wijinput",function(n){t.GlobalEventHandler.OnKeyDown(e,n)}),n(r).bind("keypress.wijinput",function(n){var r=n;t.GlobalEventHandler.OnKeyPress(e,r)}),n(r).bind("keyup.wijinput",function(n){t.GlobalEventHandler.OnKeyUp(e,n)}),n(r).bind("dblclick.wijinput",function(n){t.GlobalEventHandler.OnDblClick(e,n)}),n(r).bind("beforecopy.wijinput",function(n){t.GlobalEventHandler.OnHTML5BeforeCopy(e,n)}),n(r).bind("cut.wijinput",function(n){t.GlobalEventHandler.OnHTML5Cut(e,n)}),n(r).bind("paste.wijinput",function(n){t.GlobalEventHandler.OnHTML5Paste(e,n)}),n(r).bind("focus.wijinput",function(n){t.GlobalEventHandler.OnFocus(e,n)}),n(r).bind("blur.wijinput",function(n){t.GlobalEventHandler.OnLostFocus(e,n)}),n(r).bind("mousewheel.wijinput",function(n){t.GlobalEventHandler.OnMouseWheel(e,n)}),n(r).bind("DOMMouseScroll.wijinput",function(n){t.GlobalEventHandler.OnMouseWheel(e,n)}),n(r).bind("dragstart.wijinput",function(n){t.GlobalEventHandler.OnDragStart(e,n)}),n(r).bind("dragend.wijinput",function(n){t.GlobalEventHandler.OnDragEnd(e,n)}),n(r).bind("mouseout.wijinput",function(n){t.GlobalEventHandler.OnMouseOut(e,n)}),n(r).bind("drop.wijinput",function(n){t.GlobalEventHandler.OnDrop(e,n)}),n(r).bind("touchstart.wijinput",function(n){t.GlobalEventHandler.OnTouchStart(e,n)}),n(r).bind("touchend.wijinput",function(n){t.GlobalEventHandler.OnTouchEnd(e,n)}),n(r).bind("select.wijinput",function(n){t.GlobalEventHandler.OnSelect(e,n)}),t.CoreUtility.safari&&(n(r).bind("dragenter.wijinput",function(t){e._safariDropText=getSelection().toString()}),n(r).bind("dragleave.wijinput",function(t){e._safariDropText=null})),n(r).bind("compositionstart.wijinput",function(n){t.GlobalEventHandler.OnCompositionStart(e,n)}),n(r).bind("compositionupdate.wijinput",function(n){t.GlobalEventHandler.OnCompositionUpdate(e,n)}),n(r).bind("compositionend.wijinput",function(n){t.GlobalEventHandler.OnCompositionEnd(e,n)}),t.CoreUtility.IsPad()&&n(r).bind("input.wijinput",function(n){t.GlobalEventHandler.OnInput(e,n)}))},e.prototype.ResetData=function(e){this.SetText(e.ResetData)},e.prototype._createElementForNoSpinAndNoDropDown=function(e){return e},e.prototype._addControlEventHandler=function(){},e.prototype._reCreate=function(){},e.prototype._onSpinPropertyChanged=function(e){e=e.toLowerCase(),e==="alignment"||e==="position"?this._getRealSpinVisible()&&this._reCreate():e==="visible"?this._reCreate():e!=="enabled"&&(e==="spinupimage"||e==="spindownimage"||e==="pressedspinupimage"||e==="pressedspindownimage")},e.prototype._onDropDownPropertyChanged=function(e){e=e.toLowerCase(),e==="position"?this._getRealDropDownVisible()&&this._reCreate():e==="visible"?this._reCreate():e!=="enabled"&&(e==="buttonimage"||e==="pressedbuttonimage")},e.prototype._isSupportClipBoard=function(){return this.GetUseClipboard()?t.CoreUtility.IsIE()?!0:!1:!0},e.prototype._onpropertyChanged=function(){},e.prototype.GetSpinDelay=function(){return this.Delay},e.prototype.SetSpinDelay=function(e){this.Delay=e},e.prototype.GetSpinEnabled=function(){return this.SpinEnabled&&this.Enabled},e.prototype.SetSpinEnabled=function(e){this.SpinEnabled=e},e.prototype.GetSpinIncrement=function(){return this.Increment},e.prototype.SetSpinIncrement=function(e){this.Increment=e},e.prototype.GetSpinOnKeys=function(){return this.SpinOnKeys},e.prototype.SetSpinOnKeys=function(e){this.SpinOnKeys=e},e.prototype.GetSpinVisible=function(){return this.Visible},e.prototype._getRealSpinVisible=function(){return this.GetSpinVisible()},e.prototype.SetSpinVisible=function(e){this.Visible=e},e.prototype.GetSpinWrap=function(){return this.Wrap},e.prototype.SetSpinWrap=function(e){this.Wrap=e},e.prototype.GetAutoDropDown=function(){return this._dropDown.AutoDropDown},e.prototype.SetAutoDropDown=function(e){this._dropDown.SetAutoDropDown(e)},e.prototype.GetDropDownButtonImageUrl=function(){return this._dropDown.GetButtonImage()},e.prototype.SetDropDownButtonImageUrl=function(e){this._dropDown.SetButtonImage(e)},e.prototype.GetDropDownClosingAnimation=function(){return this._dropDown.ClosingAnimation},e.prototype.SetDropDownClosingAnimation=function(e){this._dropDown.SetClosingAnimation(e)},e.prototype.GetDropDownShadow=function(){return this._dropDown.DropDownShadow},e.prototype.SetDropDownShadow=function(e){this._dropDown.SetDropDownShadow(e)},e.prototype.GetDropDownEnabled=function(){return this._dropDown.GetEnabled()&&this.Enabled},e.prototype.SetDropDownEnabled=function(e){this._dropDown.SetEnabled(e)},e.prototype.GetDropDownOpeningAnimation=function(){return this._dropDown.OpeningAnimation},e.prototype.SetDropDownOpeningAnimation=function(e){this._dropDown.SetOpeningAnimation(e)},e.prototype.GetDropDownPosition=function(){return this._dropDown.Position},e.prototype.SetDropDownPosition=function(e){this._dropDown.SetPosition(e)},e.prototype.GetPressedDropDownButtonImageUrl=function(){return this._dropDown.GetPressedButtonImage()},e.prototype.SetPressedDropDownButtonImageUrl=function(e){this._dropDown.SetPressedButtonImage(e)},e.prototype.GetDropDownVisible=function(){return this._dropDown.Visible},e.prototype._getRealDropDownVisible=function(){return this.GetDropDownVisible()},e.prototype.SetDropDownVisible=function(e){this._dropDown.SetVisible(e)},e}();t.BaseInputControl=N;var C;(function(e){e[e.OctalAscII=0]="OctalAscII",e[e.HexAscII=1]="HexAscII",e[e.HexUnicode=2]="HexUnicode",e[e.DefinedCharBase=3]="DefinedCharBase",e[e.DefinedCharAddition=4]="DefinedCharAddition",e[e.CharSubset=5]="CharSubset",e[e.EnumGroup=6]="EnumGroup",e[e.Quantifier=7]="Quantifier",e[e.PromptChar=8]="PromptChar",e[e.Unknow=9]="Unknow"})(C||(C={}));var k=function(){function e(){}return e.ParseFormat=function(n,r){e.Owner=r;var v=new L(e.Owner,0,!1);if(n===null||n.length===0){var m=new S(e.Owner),g=new Array;m._bitState=g;var y=new b(e.Owner,!0),w=new s(e.Owner,!0);y.Add(w);var T=new i(e.Owner,!0);y.Add(T);var N=new h(e.Owner,!0);return y.Add(N),m.FilterField(0,2147483647,y,g),m.InitialText(""),m._trueLength=0,v.PushBack(m),v.formatIsNull=!0,v}var C=0,k="",A=8,O=5,M=e.GetKeyWord(n,C),_=M.KeyWord,D=M.KeyType,P=M.KeyLen,H;while(n.length>C){switch(D){case 9:throw"InvalidParameter";case 5:var B=e.AnalyseCharSubset(_);y=B.uf;if(!B.Result)throw"Invalid parameter";H=y,A=5;break;case 4:if(_==="\\K")H=new p(e.Owner,!0);else if(_==="\\H")H=new i(e.Owner,!0);else if(_==="\\N")H=new c(e.Owner,!0);else if(_==="\\"+e.DBCS_K)H=new d(e.Owner,!0);else if(_==="\\"+e.DBCS_J)H=new o(e.Owner,!0);else if(_==="\\"+e.DBCS_M)H=new u(e.Owner,!0);else if(_==="\\"+e.DBCS_I)H=new a(e.Owner,!0);else if(_==="\\"+e.DBCS_G)H=new f(e.Owner,!0);else if(_==="\\"+e.DBCS_N)H=new l(e.Owner,!0);else if(_==="\\"+e.DBCS_Z)H=new s(e.Owner,!0);else{if(_!=="\\"+e.DBCS_T)throw"argument null";H=new h(e.Owner,!0)}A=5;break;case 6:var j=[];if(e.AnalyseEnumGroup(_,j)){var F=new x(e.Owner);F.Init(j),v.PushBack(F),A=6,C+=P;var I=e.GetKeyWord(n,C);_=I.KeyWord,D=I.KeyType,P=I.KeyLen;continue}throw"invalid parameter";case 0:try{var q=_.Substring(1);q=parseInt(q,8);if(q===0)throw"argument exception";var R=String.fromCharCode(q);A===8?k+=R:(k=R,A=8)}catch(U){throw"invalid parameter"}break;case 1:case 2:try{var q=_.Substring(2);q=parseInt(q,16);if(q===0)throw"argument exception";var R=String.fromCharCode(q);A===8?k+=R:(k=R,A=8)}catch(U){throw"invalid parameter"}break;case 8:A===8?k+=_:(k=_,A=8);break;case 7:throw"invalid parameter";default:throw"invalid parameter"}C+=P;var z=1,W=1;if(C<n.length){M=e.GetKeyWord(n,C),_=M.KeyWord,D=M.KeyType,P=M.KeyLen;switch(D){case 9:throw"invalid parameter";case 5:case 4:case 6:O=5;break;case 7:var X=e.AnalyseQuantifier(_);W=X.Min,z=X.Max;if(!X.Result)throw"invalid parameter";C+=P,M=e.GetKeyWord(n,C),_=M.KeyWord,D=M.KeyType,P=M.KeyLen,O=7;break;case 0:case 2:case 1:case 8:O=8}if(A===8){if(O!==8){if(O===7)throw"invalid parameter";v.PushBack(new E(k))}}else{var V=new S(e.Owner);V.FilterField(W,z,H,[!1,!1,!1]),V.InitialText(t.Utility.ToString(V.GetPromptChar(),W)),V._trueLength=0,v.PushBack(V)}}else if(A===8)v.PushBack(new E(k));else{var V=new S(e.Owner);V.FilterField(1,1,H,[]),v.PushBack(V)}}for(var $=0;$<v.fieldCount;$++)if(!(v.GetFieldByIndex($)instanceof E))break;if($===v.fieldCount)throw"invalid parameter";return v},e.ParseFillExpression=function(t,n){var r={};r.Expression="",r.Result=!0;if(t==="{}")return r.Expression="{}",r.Result=!0,r;if(t!==undefined&&t!==null&&t.length>0)try{var i=t,s="\0",o=e.ParseFillingString(i);i=o.Format,s=o.FillingChar;if(s!=="\0"){if(!e.NullParse(i))throw"argument exception";n!==undefined&&n!==null&&n.fieldCount>0?r.Expression=n.GetFillingString(s):r.Expression=t}else r.Expression=i}catch(u){throw"argument exception"}else r.Expression=null;return r},e.ParseFillingString=function(t){var n={};n.Format=t,n.FillingChar="\0",n.Result=!1;if(t===undefined||t===null||t.length===0)return n.Result=!1,n;var r=t.indexOf("{"),i=t.indexOf("}");if(r===-1&&i===-1)return t=e.RemoveEscapeChar(t),n.Format=t,n.Result=!1,n;while(r>0&&t.charAt(r-1)==="\\")r=t.indexOf("{",r+1);while(i>0&&t.charAt(i-1)==="\\")i=t.indexOf("}",i+1);if(r<i){if(r===-1)return t=e.RemoveEscapeChar(t),n.Format=t,n.Result=!1,n;if(i-r===1)n.Format="";else{if(t.charAt(r+1)==="{")throw"argument exception";if(t.charAt(r+1)==="\\"){if(!(r+2<i))throw"arugment exception";r++}n.FillingChar=t.charAt(r+1)}return n.Result=!0,n}return t=e.RemoveEscapeChar(t),n.Format=t,n.Result=!1,n},e.RemoveEscapeChar=function(e){if(e.indexOf("\\")!==-1){var t="",n=e.length;for(var r=0;r<n;r++){if(e.charAt(r)==="\\"){r+1<n&&(t+=e.charAt(++r));continue}t+=e.charAt(r)}return t}return e},e.NullParse=function(t){var n=e.FindSpecialCh(t,"{",0),r=e.FindSpecialCh(t,"}",0);if(n>-1&&r>-1&&r>n){if(e.FindSpecialCh(t,"{",n+1)>-1)return!1;if(e.FindSpecialCh(t,"}",r+1)>-1)return!1}return!0},e.FindSpecialCh=function(e,t,n){var r=0,i=n-1;do{i=e.indexOf(t,i+1);if(i===0||i===-1)return i;for(var s=i-1;s>0;s--){if(e.charAt(s)!=="\\")break;r++}}while(e.charAt(i-1)==="\\"&&r%2!==0);return i},e.GetKeyWord=function(t,n){var r={};r.KeyLen=0,r.KeyType=9,r.KeyWord=null;if(n>=t.length)return r;var i=t.charAt(n);switch(i){case"\\":var s=e.GetEscapeCharLength(t.Substring(n),r.KeyType,r.KeyLen);if(s.Result)return r.KeyLen=s.KeyLen,r.KeyType=s.KeyType,r.KeyWord=t.substr(n,r.KeyLen),r;var o=t.charAt(n+1);return o==="A"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[A-Z]",r):o===e.DBCS_A?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+e.DBCS_A+"-"+e.DBCS_Z+"]",r):o==="a"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[a-z]",r):o===e.DBCS_a?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+e.DBCS_a+"-"+e.DBCS_z+"]",r):o==="D"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[0-9]",r):o===e.DBCS_D?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+e.DBCS_0+"-"+e.DBCS_9+"]",r):o==="B"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[0-1]",r):o===e.DBCS_B?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+e.DBCS_0+"-"+e.DBCS_1+"]",r):o==="X"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[0-9A-Fa-f]",r):o===e.DBCS_X?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+e.DBCS_0+"-"+e.DBCS_9+e.DBCS_A+"-"+e.DBCS_F+e.DBCS_a+"-"+e.DBCS_f+"]",r):o==="W"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[a-zA-Z_0-9]",r):o===e.DBCS_W?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+e.DBCS_a+"-"+e.DBCS_z+e.DBCS_A+"-"+e.DBCS_Z+e.DBCS__+e.DBCS_0+"-"+e.DBCS_9+"]",r):o==="K"||o===e.DBCS_K||o===e.DBCS_J||o===e.DBCS_Z||o==="H"||o===e.DBCS_T||o===e.DBCS_M||o===e.DBCS_I||o===e.DBCS_G||o===e.DBCS_N||o==="N"||o===e.DBCS_E||o===e.DBCS_V?(r.KeyLen=2,r.KeyType=4,r.KeyWord=t.substr(n,2),r):e.IsSpecialChar(o)?(r.KeyLen=2,r.KeyType=8,r.KeyWord=t.substr(n+1,1),r):(r.KeyWord="",r);case"{":var u=t.indexOf("}",n+1);return u===-1?(r.KeyWord="",r):(r.KeyType=7,r.KeyLen=u+1-n,r.KeyWord=t.substr(n,r.KeyLen),r);case"[":var u=n,a=0;do{u=t.indexOf("]",u+1);if(u===-1)return"";for(var f=u-1;f>0;f--){if(t.charAt(f)!=="\\")break;a++}}while(t.charAt(u-1)==="\\"&&a%2!==0);return r.KeyType=5,r.KeyLen=u+1-n,r.KeyWord=t.substr(n,r.KeyLen),r;case"(":var u=n;do{u=t.indexOf(")",u+1);if(u===-1)return""}while(t.charAt(u-1)==="\\");return r.KeyType=6,r.KeyLen=u+1-n,r.KeyWord=t.substr(n,r.KeyLen),r;case"*":return r.KeyLen=1,r.KeyType=7,r.KeyWord="{0,}",r;case"+":return r.KeyLen=1,r.KeyType=7,r.KeyWord="{1,}",r;case"?":return r.KeyLen=1,r.KeyType=7,r.KeyWord="{0,1}",r;default:var l=n+1;for(;l<t.length;l++)if(e.IsSpecialChar(t.charAt(l)))break;return r.KeyType=8,r.KeyLen=l-n,r.KeyWord=t.substr(n,r.KeyLen),r}},e.IsSpecialChar=function(e){return e==="\\"||e==="{"||e==="}"||e==="["||e==="]"||e==="("||e===")"||e==="."||e==="*"||e==="+"||e==="?"},e.GetEscapeCharLength=function(t,n,r){var i={};i.Result=!1,i.KeyType=n,i.Length=r;if(t.charAt(0)!=="\\")return i;var s=1,o=t.charAt(1);return o==="x"?t.length<s+3?i:(i.Length=4,i.KeyType=1,i.Result=!0,i):o==="u"?t.length<s+5?i:(i.Length=6,i.KeyType=2,i.Result=!0,i):e.IsOctalChar(o)?t.length<s+3?i:(i.Length=4,i.KeyType=0,i.Result=!0,i):i},e.IsOctalChar=function(e){return e>="0"&&e<="7"},e.AnalyseQuantifier=function(e){var t={};t.Min=-1,t.Max=-1,t.Result=!1;var n=e.indexOf(",",1);if(n===-1)try{return t.Min=parseInt(e.substr(1,e.length-2)),t.Max=t.Min,t.Result=t.Max>0,t}catch(r){return t.Result=!1,t}try{return t.Min=parseInt(e.substr(1,n-1)),n===e.length-2?t.Max=Math.pow(2,31):t.Max=parseInt(e.substr(n+1,e.length-n-2)),t.Min<0||t.Min>t.Max||t.Max===0?(t.Result=!1,t):(t.Result=!0,t)}catch(r){return t.Result=!1,t}},e.AnalyseCharSubset=function(t,n){var r={};r.uf=n,r.Result=!1;var v=[],m=1,w=!0,E="";if(t==="[]"){v.push(new s(e.Owner,!0)),v.push(new i(e.Owner,!0)),v.push(new h(e.Owner,!0));if(r.uf&&r.uf.filterArray.length>0)for(var S=0;S<n.filterArray.length;S++)v.push(n.filterArray[S]);return r.uf=new b(e.Owner,!0),r.uf.AddRange(v),r.Result=!0,r}if(t==="[^]"){v.push(new s(e.Owner,!1)),v.push(new i(e.Owner,!1)),v.push(new h(e.Owner,!1));if(r.uf&&r.uf.filterArray.length>0)for(var S=0;S<n.filterArray.length;S++)v.push(n.filterArray[S]);return r.uf=new b(e.Owner,!0),r.uf.AddRange(v),r.uf.filterArray[0]._include=!1,r.uf.filterArray[1]._include=!1,r.uf.filterArray[2]._include=!1,r.Result=!0,r}t.charAt(m)==="^"&&(w=!1,m++);while(m<t.length-1){var x=t.charAt(m),T=1,N=0;switch(x){case"-":return r.Result=!1,r;case"^":if(w===!1)throw"invalid fromat";if(E.length>0){var C=new g(E,"");C._include=w,v.push(C)}if(v.length>0){r.uf=new b(e.Owner,!0),r.uf.AddRange(v);for(var S=0;S<r.uf.filterArray.length;S++)if(!r.uf.filterArray[S]._include)return r.Result=!1,r;var k=e.AnalyseCharSubset("["+t.substr(m,t.length-m),r.uf);return r.uf=k.uf,r.Result=k.Result,r}return r.Result=!1,r;case"\\":var L=e.GetEscapeCharLength(t.substr(m),T,N);T=L.KeyType,N=L.Length;if(L.Result){var A=16,O=null;T===0?(A=8,O=t.substr(m+1,N-1)):O=t.substr(m+2,N-2),t=t.substring(0,m)+t.substr(m+N);var M=String.fromCharCode(parseInt(O,A));t=t.substring(0,m)+M+t.substr(m);continue}var _=t.charAt(m+1);if(_==="A")v.push(new y("A","Z",e.Owner,!0)),m++;else if(_===e.DBCS_A)v.push(new y(e.DBCS_A,e.DBCS_Z,e.Owner,!0)),m++;else if(_==="a")v.push(new y("a","z",e.Owner,!0)),m++;else if(_===e.DBCS_a)v.push(new y(e.DBCS_a,e.DBCS_z,e.Owner,!0)),m++;else if(_==="D")v.push(new y("0","9",e.Owner,!0)),m++;else if(_===e.DBCS_D)v.push(new y(e.DBCS_0,e.DBCS_9,e.Owner,!0)),m++;else if(_==="B")v.push(new y("0","1",e.Owner,!0)),m++;else if(_===e.DBCS_B)v.push(new y(e.DBCS_0,e.DBCS_1,e.Owner,!0)),m++;else if(_==="X")v.push(new y("0","9",e.Owner,!0)),v.push(new y("A","F",e.Owner,!0)),v.push(new y("a","f",e.Owner,!0)),m++;else if(_===e.DBCS_X)v.push(new y(e.DBCS_0,e.DBCS_9,e.Owner,!0)),v.push(new y(e.DBCS_A,e.DBCS_F,e.Owner,!0)),v.push(new y(e.DBCS_a,e.DBCS_f,e.Owner,!0)),m++;else if(_==="W")v.push(new y("0","9",e.Owner,!0)),v.push(new y("A","Z",e.Owner,!0)),v.push(new y("a","z")),E+="_",m++;else if(_===e.DBCS_W)v.push(new y(e.DBCS_0,e.DBCS_9,e.Owner,!0)),v.push(new y(e.DBCS_A,e.DBCS_Z,e.Owner,!0)),v.push(new y(e.DBCS_a,e.DBCS_z,e.Owner,!0)),E+=e.DBCS__,m++;else if(_==="K")v.push(new p(e.Owner,!0)),m++;else if(_==="H")v.push(new i(e.Owner,w)),m++;else if(_===e.DBCS_K)v.push(new d(e.Owner,!0)),m++;else if(_===e.DBCS_J)v.push(new o(e.Owner,!0)),m++;else if(_===e.DBCS_M)v.push(new u(e.Owner,!0)),m++;else if(_===e.DBCS_I)v.push(new a(e.Owner,!0)),m++;else if(_==="N")v.push(new c(e.Owner,!0)),m++;else if(_===e.DBCS_N)v.push(new l(e.Owner,!0)),m++;else if(_===e.DBCS_G)v.push(new f(e.Owner,!0)),m++;else if(_===e.DBCS_Z)v.push(new s(e.Owner,!0)),m++;else if(_===e.DBCS_T)v.push(new h(e.Owner,!0)),m++;else{if(_!=="\\"&&_!=="]"&&_!=="["&&_!=="-"&&_!=="^")return!1;if(E.indexOf(_)!==-1){m++;continue}E+=_,m++}break;default:if(t.length>m+2&&t.charAt(m+1)==="-"){var D=e.GetEscapeCharLength(t.substr(m+2),T,N);T=D.KeyType,N=D.Length;if(D.Result){var O=null,A=16;T===0?(A=8,O=t.substr(m+2+1,N-1)):O=t.substr(m+2+2,N-2);var P=m+2;t=t.substring(0,P)+t.substr(P+N);var M=String.fromCharCode(parseInt(O,A));t=t.substring(0,P)+M+t.substr(P)}var H,B;t.charAt(m)>t.charAt(m+2)?(H=t.charAt(m+2),B=t.charAt(m)):(H=t.charAt(m),B=t.charAt(m+2));var j=new y(H,B,e.Owner,!0);v.push(j),m+=2;break}if(E.indexOf(x)!==-1){m++;continue}E+=x}m++}E.length>0&&v.push(new g(E,"",e.Owner,!0));var F=v.length;if(r.uf&&r.uf.filterArray.length>0)for(var S=0;S<r.uf.filterArray.length;S++)v.push(n.filterArray[S]);r.uf=new b(e.Owner,!0),r.uf.AddRange(v);for(var S=0;S<F;S++)r.uf.filterArray[S]._include=w;return r.Result=!0,r},e.AnalyseEnumGroup=function(e,n){e=e.Substring(1,1+e.length-2);var r=0,i=0;while(r<e.length){var s=t.Utility.IndexOfAny(e,["|",")","\\","("],r);if(s===-1){var o=e.Substring(i);if(o.length===0)return!1;n.push(o),r=e.length;continue}if(e.charAt(s)==="\\"){var u=e.charAt(s+1);if(u==="\\"||u===")"||u==="|"||u==="("){e=e.Substring(0,s)+e.Substring(s+1,e.length),r=s+1;if(r===e.length){var o=e.Substring(i);if(o.length===0)return!1;n.push(o)}continue}return!1}if(e.charAt(s)==="|"){var o=e.Substring(i,s);if(o.length===0)return!1;n.push(o),r=s+1,i=r;continue}return!1}return!0},e.DBCS_A=t.CharProcess.CharEx.ToFullWidth("A").text,e.DBCS_a=t.CharProcess.CharEx.ToFullWidth("a").text,e.DBCS_B=t.CharProcess.CharEx.ToFullWidth("B").text,e.DBCS_D=t.CharProcess.CharEx.ToFullWidth("D").text,e.DBCS_J=t.CharProcess.CharEx.ToFullWidth("J").text,e.DBCS_K=t.CharProcess.CharEx.ToFullWidth("K").text,e.DBCS_W=t.CharProcess.CharEx.ToFullWidth("W").text,e.DBCS_X=t.CharProcess.CharEx.ToFullWidth("X").text,e.DBCS_Z=t.CharProcess.CharEx.ToFullWidth("Z").text,e.DBCS_T=t.CharProcess.CharEx.ToFullWidth("T").text,e.DBCS_M=t.CharProcess.CharEx.ToFullWidth("M").text,e.DBCS_I=t.CharProcess.CharEx.ToFullWidth("I").text,e.DBCS_N=t.CharProcess.CharEx.ToFullWidth("N").text,e.DBCS_G=t.CharProcess.CharEx.ToFullWidth("G").text,e.DBCS_E=t.CharProcess.CharEx.ToFullWidth("E").text,e.DBCS_V=t.CharProcess.CharEx.ToFullWidth("V").text,e.DBCS_z=t.CharProcess.CharEx.ToFullWidth("z").text,e.DBCS_0=t.CharProcess.CharEx.ToFullWidth("0").text,e.DBCS_1=t.CharProcess.CharEx.ToFullWidth("1").text,e.DBCS_9=t.CharProcess.CharEx.ToFullWidth("9").text,e.DBCS_F=t.CharProcess.CharEx.ToFullWidth("F").text,e.DBCS_f=t.CharProcess.CharEx.ToFullWidth("f").text,e.DBCS__=t.CharProcess.CharEx.ToFullWidth("_").text,e}(),L=function(t){function n(e,n,r){t.call(this,n),this._focusNull="",this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this._owner=e,this.formatIsNull=r}return e(n,t),n.prototype.GetShowLiterals=function(){return this._owner.GetShowLiterals()},n.prototype.GetFieldByIndex=function(e){return this.fieldArray[e]},n.prototype.GetLength=function(){var e=this.ValueIsNull();if(e&&this._focusNull!==""&&!this.formatIsNull)return this._focusNull.GetLength();if(e===!0&&this._focusNull!=="")return 0;var t=this.GetLastVisibleFieldIndex(this.GetShowLiterals()),n=0;for(var r=0;r<=t;r++){var i=this.GetFieldByIndex(r);n+=i.GetLength()}return n},n.prototype.GetInputFieldIndexByPos=function(e){var t=null,n=0,r,i=this.GetFieldIndex(e,n);r=i.index,n=i.offset,r!==0&&n===0&&this.fieldArray[r-1].fieldLabel!=="PromptField"&&(r--,n=this.fieldArray[r].text.GetLength());var s=this.fieldArray[r];if(n===s.text.GetLength()){var o;if(n<s._maxLength){t=r;if(t!==this.fieldCount-1)for(o=r+1;o<this.fieldCount;o++)if(this.fieldArray[o].fieldLabel!=="PromptField")break}else for(o=r+1;o<this.fieldCount;o++)if(this.fieldArray[o].fieldLabel!=="PromptField"){t=o;break}}else t=r;var u={},a={};if(t){var f=!1;while(f===!1){s=this.fieldArray[t];if(s.fieldLabel==="FilterField")a.fieldMark=s._filter.filterLabel,f=!0;else if(s.fieldLabel==="EnumField")a.fieldMark="Enum",f=!0;else{if(t===this.fieldCount-1){a=null;break}t++}a.fieldIndex=t}}else a=null;return a!=null?(u.currentField=a,u):null},n.prototype.GetCurrentField=function(e){var t={},n=0,r=0;for(var i=0;i<this.fieldCount;i++){var s=this.fieldArray[i];s.fieldLabel==="PromptField"&&r++;var o=s.GetLength();n+=o;if(e<=n)return s.fieldLabel==="PromptField"?e===n-o?t.index=i-r:e===n?t.index=i-r+1:t.index=-1:t.index=i-r,t}},n.prototype.GetText=function(){var e="";for(var t=0;t<this.fieldCount;t++){var n=this.fieldArray[t];e+=n.text}return e},n.prototype.GetTextSimpleMode=function(e){var t="";for(var n=0;n<this.fieldCount;n++){var r=this.fieldArray[n];if(r.fieldLabel==="PromptField"&&!e)continue;t+=r.text}return t},n.prototype.GetExistLength=function(){var e=this.fieldCount,t,n;for(t=this.fieldCount-1;t>=0;t--){n=this.fieldArray[t];if(n.fieldLabel==="PromptField")continue;e=t;break}var r=0;for(t=0;t<=e;t++)n=this.fieldArray[t],t===e?r>=21474e3?r=n._maxLength:r+=n._maxLength:r+=n.text.GetLength();return r},n.prototype.GetNonLiteralsText=function(e,t){var n="",r=0,i,s=this.GetFieldIndex(e,r);i=s.index,r=s.offset;var o=0,u;s=this.GetFieldIndex(e+t,o),u=s.index,o=s.offset,u!==0&&o===0&&(u--,o=this.fieldArray[u].text.GetLength());for(var a=i;a<=u;a++){var f=this.fieldArray[a];f.fieldLabel!=="PromptField"&&(i===u?(n=f.text.Substring(r,o),n.GetLength()>f._trueLength&&(n=n.Substring(0,f._trueLength))):a===i?n+=f.text.Substring(r,f.text.GetLength()):a===u?n+=f.text.Substring(0,o):n+=f.text.Substring(0,f.text.GetLength()))}return n},n.prototype.GetNonPromptText=function(e,t){var n="",r=0,i,s=this.GetFieldIndex(e,r);i=s.index,r=s.offset;var o=0,u;s=this.GetFieldIndex(e+t,o),u=s.index,o=s.offset,u!==0&&o===0&&(u--,o=this.fieldArray[u].text.GetLength());for(var a=i;a<=u;a++){var f=this.fieldArray[a];f.fieldLabel!=="PromptField"&&(i===u?n=f.text.Substring(r,o):a===i?n+=f.text.Substring(r,f.text.GetLength()):a===u?n+=f.text.Substring(0,o):n+=f.text)}return n},n.prototype.ValueIsNull=function(){for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];if(t.fieldLabel==="PromptField")continue;if(t.GetFieldStatus()!==0)return!1}return!0},n.prototype.ValueIsFull=function(e){e=e?e:0;var t,n;if(e!=null&&e===1)for(t=0;t<this.fieldCount;t++){n=this.fieldArray[t];if(this.fieldCount===1&&n._minLength===0)return!0;if(n.fieldLabel==="PromptField")continue;if(!n.GetFieldIsFull())return!1}else for(t=0;t<this.fieldCount;t++){n=this.fieldArray[t];if(n.fieldLabel==="PromptField")continue;if(n.GetFieldStatus()!==2)return!1}return!0},n.prototype.GetShowText=function(e,t,n){if(!n){var r=this.ValueIsNull();if(r===!0&&this._focusNull!==""&&t=="")return this._focusNull;if(r===!0&&this._focusNull!==""&&t==null)return"";if(r===!0&&t==="LoseFocus")return this._owner._getDisplayNullExpression()!==null?this._owner._getDisplayNullExpression():this.GetText()}var i=this.GetLastVisibleFieldIndex(e);if(i<0)return"";var s="";for(var o=0;o<i;o++)s+=this.fieldArray[o].text;if(i<this.fieldCount){var u=this.fieldArray[i];u.fieldLabel==="PromptField"||e===1?s+=this.fieldArray[i].text:s+=u.text.Substring(0,u._trueLength)}return s},n.prototype.GetLastVisibleFieldIndex=function(e){var t=this.fieldCount-1;if(e!==1){var n=this.fieldCount-1,r=!0;for(t=n;t>=0;t--){var i=this.fieldArray[t];if(i.fieldLabel==="PromptField")continue;if(i._trueLength===0){r=!1;continue}if(i._trueLength>0&&i._trueLength<i._minLength)break;if(e===2){r&&(t=n);break}while(t<n&&this.fieldArray[t+1].fieldLabel==="PromptField")t++;break}}return t},n.prototype.GetValue=function(){var e=this.fieldCount-1,t;for(;e>=0;e--){t=this.fieldArray[e];if(t.fieldLabel!=="PromptField"&&t._trueLength!==0)break}if(e<0)return"";var n="";for(var r=0;r<=e;r++){t=this.fieldArray[r];if(t.fieldLabel==="PromptField")continue;var i=t._trueLength,s=t.text,o=s;if(t.fieldLabel==="FilterField"){o=o.Substring(0,i);for(var u=0;u<i;u++)t._bitState[u]===!1&&(o=o.Substring(0,u)+" "+o.Substring(u+1,o.GetLength()));var a=s.GetLength(),f=o.GetLength();if(i===0&&a!==0){if(r!==e){var l="";for(var c=0;c<a;c++)l+=" ";o=l}}else if(a>f&&r!==e){var l="";for(var c=0;c<a-f;c++)l+=" ";o+=l}}else t._activeItem===-1&&(o=" ");n+=o}return n},n.prototype.GetOldValue=function(){var e="",t;for(var n=0;n<this.fieldCount;n++){t=this.fieldArray[n];if(t.fieldLabel==="PromptField")continue;var r;if(t.fieldLabel==="FilterField"){r=t.undoText;if(t._undoBitState&&t._undoBitState.length>0){var i=!0;for(var s=t._undoBitState.length-1;s>=0;s--)t._undoBitState[s]===!1?i?r=r.Substring(0,r.GetLength()-1):r=r.Substring(0,s)+" "+r.Substring(s+1,r.GetLength()):i=!1}else r=""}else t._undoItem!==-1?r=t.undoText:r="";e+=r}return e},n.prototype.SetValue=function(e,t){if(!e)return this.ClearContent(),!0;var n=!1;return t!=null&&(n=t),this.SetFieldCollectionValue(e,n)?!0:(this.RollBack(),!1)},n.prototype.SetFieldCollectionValue=function(e,t){this.ClearContent();var n=!1;return t!=null&&(n=t),e.GetLength()!==0&&this.Insert(0,e,n,!1),!0},n.prototype.ClearContent=function(){this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState();if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.oldText=t.text,t.Delete(0,t.text.GetLength())}},n.prototype.RollBack=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.RollBack()}},n.prototype.SaveOldState=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.fieldLabel!=="PromptField"&&t.SaveOldState()}},n.prototype.SaveUndoState=function(){if(this.formatIsNull){var e=this.fieldArray[0],t=-1;if(this.oldStart===-1)e.SaveUndoState(),t=this.newStart;else{var n=e.text.substr(this.newStart,this.newLength);t=e.undoText.IndexOf(n,this.oldStart),t!==this.oldStart+this.oldLength&&(t=this.newStart,t+this.newLength!==this.oldStart&&e.SaveUndoState())}this.oldStart>0?this.oldStart=Math.min(this.oldStart,t):this.oldStart=t,this.oldLength+=this.newLength}else if(this.fieldCount>0)for(var r=0;r<this.fieldCount;r++){var e=this.fieldArray[r];e.fieldLabel!=="PromptField"&&e.SaveUndoState()}},n.prototype.Undo=function(){this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0;if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.fieldLabel!=="PromptField"&&t.Undo()}},n.prototype.PerformSpin=function(e,t,n){var r,i=this.GetFieldIndex(e,r),s=i.index;r=i.offset,this.SaveOldState();if(r>0||this.fieldArray[s].fieldLabel==="EnumField"){r=this.fieldArray[s].PerformSpin(r,t,n);var o=0;for(var u=0;u<s;u++)o+=this.fieldArray[u].text.GetLength();e=o+r}else{var a=s,f;for(;a<this.fieldCount;a++){f=this.fieldArray[a];if(f._minLength===0){if(f.text.GetLength()===0)continue;break}if(f.fieldLabel==="EnumField"){r=f.PerformSpin(r,t,n);var o=0;for(var u=0;u<s;u++)o+=this.fieldArray[u].text.GetLength();return e=o+r,e}break}if(s>0){f=this.fieldArray[s-1],r=f.text.GetLength(),r<f._minLength&&(r=f._minLength),r=f.PerformSpin(r,t,n);if(f.fieldLabel==="EnumField"){var o=0;for(var u=0;u<s-1;u++)o+=this.fieldArray[u].text.GetLength();e=o+r}}}return e},n.prototype.Delete=function(e,t){if(this.fieldCount===0)return e;var n=0;this.SaveOldState();var r=this.GetFieldIndex(e,n),i=r.index;n=r.offset,this.fieldArray[i].fieldLabel==="PromptField"&&t>this.fieldArray[i].text.GetLength()-n&&(e+=this.fieldArray[i].text.GetLength()-n,t-=this.fieldArray[i].text.GetLength()-n,i++,n=0),this.newStart=e,this.newLength=t,this.formatIsNull&&this.SaveUndoState();var s=0;r=this.GetFieldIndex(e+t,s);var o=r.index;s=r.offset;while(o!==0&&s===0){var u=this.fieldArray[o-1];if(u.fieldLabel==="PromptField")break;o--,s=this.fieldArray[o].text.GetLength()>this.fieldArray[o]._minLength?this.fieldArray[o].text.GetLength():this.fieldArray[o]._minLength}for(var a=i;a<=o;a++){var u=this.fieldArray[a],f=n;if(i===o)s>n?n=u.Delete(n,s-n):n-=n-s;else if(a===i){var l=u.text.GetLength()-n;l>0&&(n=u.Delete(n,u.text.GetLength()-n))}else a===o?n=u.Delete(n,s):n=u.Delete(n,u.text.GetLength());n!=null&&(e+=n-f),n=0}return e},n.prototype.Replace=function(e,t,n,r){var i={};i.cursorPos=e,i.text=n;var s=this.GetFieldIndex(e,o),o=0,s=0,u={};u=this.GetFieldIndex(e,o),s=u.index,o=u.offset,this.SaveOldState();var a;for(;s<this.fieldCount;s++){a=this.fieldArray[s];if(a._minLength>0||a.text.GetLength()>0)break}while(s!==0&&o===0){if(this.fieldArray[s].fieldLabel!=="PromptField")break;s--,a=this.fieldArray[s],o=a.text.GetLength(),o<a._minLength&&(o=a._minLength)}this.newStart=e,this.newLength=t;var f=0,l;u=this.GetFieldIndex(e+t,f),l=u.index,f=u.offset;var c=0;for(var h=s;h<l;h++)a=this.fieldArray[l-1],c+=a.text.GetLength();c+=f,-w;while(l!==0&&f===0){a=this.fieldArray[l-1];if(!(a.fieldLabel!=="PromptField"&&a.text.GetLength()<a._maxLength))break;l--,f=this.fieldArray[l].text.GetLength()}var p=n,d=!1,v=e-o;for(var m=s;m<=this.fieldCount-1;m++){d=!1,a=this.fieldArray[m];var g=a.text.GetLength()>a._minLength?a.text.GetLength():a._minLength;if(a.fieldLabel==="PromptField"){g=a.GetLength();if(r){var y=a.text.Substring(o,a.text.GetLength()),b=n.GetLength();n.GetLength()>=y.GetLength()?(n.Substring(0,y.GetLength())!==y&&(d=!0),n=n.Substring(y.GetLength(),n.GetLength()),e+=y.GetLength()):(n.Substring(0,y.GetLength())!==y&&(d=!0),n="",e+=n.GetLength());if(d){T;if(b===n.GetLength())break}}else v+o===e&&(e+=g-o);v+=a.text.GetLength()-o}else{var w=o,E=m===this.fieldCount-1;if(m>l){var S={},E=m===this.fieldCount-1;S=a.Insert(o,n,E),o=S.offset,n=S.text,d=S.existInvalid}else if(s===l){var x={};x=a.Replace(o,f-o,n,E),o=x.offset,n=x.text,d=x.existInvalid}else if(m===s){var x={};x=a.Replace(o,g-o,n,E),o=x.offset,n=x.text,d=x.existInvalid}else if(m===l){var x={};f-o>0?x=a.Replace(o,f-o,n,E):t>0&&(x=a.Replace(o,t,n,E)),o=x.offset,n=x.text,d=x.existInvalid}else{var x={};x=a.Replace(o,g,n),o=x.offset,n=x.text,d=x.existInvalid}var T=a.GetFieldStatus()!==2;if(T&&d)break;e+=o-w,v+=a._minLength>a.text.GetLength()?a._minLength:a.text.GetLength()}o=0;if(n===""){if(m<l){m++;var h=m,N=0;for(;m<l;m++)this.fieldArray[m].fieldLabel!=="PromptField"&&this.fieldArray[m].Delete(o,this.fieldArray[m].text.GetLength());for(var C=0;C<h;C++){var a=this.fieldArray[C],g=a.GetLength();N+=g}if(e===N&&a._trueLength===a._maxLength)for(;h<=l;h++){if(this.fieldArray[h].fieldLabel!=="PromptField"||h===this.fieldCount-1)break;e+=this.fieldArray[h].text.GetLength()}if(f===0)break;this.fieldArray[l].fieldLabel!=="PromptField"&&this.fieldArray[l].Delete(o,f)}break}}return p===n?(this.RollBack(),i.success=!1):i.success=!0,i.cursorPos=e,i.text=n,i},n.prototype.SetText=function(e,t){var n=0,r={};r.cursorPos=n,r.text=e;if(this.fieldCount===0||!e||n<0)return r;var i=0,s=0,o={};o=this.GetFieldIndex(n,i),s=o.index,i=o.offset;if(i===this.fieldArray[s]._maxLength)return r;while(s!==0&&i===0){var u=this.fieldArray[s-1];if(!(u.fieldLabel!=="PromptField"&&u.text.GetLength()<u._maxLength))break;s--,i=this.fieldArray[s]._trueLength,i<this.fieldArray[s]._minLength&&(i=this.fieldArray[s]._minLength)}var a=!1,f=s,l=n-i;for(;f<this.fieldCount;f++){a=!1;var u=this.fieldArray[f];if(u.fieldLabel==="PromptField"){if(t){var c=u.text.Substring(i,u.text.GetLength()),h=e.GetLength();e.GetLength()>=c.GetLength()?e.Substring(0,c.GetLength())!==c?a=!0:(e=e.Substring(c.GetLength(),e.GetLength()),n+=c.GetLength()):(c.Substring(0,e.GetLength())!==e&&(a=!0),e="",n+=e.GetLength());if(a){m;if(e.GetLength()===h)return r.isValid=!1,r}}else l+i===n&&(n+=u.maxLength-i);l+=u.maxLength-i}else{var p=i,d={},v=f===this.fieldCount-1;d=u.SetTextInternal(e,i,v),this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState(),i=d.offset,e=d.text,a=d.existInvalid;var m=d.exception;if(a&&m)return r.isValid=!1,r;n+=i-p,l+=u._minLength<u._trueLength?u._trueLength:u._minLength}i=0;if(e.GetLength()===0&&(a||m)){if(!t)break;if(a)return r.isValid=!1,r}}if(f>=this.fieldCount&&e!==""&&e.GetLength()>0)return r.isValid=!1,r;var g=this.GetFieldIndex(n,i),y=g.index,b=g.offset;return f<this.fieldCount&&y===f+1&&b===0&&this.fieldArray[f].text.GetLength()===this.fieldArray[f]._maxLength&&this.fieldArray[f+1].fieldLabel==="PromptField"&&(n+=this.fieldArray[f+1].GetLength()),r.isValid=!0,r.cursorPos=n,r.text=e,r},n.prototype.Insert=function(e,t,n,r){var i={};i.cursorPos=e,i.text=t;if(this.fieldCount===0||!t||e<0)return i;var s=0,o=this.GetFieldIndex(e,s),u=o.index;s=o.offset;if(s===this.fieldArray[u]._maxLength)return i;while(u!==0&&s===0){var a=this.fieldArray[u-1];if(!(a.fieldLabel!=="PromptField"&&a.text.GetLength()<a._maxLength))break;u--,s=this.fieldArray[u]._trueLength;if(s<this.fieldArray[u]._minLength){s=this.fieldArray[u]._minLength,i=this.InsertProcess(u,s,e,t,n);if(i.text==="")return i;if(e===s){u++,s=0;break}}}return this.InsertProcess(u,s,e,t,n,r)},n.prototype.InsertProcess=function(e,t,n,r,i,s){var o={},u=!1,a=e,f=n-t;this.SaveOldState();for(;a<this.fieldCount;a++){u=!1;var l=this.fieldArray[a];if(l.fieldLabel==="PromptField"){if(i){var c=l.text.Substring(t,l.text.GetLength()),h=r.GetLength();r.GetLength()>=c.GetLength()?(r.Substring(0,c.GetLength())!==c&&(u=!0),r=r.Substring(c.GetLength(),r.GetLength()),n+=c.GetLength()):(c.Substring(0,r.GetLength())!==r&&(u=!0),r="",n+=r.GetLength());if(u){m;if(r.GetLength()===h)break}}else n+=l.maxLength-t;f+=l.maxLength-t}else{var p=t,d=a===this.fieldCount-1,v=l.Insert(t,r,d,s);t=v.offset,r=v.text,u=v.existInvalid;var m=v.exception;if(u&&m){if(r===o.text)return o;break}n+=t-p,f+=l._minLength<l._trueLength?l._trueLength:l._minLength}t=0;if(r.GetLength()===0)break}if(a>=this.fieldCount&&r!==""&&r.GetLength()>0&&r===o.text)return o;var g=this.GetFieldIndex(n,t),y=g.index,b=g.offset;return a<this.fieldCount&&y===a+1&&b===0&&this.fieldArray[a].text.GetLength()===this.fieldArray[a]._maxLength&&this.GetShowLiterals()!==2&&this.fieldArray[a+1].fieldLabel==="PromptField"&&a+1!==this.fieldCount-1&&(n+=this.fieldArray[a+1].GetLength()),o.cursorPos=n,o.text=r,o},n.prototype.MoveField=function(e,t){var n=this.GetFieldIndex(e),r=n.index,i=n.offset;if(r===-1)return-1;if(t){if(r===this.fieldCount-1)return-1;while(this.GetFieldByIndex(r).text.GetLength()===0&&r<this.fieldCount)r++;if(r===this.fieldCount-1)return-1;r++;if(this.GetFieldByIndex(r).fieldLabel==="PromptField"){if(r===this.fieldCount-1)return-1;r++}var s=0;for(var o=0;o<r;o++)s+=this.GetFieldByIndex(o).GetLength();return s}if(r===0||r===1&&i===0)return-1;while(this.GetFieldByIndex(r).text.GetLength()===0&&r>0)r--;if(r===0)return-1;r--;if(this.GetFieldByIndex(r).fieldLabel==="PromptField"){if(r===0)return-1;r--}var s=0;for(var o=0;o<r;o++)s+=this.GetFieldByIndex(o).GetLength();return s},n.prototype.GetPosByCurrentField=function(e){if(e==null)return null;var t=0,n=-1,r=!1;for(;t<this.fieldCount;t++){var i=this.fieldArray[t];i.fieldLabel!=="PromptField"&&n++;if(n===e){r=!0;break}}if(r)return this.GetFieldRange(t);if(n===-1)return null;t>=this.fieldCount&&(t=this.fieldCount-1);while(this.fieldArray[t].fieldLabel==="PromptField")t--;return this.GetFieldRange(t)},n.prototype.GetFirstInputPosition=function(){var e=this.ValueIsNull();return e&&this._focusNull!==""&&!this.formatIsNull?0:this.fieldArray[0].fieldLabel==="PromptField"?this.GetFieldRange(1).start:0},n.prototype.GetTotalInputFieldCount=function(){var e=0;if(this.fieldCount>0)for(var t=0;t<this.fieldCount;t++){var n=this.fieldArray[t];n.fieldLabel!=="PromptField"&&e++}return e},n.prototype.GetFieldIndexByPos=function(e){return this.GetFieldIndex(e)},n.prototype.CanUndo=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];if(t.fieldLabel!=="PromptField"&&t.undoTempText!==t.text)return!0}return!1},n.prototype.GetRealFieldRange=function(e){var t={};t.start=0,t.length=0;var n=0,r=-1,i=-1;for(var s=0;s<this.fieldCount;s++){this.fieldArray[s].fieldLabel!=="PromptField"&&r++;if(r===e){i=s;break}}for(var s=0;s<i;s++){var o=this.GetFieldByIndex(s);n+=o.GetLength()}var u=this.GetFieldByIndex(i);return u?(t.start=n,t.length=u.GetLength(),t):t},n.prototype.PushBack=function(e){this.Add(e),this.fieldCount++},n}(T);t.MaskFieldCollection=L;var A=function(n){function r(e){n.call(this),this.OldPosition=0,this.IsFocus=!1,this.isSelectionDeterminedByHighlightText=!1,this.Format=null,e.HelpID!=null&&(this.HelpID=e.HelpID),e.Owner&&(this.Owner=e.Owner)}return e(r,n),r.prototype.GetCurrentField=function(e){var t=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&t!=null&&(this.Format.Fields._focusNull!==""&&t===this.Format.Fields._focusNull||t!=null&&t=="")){var n={};return n.index=-1,n}return this.Format.Fields.GetCurrentField(e)},r.prototype.FocusInternal=function(e,n,r,i,s){var o={},u=this.GetShowText(this.GetShowLiterals());this.OldValue=this.Format.Fields.GetText(),this.isMulSelected=!1,this.isDblClick=!1,this.isTriClick=!1,o.SelectionStart=s,e===1&&(o.SelectionStart=t.Utility.GetCursorPosition(n),o.SelectionEnd=o.SelectionStart),o.Text=u,this.Format.Fields.ValueIsNull()&&o.Text!=null&&this.Format.Fields._focusNull!==""&&o.Text===this.Format.Fields._focusNull&&(o.SelectionStart=0,o.SelectionEnd=0),this.Format.Fields.ValueIsNull()&&this.Format.Fields._owner._getDisplayNullExpression()!==null&&(o.SelectionStart=0,o.SelectionEnd=0);if(o.SelectionStart===-1||o.SelectionStart>o.Text.GetLength())o.SelectionStart=0,o.SelectionEnd=0;e===9?(o.SelectionStart=0,o.SelectionEnd=0):e===10&&(o.SelectionStart=o.Text.GetLength(),o.SelectionEnd=o.Text.GetLength());var a=o.SelectionStart;if(e!==6&&e!==2&&e!==3&&e!==8&&(r!==0||i!==-1))if(this.Format.Fields.ValueIsNull()&&o.Text!=null&&this.Format.Fields._focusNull!=""&&o.Text===this.Format.Fields._focusNull)o.SelectionEnd=o.Text.GetLength();else{var f=this.SetCursorPositionAndSelection(r,"",i,a);f!=null&&(o.SelectionStart=f.SelectionStart,o.SelectionEnd=f.SelectionEnd)}return o.SelectionStart!=null&&(this.OldPosition=o.SelectionStart),this.IsFocus=!0,o},r.prototype.SetCursorPositionAndSelection=function(e,t,n,r){var i;if(e===2)this.isSelectionDeterminedByHighlightText=!0,i=this.SelectAll();else if(e===1){this.isSelectionDeterminedByHighlightText=!0;if(n<=-1)if(r>0){var s=this.Format.Fields.GetFieldIndex(r).index,o=this.Format.Fields.fieldArray[s];o.fieldLabel==="PromptField"&&(s===this.Format.Fields.fieldCount-1?s--:s++);var u=this.Format.Fields.GetFieldRange(s);i={},i.SelectionStart=u.start,i.SelectionEnd=u.length+u.start}else i=this.GetPosByCurrentField(r);else i=this.GetPosByCurrentField(n)}else i=this.GetPosByCurrentField(n),i!=null&&(i.SelectionStart=i.SelectionStart,i.SelectionEnd=i.SelectionStart);return i},r.prototype.GetPosByCurrentField=function(e){var t={},n=this.Format.Fields.GetPosByCurrentField(e);return n!=null&&n!=-1?(t.SelectionStart=n.start,t.SelectionEnd=n.start+n.length,t):null},r.prototype.LoseFocus=function(){var e={};return this.Owner._getFormatIsNull()!=1&&this.Format.Fields.SaveUndoState(),e.Text=this.GetShowText(this.GetShowLiterals(),"LoseFocus"),e.Value=this.Format.Fields.GetValue(),this.IsFocus=!1,e},r.prototype.GetSepText=function(){if(this.Owner._getFormatIsNull())return this.Format.Fields.GetText();var e="",n=this.Format.Fields.fieldCount-1;for(var r=0;r<=n;r++){var i=this.Format.Fields.fieldArray[r];if(i.fieldLabel==="PromptField")continue;var s=i._trueLength,o=i.text;if(i.fieldLabel==="FilterField")for(var u=0;u<s;u++)i._bitState[u]===!1&&(o=o.Substring(0,u)+" "+o.Substring(u+1,o.GetLength()));else i._activeItem===-1&&(o="");if(r!=n){var a=o.Substring(0,s);a=a.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\");if(i.fieldLabel==="FilterField"&&!this.Owner._getFormatIsNull()){var f=o.Substring(0,s);for(var u=0;u<s;u++)i._bitState[u]===!1&&(f=f.Substring(0,u)+t.Utility.MaskValChar+f.Substring(u+1,f.GetLength()));a+=t.Utility.Hold+","+f.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}e+=a+t.Utility.Hold+";"}else{var a=o.Substring(0,s);a=a.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\");if(i.fieldLabel==="FilterField"&&!this.Owner._getFormatIsNull()){var f=o.Substring(0,s);for(var u=0;u<s;u++)i._bitState[u]===!1&&(f=f.Substring(0,u)+t.Utility.MaskValChar+f.Substring(u+1,f.GetLength()));a+=t.Utility.Hold+","+f.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}e+=a}}return e},r.prototype.SetSepText=function(e){if(!e){for(var n=0;n<this.Format.Fields.fieldCount;n++){var r=this.Format.Fields.fieldArray[n];if(r.fieldLabel==="PromptField")continue;r.Clear()}return!0}var i=t.Utility.Hold+";",s=e.split(i);for(var o=0;o<s.length;o++)s[o]=s[o].replace(/@#GCC#@/g,",").replace(/@#GCD#@/g,"'").replace(/@#GCM#@/g,'"');var u=!1,a=0;for(var n=0;n<this.Format.Fields.fieldCount;n++){var r=this.Format.Fields.fieldArray[n];if(r.fieldLabel==="PromptField")continue;if(a<s.length){var f=s[a].split(t.Utility.Hold+","),l=f[0],c="";if(f.length>1){c=f[1];if(c&&c!=""&&l!=c){var h=0,p=l.IndexOf(" ",h);while(p!=-1)c.Substring(p,p+1)===t.Utility.MaskValChar&&(l=l.Substring(0,p)+this.Owner.GetPromptChar()+l.Substring(p+1,l.GetLength())),h=p,p=l.IndexOf(" ",h)}}u=a===this.Format.Fields.fieldCount-1;var d=l.GetLength();if(d<r._minLength)for(var o=0;o<r._minLength-d;o++)l+=this.Owner.GetPromptChar(),c+=t.Utility.MaskValChar;var v;r.fieldLabel==="FilterField"?v=r.SetTextInternal(l,0,u,c):v=r.SetTextInternal(l,0,u);if(v.existInvalid&&v.exception)return!1;a++}else r.Clear()}return!0},r.prototype.ProcessShortcutKey=function(e,t,r){var i={};switch(e){case"Clear":return t||this.Format.Fields.ClearContent(),i.SelectionStart=this.Format.Fields.GetFirstInputPosition(),i.SelectionEnd=i.SelectionStart,i.Text=this.GetShowText(this.GetShowLiterals()),i;case"NextField":if(this.IsLastInputField(r,!0))return!0;break;case"PreviousField":if(this.IsLastInputField(r,!1))return!0}return i=n.prototype.ProcessShortcutKey.call(this,e,t,r),i},r.prototype.KeyDown=function(e){var r=e.KeyCode,i=n.prototype.KeyDown.call(this,e);r===27&&this.Owner.Clear();if(e.KeyAction!=null)return i;if(e.ReadOnly===!0)return i;if(r!=undefined&&r!=null){if(r>=48&&r<=57||r>=65&&r<=90||r>=96&&r<=105||r===0||r===229||r===231)return i||(i={}),O.Mask_ImeResponse=!0,i.inputChar=!0,i;if(r===32||r===106||r===107||r===109||r===110||r===111||r===219||r===220||r===221||r===222||r>=186&&r<=192||r===226)return i||(i={}),O.Mask_ImeResponse=!0,i.inputChar=!0,i;if(!t.CoreUtility.IsIE()&&(r===61||r===59))return i||(i={}),O.Mask_ImeResponse=!0,i.inputChar=!0,i;var s=r;e.FuncKeysPressed.Shift&&r!=65552&&(s=r-65536),r>65600&&r<65627&&(s=r-65536);if(s>=48&&s<=57||s>=65&&s<=90||s>=96&&s<=105||s===229||s===0||s===231)return i||(i={}),O.Mask_ImeResponse=!0,i.inputChar=!0,i;var o=(r==173||r==64||r==160||r==65594||r==58||r==65709||r==65600||r==65696)&&t.CoreUtility.IsFireFox4OrLater();if(o||s===32||s===106||s===107||s===109||s===110||s===111||s===219||s===220||s===221||s===222||s>=186&&s<=192||s===226||s==231)return i||(i={}),O.Mask_ImeResponse=!0,i.inputChar=!0,i;if(!t.CoreUtility.IsIE()&&(s===61||s===59))return i||(i={}),O.Mask_ImeResponse=!0,i.inputChar=!0,i}return i},r.prototype.KeyPressInternal=function(e,t,n,r,i){if(O.Mask_ImeResponse===!0){O.Mask_ImeResponse=!1;var s={};this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!=""&&(t=0,n=0);var o=this.ProcessCharKey(t,n,i,r);if(o.success){s.SelectionStart=o.start,s.SelectionEnd=s.SelectionStart,s.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1;if(this.moveFocusExitOnLastChar){var u=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");u!=null&&(s.EventInfo=u.EventInfo,s.FocusType=u.FocusType,s.FocusExit=!0),this.moveFocusExitOnLastChar=!1}}else s.SelectionStart=o.start,s.SelectionEnd=Math.max(t,n),s.Text=this.GetShowText(this.GetShowLiterals()),s.EventInfo=o.EventInfo,s.exception=!0,this.moveFocusExitOnLastChar&&(s.FocusExit=!0,this.moveFocusExitOnLastChar=!1);return s}return!1},r.prototype.ProcessCharKey=function(e,t,r,i){var s=n.prototype.ProcessCharKey.call(this,e,t,r,i),o=Math.min(e,t);return s.success&&(o=s.start),i&&(this.moveFocusExitOnLastChar=!1,o===this.Format.Fields.GetExistLength()&&(this.moveFocusExitOnLastChar=!0)),s},r.prototype.ContextMenu=function(){},r.prototype.Click=function(){},r.prototype.Undo=function(e){var t={};return this.Format.Fields.Undo(),t.SelectionStart=this.OldPosition,t.SelectionEnd=this.OldPosition,this.OldPosition=e,t.Value=this.Format.Fields.GetText(),t.Text=this.GetShowText(this.GetShowLiterals()),t},r.prototype.Paste=function(e,n,r,i,s){var o={};o.SelectionStart=e,o.SelectionEnd=n;var u;s!=null&&s===!0?u=r:this.Owner?(u=t.Utility.GetPasteData(this.Owner.GetUseClipboard()),u=this.UpdateCrLfString(u,this.Owner.GetAcceptsCrlf())):u=t.Utility.GetPasteData(!0);var a=null;u!=null&&(u.IndexOf("\r")!=-1&&(u=u.Substring(0,u.IndexOf("\r"))),u.IndexOf("\n")!=-1&&(u=u.Substring(0,u.IndexOf("\n"))));if(!u)return o;this.FireClientEvent("OnBeforePaste");var f=Math.min(e,n),l=Math.max(e,n),c=l-f;if(f===l)o.SelectionStart=this.Format.Fields.Insert(f,u,!1).cursorPos,o.Text=this.GetShowText(this.GetShowLiterals()),o.SelectionEnd=o.SelectionStart;else{var h=this.GetShowText(this.GetShowLiterals());h!=null&&this.Format.Fields._focusNull!=""&&h===this.Format.Fields._focusNull&&this.Format.Fields.fieldArray[0].text!=h?a=this.Format.Fields.Insert(0,u,!1):a=this.Format.Fields.Replace(f,c,u,!1),o.SelectionStart=a.cursorPos,o.Text=this.GetShowText(this.GetShowLiterals()),h===o.Text&&a.success===!1?(o.SelectionStart=f,o.SelectionEnd=l):o.SelectionEnd=o.SelectionStart}if(o.Text.Substring(f,f+u.GetLength())!=u&&o.SelectionStart-f<u.GetLength()&&this.InvalidInput!=""){var p={};p.Name=this.InvalidInput,p.Args=null,p.Type="InvalidInput",o.EventInfo=p}if(i)if(o.SelectionStart===this.Format.Fields.GetExistLength())this.moveFocusExitOnLastChar=!0;else{var d=this.Format.Fields.GetFieldIndex(o.SelectionStart),v=d.index,m=d.offset;v===this.Format.Fields.fieldCount-1&&m===0&&this.Format.Fields.GetFieldByIndex(v).fieldLabel==="PromptField"&&(this.moveFocusExitOnLastChar=!0)}if(this.moveFocusExitOnLastChar){var g=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");g!=null&&(o.EventInfo=g.EventInfo,o.FocusType=g.FocusType,o.FocusExit=!0),this.moveFocusExitOnLastChar=!1}return o.SelectionStart!=f&&this.FireClientEvent("OnPaste"),o},r.prototype.UpdateCrLfString=function(e,n){return n!==0?t.BaseUIProcess.UpdateCrLfString(e,n):t.BaseUIProcess.UpdateCrLfString(e,2)},r.prototype.DragStart=function(){},r.prototype.DragEnd=function(){},r.prototype.DragOver=function(){},r.prototype.DragInit=function(){},r.prototype.SetValue=function(e){this.Format.Fields.SetValue(e)},r.prototype.GetShowText=function(e,t,n){var r="";return t?t==="LoseFocus"&&(r=this.Format.Fields.GetShowText(e,"LoseFocus",n)):r=this.Format.Fields.GetShowText(e,"",n),r},r.prototype.ProcessBackSpaceKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};i.SelectionStart=n,i.SelectionEnd=n+r;if(n===0&&r===0)return i;var s,o,u=this.Format.Fields.GetFieldIndex(n);s=u.index,o=u.offset;if(s===-1)return i;if(r===0){var a=this.Format.Fields.GetFieldByIndex(s);if(s===0&&o===0)return i;while((o===0||a.fieldLabel==="PromptField")&&s>0)s--,r+=o,a=this.Format.Fields.GetFieldByIndex(s),o=a.GetLength(),a.fieldLabel==="PromptField"&&(r+=o,o=0);if(s===0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;if(this.Format.Fields.GetFieldByIndex(s).GetLength()===0)return i}if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="FilterField")r+=1,n-=r,r=1;else{if(this.Format.Fields.GetFieldByIndex(s).fieldLabel!=="EnumField")return i;r+=this.Format.Fields.GetFieldByIndex(s).GetLength(),n-=r,n=n>0?n:0}n=this.Format.Fields.Delete(n,r),i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var f;u=this.Format.Fields.GetFieldIndex(n+r),f=u.index;if(f===-1)return i;o===0&&s!=0&&s--;if(s===f&&this.Format.Fields.GetFieldByIndex(f).fieldLabel==="PromptField")return i;i.SelectionStart=this.Format.Fields.Delete(n,r),i.SelectionEnd=i.SelectionStart}return i},r.prototype.PerformSpinInternal=function(e,t,n,r,i){if(this.Format.Fields.fieldCount<=0)return null;var s={};s.SelectionStart=e,s.SelectionEnd=t,s.Text=this.GetShowText(this.GetShowLiterals());var o=this.Format.Fields.GetFieldIndex(t),u=o.index,a=o.offset;u!=0&&a===0&&(e===t?this.Format.Fields.fieldArray[u].fieldLabel!="EnumField"&&u--:e<t&&u--);if(this.Format.Fields.fieldArray[u].fieldLabel=="EnumField"||this.Format.Fields.fieldArray[u].text.GetLength()==0)i?s.SelectionStart=this.Format.Fields.PerformSpin(t,n,r):s.SelectionStart=this.Format.Fields.PerformSpin(t,-n,r),s.SelectionEnd=s.SelectionStart,s.Text=this.GetShowText(this.GetShowLiterals());if(i){if(this.SpinUp!=""){var f={};f.Name=this.SpinUp,f.Args=null,f.Type="SpinUp",s.EventInfo=f}}else if(this.SpinDown!=""){var f={};f.Name=this.SpinDown,f.Args=null,f.Type="SpinDown",s.EventInfo=f}return s},r.prototype.ProcessBackSpace=function(e,t){var n=this.ProcessBackSpaceKey(e,t);return n.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,n},r.prototype.ProcessDeleteKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};i.SelectionStart=n,i.SelectionEnd=n+r;if(n===this.Format.Fields.GetLength()&&r===0)return i;var s,o=this.Format.Fields.GetFieldIndex(n);s=o.index;if(s===-1)return i;if(r===0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;n=this.Format.Fields.Delete(n,1),i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var u,a;o=this.Format.Fields.GetFieldIndex(n+r),u=o.offset,a=o.index;if(a===-1)return i;u===0&&a--;if(s===a&&this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;i.SelectionStart=this.Format.Fields.Delete(n,r),i.SelectionEnd=i.SelectionStart}return i},r.prototype.ProcessDelete=function(e,t){var n=this.ProcessDeleteKey(e,t);return n.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,n},r.prototype.GetNullCasePosition=function(e,t){var n=this.Format.Fields;switch(t){case 36:case 65572:case 131109:case 196645:case 196644:case 131108:e=0;break;case 35:case 65571:e=n.GetLength();break;case 65573:case 37:e!=0&&e--;break;case 39:case 65575:e!=n.GetLength()&&e++;break;case 131111:case 196647:case 196643:case 131107:e=n.GetLength();break;case 131118:case 131080:case 196616:return e}return e},r.prototype.GetCaretPosition=function(e,t){if(this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!="")return this.GetNullCasePosition(e,t);var r=this.Format.Fields,i=r.GetFieldIndex(e),s=i.index,o,u,a=0,f=0;for(f=0;f<r.fieldCount;f++)if(r.GetFieldByIndex(f).fieldLabel!="PromptField"){u=r.GetFieldRange(f).start;break}var l=r.GetLastVisibleFieldIndex(this.GetShowLiterals());if(this.ShowLiterals===3)for(f=l;f>=0;f--)r.GetFieldByIndex(f).fieldLabel!="PromptField"&&(a+=r.GetFieldByIndex(f)._trueLength);else for(f=l;f>=0;f--)if(r.GetFieldByIndex(f).fieldLabel!="PromptField"){o=r.GetFieldRange(f),a=o.start+o.length;break}var c=e;e=n.prototype.GetCaretPosition.call(this,e,t,u,a,"PromptField");var i=r.GetFieldIndexByPos(c),s=i.index,o;if(t===196647&&e===c){for(;s<l;s++){o=r.GetFieldRange(s+1),e=o.start;if(e>u)break}s===l&&(e+=o.length)}if(t===131111&&r.GetFieldByIndex(s).fieldLabel!="PromptField"&&r.GetFieldRange(s).length===0){while(r.GetFieldRange(s).length===0&&s<r.fieldCount-1)s++;for(f=s+1;f<r.fieldCount;f++)if(r.GetFieldByIndex(f).fieldLabel!="PromptField")return o=r.GetFieldRange(f),o.start}return e},r.prototype.ProcessTabKey=function(e,t,r){var i;return r!==1||!!this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!=""&&this.GetShowText(this.GetShowLiterals())===this.Format.Fields._focusNull?i=n.prototype.ProcessTabKey.call(this,e,t,r):i=this.MoveFieldAndControl(e,t),i},r.prototype.ProcessLeftDirection=function(e,t,n){var r={};!this.isMulSelected||n===36||n===131108?(r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart):(r.SelectionStart=Math.min(e,t),r.SelectionEnd=r.SelectionStart);if(n===37||n===131109){if(!this.Format.Fields.ValueIsNull()||this.Format.Fields._focusNull=="")if(r.SelectionStart>0){var i=this.Format.Fields.GetFieldIndex(r.SelectionStart),s=i.index,o=i.offset;this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField"&&this.isMulSelected===!1&&(r.SelectionStart-=o),r.SelectionEnd=r.SelectionStart}return this.isMulSelected=!1,r}this.isMulSelected=!1;if(!this.isMulSelected||n===36||n===131108)r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart;else{r.SelectionStart=Math.min(e,t);var i=this.Format.Fields.GetFieldIndex(r.SelectionStart),s=i.index,o=i.offset;this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField"&&(r.SelectionStart-=o),r.SelectionEnd=r.SelectionStart}return r},r.prototype.ProcessRightDirection=function(e,t,n){var r={};if(!this.isMulSelected||n===35||n===131107)return r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r;r.SelectionStart=Math.max(e,t);if(this.Format.Fields.ValueIsNull()===!0&&this.Format.Fields._focusNull!="")return r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r;var i,s,o=this.Format.Fields.GetFieldIndex(r.SelectionStart);i=o.index,s=o.offset;if(this.Format.Fields.GetFieldByIndex(i).fieldLabel==="PromptField"&&this.isMulSelected===!1){var u=this.Format.Fields.fieldArray[i];r.SelectionStart+=u.text.GetLength()-s}return r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r},r.prototype.IsLastInputField=function(e,t){var n=this.Format.Fields.GetFieldIndex(e,0),r=n.index;if(t){while(r<this.Format.Fields.fieldCount-1&&this.Format.Fields.fieldArray[r+1].fieldLabel!="PromptField"&&this.Format.Fields.fieldArray[r+1].text.GetLength()===0)r++;var i=this.Format.Fields.fieldCount-1;for(;i>r;i--)if(this.Format.Fields.fieldArray[i].fieldLabel!="PromptField")break;return i===r?!0:!1}while(r>0&&this.Format.Fields.fieldArray[r-1].fieldLabel!="PromptField"&&this.Format.Fields.fieldArray[r-1].text.GetLength()===0)r--;var i=0;for(;i<r;i++)if(this.Format.Fields.fieldArray[i].fieldLabel!="PromptField")break;return i===r?!0:!1},r.prototype.DoubleClick=function(e){var t={},r=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&r!=null&&(this.Format.Fields._focusNull!=""&&r===this.Format.Fields._focusNull||r!=null&&r=="")){var r=this.GetShowText(this.GetShowLiterals());t.SelectionStart=0,t.SelectionEnd=r.GetLength()}else t=n.prototype.DoubleClick.call(this,e);return t},r}(t.BaseUIProcess);t.MaskUIProcess=A;var O=function(r){function i(){r.call(this),this.IMControlType="Mask",this._promptChar="_",this._autoConvert=!0,this._displayNull=null,this._null="",this._formatPattern="",this._exitOnLastChar=!1,this._displayNullExpresson=null,this._showLiterals=1,this._tabAction=0,this._hideEnter=!1,this._hidePromptOnLeave=!1,this._textWithPromptChar=null,this.Init()}return e(i,r),i.prototype.AttachInput=function(e){this.InputElement=e,this.AddAllEventsHandler()},i.prototype.DetachInput=function(){n(this.InputElement).unbind(".wijinput"),this.InputElement=null},i.prototype.GetAutoConvert=function(){return this._autoConvert},i.prototype.SetAutoConvert=function(e){this._autoConvert=e},i.prototype.GetExitOnLastChar=function(){return this._exitOnLastChar},i.prototype.SetExitOnLastChar=function(e){e=t.Utility.CheckBool(e),this._exitOnLastChar=e},i.prototype.GetNull=function(){return this._null},i.prototype.SetNull=function(e){if(e!==this._null){var t=k.ParseFillExpression(e,this.Format.Fields);t.Expression===null?this.Format.Fields._focusNull=e:this.Format.Fields._focusNull=t.Expression,this._null=e}},i.prototype._getDisplayNullExpression=function(){return this._displayNullExpresson!==null?this._displayNullExpresson:this._displayNull},i.prototype.GetDisplayNull=function(){return this._displayNull},i.prototype.SetDisplayNull=function(e){e===undefined&&(e=null),e!==null&&(e=t.Utility.CheckString(e));if(e!==this._displayNull){var n=k.ParseFillExpression(e,this.Format.Fields);this._displayNullExpresson=n.Expression,this._displayNull=e;var r=this.GetValue();this.SetValue(r)}},i.prototype.GetFormatPattern=function(){return this._formatPattern},i.prototype.SetFormatPattern=function(e){e=t.BaseUIProcess.UpdateCrLfString(e,1);if(e!==this._formatPattern)try{var n=k.ParseFormat(e,this);this.Clear(),this.Format.Fields=n,this.ResetNullAndDispalyNull(),this.FormatIsNull=this.Format.Fields.formatIsNull,this.Clear(),this.SetSelectionStart(0),this._formatPattern=e;var r=this.GetDisplayText();this.UpdateDisplayText(r)}catch(i){throw"Format pattern is invalid"}},i.prototype.ResetNullAndDispalyNull=function(){var e=k.ParseFillExpression(this.GetNull(),this.Format.Fields);e.Expression===null?this.Format.Fields._focusNull=this.GetNull():this.Format.Fields._focusNull=e.Expression,e=k.ParseFillExpression(this.GetDisplayNull(),this.Format.Fields),this._displayNullExpresson=e.Expression},i.prototype.GetPromptChar=function(){return this._promptChar},i.prototype.SetPromptChar=function(e){e||(e="_"),e.length>1&&(e=e.charAt(0));if(e!==this._promptChar){this._promptChar=e;var t=this.GetValue();this.SetValue(t)}},i.prototype.GetShowLiterals=function(){return this._showLiterals},i.prototype.SetShowLiterals=function(e){if(e!=this._showLiterals){this._showLiterals=e;var t=this.GetValue();this.SetValue(t)}},i.prototype.GetTabAction=function(){return this._tabAction},i.prototype.SetTabAction=function(e){this._tabAction=e},i.prototype.GetCursorPosition=function(){return this.CursorPosition},i.prototype.SetCursorPosition=function(e){e=t.Utility.CheckInt(e,-1,Math.pow(2,31)),e=Math.min(e,this.Format.Fields.GetTotalInputFieldCount()-1),e!==this.CursorPosition&&(this.CursorPosition=e)},i.prototype.Init=function(){this._autoConvert=!0,this.FormatIsNull=!0,this.CursorPosition=-1,this.truePosition=-1,this.japInput=!1,this.ImeMode=!1,this.IsImplementImeInput=!1,this.IsJapanConvertKeyPress=!1,this.HelpID="__"+this.ID+"_State",this.IsDragDrop=!1;var e={};e.ID=this.ID,e.HelpID=this.HelpID,e.Owner=this,this.UIProcess=this._createUIProcess(e),this.Format.Fields=k.ParseFormat("",this),this.FormatIsNull=this.Format.Fields.formatIsNull,this.UIProcess.Format=this.Format,this.NewSelectionStart=0,this.NewSelectionEnd=0,this.IsInUpdatePanelAndAsyncPostBack||this.UIUpdate&&(this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(this.UIUpdate.GetText(),!0)),this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.MouseButton=-1,this.FocusType=0;if(this.IsInUpdatePanelAndAsyncPostBack){var t=this.UIUpdate.GetText();if(t!=this.UIProcess.GetShowText(this.GetShowLiterals(),null,true)&&t!=this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus",false))if(this.ShowLiterals===1)this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(t,!0),this.SetHideValue();else{this.UIProcess.Format.Fields.ClearContent();var n=this.UIProcess.GetShowText("Always",null,!0);t.GetLength()<n.GetLength()&&(t+=n.Substring(t.GetLength(),n.GetLength())),this.UIProcess.Format.Fields.SetText(t,!0),this.SetHideValue()}this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText()}this.UIUpdate&&(this.DisplayText=this.GetTextboxValue()),this.LastStart=0,this.LastEnd=0,this.OrientText="",this.ImeSelect=!1,this.ImeSelectTimes=0,this.Type="Mask",this.UIUpdate&&this.ReLoadData()},i.prototype._createUIProcess=function(e){return new A(e)},i.prototype.Clear=function(){this.SetValue(""),this.SelectionStart=this.SelectionEnd=this.Format.Fields.GetFirstInputPosition()},i.prototype.SetValue=function(e){e&&(typeof e!="string"&&(e=e.toString()),this.FormatIsNull&&(e=e.replace(/[\r\n]/g,"")),e=t.BaseUIProcess.UpdateCrLfString(e,1)),this.UIProcess.Format.Fields.SetValue(e,!1)&&this.AfterSetTextValue()},i.prototype.GetValue=function(){return this.Value},i.prototype.GetSelectedText=function(){var e=Math.min(this.SelectionStart,this.SelectionEnd),t=Math.max(this.SelectionStart,this.SelectionEnd),n=this.Text.Substring(e,t);if(this.GetClipContent()===1){var r=Math.min(this.SelectionStart,this.SelectionEnd),i=this.GetSelectionLength();n=this.UIProcess.Format.Fields.GetNonPromptText(r,i)}return n},i.prototype.SetSelectedText=function(e){if(!e)return;var t=this.Value,n=this.Text;this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,e,!1,!0);var r={};r.Text=this.GetDisplayText("Focus");if(!this.UpdateText(r))return;this.UpdateDisplayText(this.Text),this.Value=this.UIProcess.Format.Fields.GetValue(),this.Text!=n&&this.FireClientEvent("TextChanged",null),this.Value!=t&&this.FireClientEvent("ValueChanged",null)},i.prototype.SetText=function(e){try{this.ShowPromptChar(),this.Value=this.UIProcess.Format.Fields.GetValue();if(!e){this.SetValue("");return}if(e===this.UIProcess.Format.Fields._focusNull&&!this.UIProcess.Format.Fields.formatIsNull){this.SetValue("");return}this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull&&(e=e.replace(/[\r\n]/g,"")),e=t.BaseUIProcess.UpdateCrLfString(e,1),this.UIProcess.Format.Fields.SetText(e,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.AfterSetTextValue()}finally{this.HidePromptChar()}},i.prototype.AfterSetTextValue=function(){var e=this.Value,t=this.Text,n={};n.Text=this.GetDisplayText("Focus");if(!this.UpdateText(n))return;this.Value=this.UIProcess.Format.Fields.GetValue(),this.UpdateDisplayText(this.GetDisplayText()),this.Text!=t&&(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.FireClientEvent("TextChanged",null)),this.Value!=e&&this.FireClientEvent("ValueChanged",null)},i.prototype.GetText=function(){return this.GetDisplayText("Focus")},i.prototype.GetDisplayText=function(e){return e?e==="Focus"?this.UIProcess.GetShowText(this.GetShowLiterals()):"":this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus")},i.prototype.GetCurrentField=function(){return this.UIProcess.GetCurrentField(this.SelectionEnd)!=null?this.UIProcess.GetCurrentField(this.SelectionEnd).index:0},i.prototype.GetValueIsFull=function(){return this.UIProcess.Format.Fields.ValueIsFull(1)},i.prototype._getFormatIsNull=function(){return this.FormatIsNull},i.prototype.FireClientEvent=function(e,t){var n="";switch(e){case"TextChanged":this.TextChanged!=""&&(n=this.TextChanged);break;case"ValueChanged":this.ValueChanged!=""&&(n=this.ValueChanged);break;default:return}return this.UIProcess.FireEvent(this,n,t,e)},i.prototype.Focus=function(){this.ShowPromptChar(),!this.IsDragDrop&&this.FocusType!=3&&this.FocusType!=6&&(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText());if(this.UIProcess.Format.Fields.fieldCount>0){var e=this.UIProcess.FocusInternal(this.FocusType,this.InputElement,this.GetHighlightText(),this.CursorPosition,this.SelectionStart);if(!e)return;e.Text!=null&&(this.Text=e.Text),e.SelectionStart!=null&&this.NeedReCalCursorPos&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&this.NeedReCalCursorPos&&(this.SelectionEnd=e.SelectionEnd,this.SelectionLength=this.GetSelectionLength()),this.NeedReCalCursorPos||(this.NeedReCalCursorPos=!0),this.japInput===!0&&(this.truePosition!=-1&&(this.SelectionStart=this.truePosition,this.SelectionEnd=this.truePosition),this.japInput=!1),this.GetReadOnly()===!0&&this.FocusType===0&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),!this.IsDragDrop&&this.FocusType!=3&&this.FocusType!=6&&this.FocusType!=7&&(this.OldValue=this.Value)}else this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.OldValue=this.Value;this.IsDragDrop=!1},i.prototype._shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},i.prototype.LoseFocus=function(){this.FireKeyExit();var e=this.ImeMode;t.CoreUtility.IsIE()?this.ImeInput("LoseFocusInput"):this.ImeInput("ReInput",!0);if(this.SpinBtnPressed)return;this.SetLastClientValues();var n=this.UIProcess.LoseFocus();this.DisplayText=n.Text,this.Value=n.Value,this.Text=this.UIProcess.Format.Fields.GetText(),(t.CoreUtility.IsIE()||!e)&&this.UpdateDisplayText(this.DisplayText),!t.CoreUtility.IsIE()&&e&&this.UpdateDisplayText(this.DisplayText),this.FocusType=0;var r;n.EventInfo!=null&&(r=this.UIProcess.FireEvent(this,n.EventInfo.Name,n.EventInfo.Args,n.EventInfo.Type),r!=null&&(this.FocusType=r));var i=this;!t.CoreUtility.IsIE()&&this.DisplayText!=this.UIUpdate.GetText()&&e&&window.setTimeout(function(){i.UpdateDisplayText(i.DisplayText)},0),this.GetHighlightText()===2&&(this.SelectionStart=0),this._shouldFireValueChangedEvent()&&(r=this.FireClientEvent("TextChanged",null),r!=null&&(this.FocusType=r),r=this.FireClientEvent("ValueChanged",null),r!=null&&(this.FocusType=r),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),t.Utility.FireSystemEvent(this.InputElement,"onchange"),this._getAutoPostBack()),window.setTimeout(function(){i.HidePromptChar()},50)},i.prototype.shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},i.prototype.MouseDown=function(e){var n=t.Utility.GetMouseButton(e);this.FocusedWhenMouseDown=document.activeElement===(e.srcElement||e.target),this.MouseDownOnClearButton=t.CoreUtility.IsMouseDownOnClearButton(e),r.prototype.MouseDown.call(this,e),this.MouseButton===2?this.FocusType=2:this.MouseButton=0,this.UIProcess.isDblClick=!1,this.SelectionLength=this.GetSelectionLength(),!t.CoreUtility.IsIE()&&this.ImeMode&&n===0&&(this.IsImplementImeInput=!0)},i.prototype.MouseUp=function(e){if(!t.CoreUtility.IsIE()&&this.ImeMode){if(!this.IsImplementImeInput)return;this.IsImplementImeInput=!1}this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd,r.prototype.MouseUp.call(this,e);if(!this.ImeMode)this.SelectionLength=this.GetSelectionLength();else{this.SelectionStart=this.LastStart,this.SelectionEnd=this.LastEnd,this.SelectionLength=this.GetSelectionLength(),t.CoreUtility.IsIE()?this.ImeInput("ClickInput"):this.ImeInput("ReInput",!0);if(!t.CoreUtility.IsIE()&&this.Text!=this.UIUpdate.GetText()){var n=this;window.setTimeout(function(){n.UpdateDisplayText(n.Text)},0)}}this.MouseUpPointerType==undefined&&(this.MouseUpHasValue=this.GetInputElement().value.length>0),this.HandleClearButton(e)},i.prototype.KeyDown=function(e){var n=e.keyCode,i={};i.Shift=!1,i.Ctrl=!1,i.Alt=!1,e.shiftKey&&(i.Shift=!0),e.ctrlKey&&(i.Ctrl=!0),e.altKey&&(i.Alt=!0);var s={},o=this.ImeMode;this.ImeMode=!1;if(n===229)return t.CoreUtility.IsIE8OrBelow()&&(this.ImeMode=!0),!0;!this.ImeMode&&o&&!i.Shift&&!i.Ctrl&&n!=9&&n!=65545&&(this.ImeInput("ReInput",!0),this.ImeSelectTimes=0),s.KeyCode=n,s.Text=this.Text,s.FuncKeysPressed=i,s.SelectionStart=this.SelectionStart,s.SelectionEnd=this.SelectionEnd,s.EditMode=this._getEditModeInternal(),s.ReadOnly=this.GetReadOnly(),s.ClipContent=this.GetClipContent(),s.ExitOnLastChar=this.GetExitOnLastChar(),s.ExitOnLeftRightKey=this.GetExitOnLeftRightKey(),s.TabAction=this.GetTabAction();var u=r.prototype.KeyDown.call(this,s);return u.inputChar!=null?!0:(i.Shift||i.Ctrl||i.Alt)&&!u?!0:this.GetHideEnter()&&n===13?!1:u.System},i.prototype.KeyPress=function(e,n){var r=n.keyCode||n.charCode,i=r===192&&n.altKey;if(!t.CoreUtility.IsIE()&&this.ImeMode&&i)return this.ImeInput("ReInput",!0),!1;if(!t.CoreUtility.IsIE()&&(r===229||i))return!1;var s=e,o=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),s);if(this.japInput!=1){o.SelectionStart!=null&&(this.NewSelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.NewSelectionEnd=o.SelectionEnd);if(o.Text!=null){if(!this.UpdateText(o))return!1;this.UpdateDisplayText(this.Text)}var u=this._doExtraWorkForKeyPress(e);if(u===!0)return;o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),o.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),o.exception!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),o.EventInfo!=null&&(this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type),o.EventInfo.Type==="KeyExit"&&(this.EventInfo=o.EventInfo,this.FireKeyExit()),this.FocusType=3);if(n.keyCode===13)return!0}else{if(n.keyCode===13)return!0;o.SelectionStart!=null&&(this.truePosition=o.SelectionStart),o.EventInfo!=null&&this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type)}},i.prototype._doExtraWorkForKeyPress=function(e){return!1},i.prototype.innerKeyPress=function(e,t,n){var r=e;t=!!t;var i=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),r);if(this.japInput!=1){if(i.Text!=null){if(!this.UpdateText(i))return!1;n||this.UpdateDisplayText(this.Text)}i.SelectionStart!=null&&(this.SelectionStart=i.SelectionStart),i.SelectionEnd!=null&&(this.SelectionEnd=i.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),i.FocusExit!=1&&!t&&!n&&i.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),i.exception!=null&&(n||this.UpdateDisplayText(this.Text),i.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),i.EventInfo!=null&&(this.UIProcess.FireEvent(this,i.EventInfo.Name,i.EventInfo.Args,i.EventInfo.Type),this.FocusType=3);if(window.event!=null&&event.keyCode===13)return!0}else{if(window.event!=null&&event.keyCode===13)return!0;i.SelectionStart!=null&&(this.truePosition=i.SelectionStart),i.EventInfo!=null&&this.UIProcess.FireEvent(this,i.EventInfo.Name,i.EventInfo.Args,i.EventInfo.Type)}},i.prototype.KeyUp=function(e){if(this.ImeMode===!0&&t.CoreUtility.IsIE8OrBelow()){var n=e.keyCode,r=t.CharProcess.CharEx,i=this.GetTextboxValue(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}s=s.Substring(s.GetLength()-1,s.GetLength());if(n===13)this.ImeInput("DirectInput");else if(n>=48&&n<=57||n>=96&&n<=105)n>=96&&(n-=48),s=r.ToHalfWidth(s),s==String.fromCharCode(n)&&(s===String.fromCharCode(n)&&this.ImeSelectTimes<1||this.ImeSelect||this.ImeInput("ReInput")),this.ImeSelectTimes=0;else if(n===32){if(this.ImeSelect===!1)if(this.ImeSelectTimes===1)this.ImeSelect=!0;else if(r.ToHalfWidth(s)!=String.fromCharCode(n))this.ImeSelectTimes++;else{var u=i.Substring(this.SelectionStart,i.GetLength()-o);r.ToHalfWidth(u)===String.fromCharCode(n)&&this.ImeInput("DirectInput")}}else n>=65&&n<=90?this.ImeSelectTimes=0:n===32||n===106||n===107||n===109||n===110||n===111||n===219||n===220||n===221||n===222||n>=186&&n<=192?(this.ImeSelectTimes>=1&&this.ImeInput("ReInput"),this.ImeSelectTimes=0):n===40||n===38?this.ImeSelect===!1&&this.ImeSelectTimes===1&&(this.ImeSelect=!0):n===8||n===46||n===27?this.ImeSelectTimes=0:n===244&&(this.IsJapanConvertKeyPress=!0)}if(e.keyCode!==13)return!1},i.prototype.PerformSpin=function(e){var t=this.Spin.Increment,n=!0;e==="down"&&(n=!1),this.PerformSpinProcess(this.SelectionStart,this.SelectionEnd,t,this.Spin.Wrap,n,!0),this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},i.prototype.PerformSpinProcess=function(e,t,n,r,i,s){if(this.GetReadOnly()&&s)return;var o=this.UIProcess.PerformSpinInternal(e,t,n,r,i);this.FocusType=6;if(!o){this.UIUpdate.SetFocus();return}if(o.Text!=null&&!this.UpdateText(o))return;o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=this.GetSelectionLength());if(o.EventInfo){var u=this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type);u!=null&&(this.FocusType=u)}if(this.Text!==this.GetTextboxValue()){var a=this.Format.Fields.fieldArray;for(var f=0;f<a.length;f++)if(a[f].fieldLabel==="EnumField")break;if(f===a.length)return;this.UpdateDisplayText(this.Text)}},i.prototype.SelectStart=function(e){if(!!this.ImeMode)return!1;r.prototype.SelectStart.call(this,e)},i.prototype.Click=function(){},i.prototype.DragDrop=function(e){return!t.CoreUtility.IsIE()&&this.GetReadOnly()?!1:(this.IsDragDrop=!0,this.Paste(e,!0,0,0),!1)},i.prototype.DragOver=function(){},i.prototype.DragInit=function(){},i.prototype.ImeInput=function(e,n){var r=this.UIUpdate.GetText();if(r===this.Text)return window.event&&t.Utility.PreventDefault(window.event),this.ImeMode=!1,!1;var s;if(this.Text!==""){var o=Math.min(this.SelectionStart,this.SelectionEnd),u=Math.max(this.SelectionStart,this.SelectionEnd);if(u<this.Text.GetLength()){var a=this.Text.Substring(u,this.Text.GetLength()),f=r.IndexOf(a);f!==-1?s=r.Substring(o,r.GetLength()-a.GetLength()):s=""}else s=r.Substring(o,r.GetLength())}else s=r;e==="ReInput"&&(n?s=s.Substring(0,s.GetLength()):s=s.Substring(0,s.GetLength()-1));if(e==="Record")return s;var l=!1;if(e==="LoseFocusInput"){if(s==="")return;i.Mask_ImeResponse=!0,l=!0}for(var c=0;c<s.GetLength();c++){c===s.GetLength()-1&&e==="LoseFocusInput"&&(this.japInput=!0),i.Mask_ImeResponse=!0;if(s.GetLength()>c+1){var h=s.Substring(c+1,c+2),p=new t.CharCategory,d=h.charCodeAt(0)-(p.KATAKANA_VOICED.charCodeAt(0)-1);d===1||d===2?(this.innerKeyPress(s.Substring(c,c+2),l),c++):e==="ReInput"?this.innerKeyPress(s.Substring(c,c+1),l,!0):this.innerKeyPress(s.Substring(c,c+1),l)}else e==="ReInput"?this.innerKeyPress(s.Substring(c,c+1),l,!0):this.innerKeyPress(s.Substring(c,c+1),l)}this.japInput=!1,this.ImeMode=!1,this.ImeSelect=!1;if(e==="ReInput"||e==="ClickInput")this.truePosition=this.SelectionStart,this.FocusType=8},i.prototype.SetInnerText=function(e){this.Clear(),this.UIProcess.Format.Fields.SetText(e,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.UIProcess.Format.Fields.SaveOldState();var t={};t.Text=this.GetDisplayText("Focus");if(!this.UpdateText(t))return;this.UpdateDisplayText(this.Text)},i.prototype.Copy=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),r.prototype.Copy.call(this)},i.prototype.Cut=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),r.prototype.Cut.call(this)},i.prototype.Paste=function(e,n,r,i){var s="";e!=null&&(s=e),r||(r=this.SelectionStart),i||(i=this.SelectionEnd);var o=this.UIProcess.Paste(r,i,s,this.GetExitOnLastChar(),n);if(!o)return!1;o.Value!=null&&(this.Value=o.Value);if(o.Text!=null){if(!this.UpdateText(o))return!1;this.UpdateDisplayText(this.Text),t.CoreUtility.IsIE()||this.SetInnerFocus()}return o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),(!o||o.FocusExit==null||!o.FocusExit)&&this.SetSelection(this.SelectionStart,this.SelectionEnd),o.EventInfo&&this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type),!0},i.prototype.SetHideValue=function(){},i.prototype.GetHideValue=function(){},i.prototype.CanUndo=function(){return this.Format.Fields.CanUndo()?!0:!1},i.prototype.DoSpinUp=function(e,t){arguments.length===1&&(t=e,e=undefined),this.DoSpin("up",e,t)},i.prototype.DoSpinDown=function(e,t){arguments.length===1&&(t=e,e=undefined),this.DoSpin("down",e,t)},i.prototype.DoSpin=function(e,n,r){if(typeof n=="number"&&isNaN(n)||typeof r=="number"&&isNaN(r))return;var i=this.SelectionStart,s=this.SelectionEnd,o=this.Increment;if(n!=undefined){n=t.Utility.CheckInt(n,0,Math.pow(2,31));var u={};u.start=0,u.length=0,u=this.Format.Fields.GetRealFieldRange(n),i=u.start,s=u.start+u.length}r!=undefined&&(o=r),o=t.Utility.CheckInt(o,-Math.pow(2,31),Math.pow(2,31)),e==="up"?this.PerformSpinProcess(i,s,o,this.Wrap,!0,!1):this.PerformSpinProcess(i,s,o,this.Wrap,!1,!1)},i.prototype.UpdateText=function(e){if(!e)return!1;var t="";e.Text!=null&&(t=e.Text);if(t!==this.Text&&this.TextChanging!=null&&this.TextChanging!=""){var n={},r={};r.Result=t,r.Cancel=!1,n.Name=this.TextChanging,n.Args=r,e.SelectionStart!=null&&(this.NewSelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.NewSelectionEnd=e.SelectionEnd);var i=this.UIProcess.GetSepText();this.RollBack(),typeof this.NeedSetHideValue=="undefined"&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&this.SetHideValue(),n.Name.IndexOf&&n.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1&&(this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(i,!0):this.UIProcess.SetSepText(i));var s=this.UIProcess.FireEvent(this,n.Name,n.Args,"TextChanging");n.Name.IndexOf&&n.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1,s!=null&&(this.FocusType=s),typeof this.TextChanging!="undefined"&&(this.NeedSetHideValue=!1);if(r.Cancel)return this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),!1;this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(i,!0):this.UIProcess.SetSepText(i)}return this.Text=t,this.Value=this.UIProcess.Format.Fields.GetValue(),!0},i.prototype.UpdateDisplayText=function(e){typeof this.NeedSetHideValue=="undefined"&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&(r.prototype.UpdateDisplayText.call(this,e),this.EditingTextChanged&&this.EditingTextChanged.call(this))},i.prototype.RollBack=function(){this.UIProcess.Format.Fields.RollBack()},i.prototype.ProcessReservedKey=function(e){var t=r.prototype.ProcessReservedKey.call(this,e);if(!t){switch(e){case 118:case 119:return!0}return!1}return!0},i.prototype.AddAllEventsHandler=function(){r.prototype.AddAllEventsHandler.call(this);var e=this;t.CoreUtility.IsIE10OrLater()&&n(this.GetInputElement()).bind("MSPointerUp.wijinput",function(n){t.GlobalEventHandler.OnMSPointerUp(e,n)},!1)},i.prototype.CompositionStart=function(e){this.ImeMode=!0},i.prototype.CompositionUpdate=function(e){},i.prototype.CompositionEnd=function(e){var n=this,r=function(){try{n.ImeInput("DirectInput")}finally{n.ImeMode=!1}};t.CoreUtility.IsIE9OrLater()?r():window.setTimeout(r,0)},i.prototype.Select=function(){if(this.ImeMode)return;this.SelectionStart=t.Utility.GetSelectionStartPosition(this.GetInputElement()),this.SelectionEnd=this.SelectionStart+t.Utility.GetSelectionText(this.GetInputElement()).GetLength()},i.prototype.MSPointerUp=function(e){e&&(this.MouseUpPointerType=e.pointerType,this.MouseUpHasValue=(e.srcElement||e.target).value.length>0)},i.prototype.Input=function(e){var t=this,n=function(){try{t.ImeInput("DirectInput")}finally{t.ImeMode=!1}};setTimeout(n,0)},i.prototype.HandleClearButton=function(e){if(t.CoreUtility.IsIE10OrLater()&&this.FocusedWhenMouseDown&&this.MouseDownOnClearButton&&(e.srcElement||e.target)===this.InputElement){var n=document.activeElement===(e.srcElement||e.target),r=t.CoreUtility.IsMouseDownOnClearButton(e);if(this.MouseUpHasValue&&n&&r){this.Clear();var i=this.GetText(),s=this;window.setTimeout(function(){s.UpdateDisplayText(i),s.SelectionStart=s.SelectionEnd=s.Format.Fields.GetFirstInputPosition(),s.SetSelection(s.SelectionStart,s.SelectionEnd)},0)}}},i.prototype.HidePromptChar=function(){if(this.GetHidePromptOnLeave()){var e=this.GetInputElement().value;this._textWithPromptChar=e,e=e.replace(new RegExp(this.GetPromptChar(),"g")," "),this.GetInputElement().value=e}},i.prototype.ShowPromptChar=function(){this._textWithPromptChar!==null&&(this.GetInputElement().value=this._textWithPromptChar,this._textWithPromptChar=null)},i.prototype.GetHideEnter=function(){return this._hideEnter},i.prototype.SetHideEnter=function(e){this._hideEnter=e},i.prototype.GetHidePromptOnLeave=function(){return this._hidePromptOnLeave},i.prototype.SetHidePromptOnLeave=function(e){e!==this._hidePromptOnLeave&&(this._hidePromptOnLeave=e,e&&document.activeElement!==this.GetInputElement()&&this.HidePromptChar(),!e&&document.activeElement!==this.GetInputElement()&&this.ShowPromptChar())},i.prototype.FireKeyExit=function(){this.EventInfo!=null&&this.EventInfo.Type=="KeyExit"&&(this.KeyExit&&this.KeyExit.call(this),this.FocusType=4,this.EventInfo=null)},i.prototype.OnEditStatusChanged=function(e){e=t.Utility.CheckFunction(e),this.EditStatusChangedEvent=e},i.prototype.OnInvalidInput=function(e){e=t.Utility.CheckFunction(e),this.InvalidInputEvent=e},i.prototype.OnKeyExit=function(e){e=t.Utility.CheckFunction(e),this.KeyExit=e},i.prototype.OnSpinDown=function(e){e=t.Utility.CheckFunction(e),this.SpinDown=e},i.prototype.OnSpinUp=function(e){e=t.Utility.CheckFunction(e),this.SpinUp=e},i.prototype.OnTextChanged=function(e){e=t.Utility.CheckFunction(e),this.TextChanged=e},i.prototype.OnTextChanging=function(e){e=t.Utility.CheckFunction(e),this.TextChanging=e},i.prototype.OnValueChanged=function(e){e=t.Utility.CheckFunction(e),this.ValueChanged=e},i.prototype.OnMouseDownCallBack=function(e){e=t.Utility.CheckFunction(e),this.MouseDownEvent=e},i.prototype.OnMouseUpCallBack=function(e){e=t.Utility.CheckFunction(e),this.MouseUpEvent=e},i.prototype.OnEditingTextChanged=function(e){e=t.Utility.CheckFunction(e),this.EditingTextChanged=e},i.prototype.IsFocused=function(){try{return document.activeElement===this.GetInputElement()}catch(e){return!1}},i.prototype.GetTextOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&this._getDisplayNullExpression()!==null)return this.GetTextboxValue();var e=this.Format.Fields.GetTextSimpleMode(!1),t=new RegExp("\\"+this.GetPromptChar(),"g");return e=e.replace(t," "),e},i.prototype.GetPostValueOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&this._getDisplayNullExpression()!==null)return this.GetTextboxValue();var e=this.Format.Fields.GetTextSimpleMode(!0),t=new RegExp("\\"+this.GetPromptChar(),"g");return e=e.replace(t," "),e},i.Mask_ImeResponse=!1,i}(N);t.MaskControl=O})(t.input||(t.input={}));var n=t.input})(wijmo||(wijmo={}))});