var wijmo;define(["globalize","./wijmo.wijstringinfo","./wijmo.widget","./wijmo.wijcharex","./wijmo.wijinputcore"],function(){(function(wijmo){(function(input){var Utility=function(){function Utility(){}return Utility.FireEvent=function(e,t,n,r){if(!t)return!1;try{t.call(window,e,n)}catch(i){return!1}return!0},Utility.FindIMControl=function(e){},Utility.ArrayIndexOf=function(e,t){if(e.indeOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Utility.AttachEvent=function(e,t,n,r){e!==null&&e!==undefined&&(e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n))},Utility.AttachFocusEventOfDocument=function(){input.CoreUtility.IsIE8OrBelow()?Utility.AttachEvent(document,"beforeactivate",function(e){Utility.FocusControlUpdate(e)},!0):Utility.AttachEvent(document,"focus",function(e){Utility.FocusControlUpdate(e)},!0)},Utility.FocusControlUpdate=function(e){Utility.PreviousFocusControl=Utility.FocusControl,Utility.FocusControl=e.target||e.srcElement},Utility.ToString=function(e,t,n,r){var i=e+"";if(n!=null){while(i.length<t)r?i+=n:i=n+i;return i}while(i.length<t)i+=e+"";return i},Utility.GetSelectionEndPosition=function(e){if(!input.CoreUtility.IsIE()||input.CoreUtility.IsIE11OrLater()){var t=0;t=e.selectionEnd;if(e.value){var n=e.value.substring(0,t);t=n.GetLength()}var r=0;r=e.selectionStart;if(e.value){var n=e.value.substring(0,r);r=n.GetLength()}return r>t&&(t=r),t}return Utility.GetSelectionStartPosition(e)+document.selection.createRange().text.GetLength()},Utility.GetSelectionStartPosition=function(e){if(e.selectionStart!=null){var t=0;t=e.selectionStart;if(e.value){var n=e.value.substring(0,t);t=n.GetLength()}var r=0;r=e.selectionEnd;if(e.value){var n=e.value.substring(0,r);r=n.GetLength()}return r<t&&(t=r),t}try{var i=e.createTextRange(),s=document.selection.createRange(),o=e.value.GetLength(),u=0,a=o,f=0;while(u<a){f=Math.floor((u+a)/2),i=e.createTextRange();var l=f,n=e.value.Substring(0,f);for(;;){var c=n.IndexOf("\r\n");if(c==-1)break;l--,n=n.Substring(c+2,n.GetLength())}var h=f-l;l=f-h,i.moveStart("character",l);if(i.offsetTop>s.offsetTop)a=f;else if(i.offsetTop<s.offsetTop){if(u==f)return a;u=f}else if(i.offsetLeft>s.offsetLeft)a=f;else{if(!(i.offsetLeft<s.offsetLeft))return e.value.Substring(f-1,f)=="\r"&&f++,f;if(u==f)return a;u=f}}return o}catch(p){return 0}},Utility.GetCursorPosition=function(e,t){if(e==null)return-1;if(!input.CoreUtility.IsIE()||input.CoreUtility.IsIE11OrLater()){var n=0;n=e.selectionStart;if(e.value){var r=e.value.substring(0,n);n=r.GetLength()}return n}var i=0;if(document.selection){e.focus();var s=document.selection.createRange();s.moveStart("character",-e.value.length),i=s.text.length}return i},Utility.GetPasteData=function(e){return Utility.GetDataFromClipboard(e)},Utility.GetDataFromClipboard=function(e){return e==0?Utility.SavedText:window.clipboardData?window.clipboardData.getData("Text"):Utility.CutCopyPasteEventObject!==null&&Utility.CutCopyPasteEventObject.clipboardData!==undefined?Utility.CutCopyPasteEventObject.clipboardData.getData("text"):null},Utility.ClearSelection=function(e){input.CoreUtility.IsIE()&&!input.CoreUtility.IsIE11OrLater()?document.selection.createRange().text!=""&&document.selection.empty():Utility.GetSelectionText(e)!=""&&(e.selectionStart=e.value.length,e.selectionEnd=e.selectionStart)},Utility.GetSelectionText=function(e){if(e.selectionStart!=null)return e.value.substring(e.selectionStart,e.selectionEnd);if(document.selection!=null)return document.selection.createRange().text;if(document.activeElement!==null){var e=document.activeElement,t=e.selectionStart,n=e.selectionEnd;return e.value.substring(t,n)}return""},Utility.FireSystemEvent=function(e,t){if(input.CoreUtility.IsIE())e.fireEvent(t);else{var n=document.createEvent("HTMLEvents");n.initEvent(t.substring(2,t.length),!0,!0),e.dispatchEvent(n)}},Utility.GetTextBoxScrollWidth=function(e,t){return input.CoreUtility.MeasureText(e.value,e).Width},Utility.CheckInt=function(e,t,n){var r=parseInt(e);if(isNaN(r))throw"value is invalid";if(r<t||r>n)throw e+" is out of range, should between "+t+" and "+n;return r},Utility.CheckFloat=function(e,t,n){var r=parseFloat(e);if(isNaN(r))throw"value is invalid";if(e<t||e>n)throw e+" is out of range, should between "+t+" and "+n;return r},Utility.CheckDate=function(e,t,n){if(!(e instanceof Date))throw"Type is invalid";if(isNaN(e))throw"Date is a invalid date";if(n!=undefined)if(e<t||e>n)throw e+" is out of range, should between "+t+" and "+n},Utility.CheckBool=function(e){return typeof e=="string"&&e.toLowerCase()==="true"?!0:e==1},Utility.CheckFunction=function(fun){if(fun===undefined||fun===null)return null;if(typeof fun=="string"){fun=Utility.Trim(fun);if(fun.length==0)return null;try{eval("fun ="+fun)}catch(e){}}if(typeof fun=="function")return fun;throw"The value is not a valid function"},Utility.GetCheckElement=function(){if(Utility.CheckElement==null){var e=document.createElement("div");Utility.CheckElement=e,e.style.display="none"}return Utility.CheckElement},Utility.CheckString=function(e){e==null&&(e="");if(e!==undefined&&(typeof e=="string"||e instanceof String))return e.toString();throw e+" type is not a string."},Utility.GetCSSLength=function(e){var t=parseInt(e);return isNaN(t)?0:t},Utility.CheckCSSLength=function(e){return e=Utility.CheckInt(e,0,Math.pow(2,31)),parseInt(e)==e&&(e+="px"),Utility.GetCheckElement().style.width="",Utility.GetCheckElement().style.width=e,Utility.GetCheckElement().style.width},Utility.CheckFontSizeValue=function(e){return parseInt(e)==e&&(e+="px"),Utility.GetCheckElement().style.fontSize="",Utility.GetCheckElement().style.fontSize=e,Utility.GetCheckElement().style.fontSize},Utility.CheckColor=function(e){return Utility.GetCheckElement().style.backgroundColor="",Utility.GetCheckElement().style.backgroundColor=e,Utility.GetCheckElement().style.backgroundColor},Utility.CheckImageUrl=function(e){return Utility.CheckString(e)},Utility.GetCssImageUrl=function(e){return e.startWith('url("')?e=e.substring(5,e.length-2):e.startWith("url(")&&(e=e.substring(4,e.length-1)),e},Utility.CheckCssImageUrl=function(e){return e.length>0&&!e.startWith("url(")&&(e="url("+e+")"),Utility.GetCheckElement().style.backgroundImage="",Utility.GetCheckElement().style.backgroundImage=e,Utility.GetCheckElement().style.backgroundImage},Utility.CheckEnum=function(e,t){for(var n in e)if(e[n]==t||e[n]==t.toLowerCase())return e[n];throw"Enum value is invalid"},Utility.CheckChar=function(e){e=Utility.CheckString(e);if(e.length!==1)throw"Invalid value";return e},Utility.GetMultipleStringEnum=function(e){var t=e.split(" ");return t.sort(),t.join(",")},Utility.CheckMultipleStringEnum=function(e,t){var n=t.split(","),r=[];for(var i=0;i<n.length;i++)r.push(Utility.CheckEnum(e,Utility.Trim(n[i])));return r.join(" ")},Utility.EncodingToHTML=function(e){if(e.IndexOf("&")!=-1){var t=e,n="";while(t.IndexOf("&")!=-1){var r=t.IndexOf("&");t=t.replace("&","&amp;"),n+=t.Substring(0,r+5),t=t.Substring(r+5,t.GetLength())}t.IndexOf("&")==-1&&t!=""&&(n+=t),e=n}while(e.IndexOf(" ")!=-1)e=e.replace(" ","&nbsp;");while(e.IndexOf("<")!=-1)e=e.replace("<","&lt;");while(e.IndexOf(">")!=-1)e=e.replace(">","&gt;");return e},Utility.DecodingFromHTML=function(e){while(e.IndexOf("&nbsp;")!=-1)e=e.replace("&nbsp;"," ");while(e.IndexOf("&lt;")!=-1)e=e.replace("&lt;","<");while(e.IndexOf("&gt;")!=-1)e=e.replace("&gt;",">");if(e.IndexOf("&amp;")!=-1){var t=e,n="";while(t.IndexOf("&amp;")!=-1){var r=t.IndexOf("&amp;");t=t.replace("&amp;","&"),n+=t.Substring(0,r+1),t=t.Substring(r+1,t.GetLength())}t.IndexOf("&amp;")==-1&&t!=""&&(n+=t),e=n}return e},Utility.IsStandCompliantModeOn=function(){return input.CoreUtility.IsIE()?document.compatMode=="CSS1Compat":document.compatMode=="CSS1Compat"||document.compatMode=="BackCompat"},Utility.GetPageZoomRate=function(){if(input.CoreUtility.IsIE8())return screen.deviceXDPI/screen.logicalXDPI;var e=document.getElementById("gcsh_standard_control_for_get_normal_position");if(typeof e!="undefined"&&e!=null)return document.getElementById("gcsh_standard_control_for_get_normal_position").offsetLeft/100;var t=document.createElement("div");return document.body.appendChild(t),t.id="gcsh_standard_control_for_get_normal_position",t.style.visibility="hidden",t.style.left="100px",t.style.top="1px",t.style.width="1px",t.style.height="1px",t.style.position="absolute",document.getElementById("gcsh_standard_control_for_get_normal_position").offsetLeft/100},Utility.GetElementPosition=function(e){if(input.CoreUtility.IsIE()||input.CoreUtility.chrome||input.CoreUtility.safari){if(input.CoreUtility.IsIE8OrLater()){var t=Utility.GetElementPositionForIE8(e);if(t.Left==0&&t.Top==0){var n=Utility.GetElementPositionForFireFox(e);return n}return t}var r=Utility.GetElementPositionForIE(e);return{Left:r.Left,Top:r.Top}}return Utility.GetElementPositionForFireFox(e)},Utility.GetElementPositionForIE8=function(e){var t=e;typeof e=="string"&&(t=document.getElementById(e));var n=0,r=0;if(t==null||t.self||t.nodeType===9)return{Left:r,Top:n};var i=t.getBoundingClientRect();if(!i)return{Left:r,Top:n};var s=t.ownerDocument.documentElement;r=i.left+s.scrollLeft,n=i.top+s.scrollTop;try{var o=t.ownerDocument.parentWindow.frameElement||null;if(o){var u=o.frameBorder==="0"||o.frameBorder==="no"?2:0;r+=u,n+=u}}catch(a){}return{Left:r,Top:n}},Utility.GetElementPositionForIE=function(e){var t=e;typeof e=="string"&&(t=document.getElementById(e));var n=0,r=0;if(t==null)return{Left:r,Top:n};if(t.offsetParent)while(t.offsetParent!=null){var i=t.offsetParent,s=i.tagName.toLowerCase();s!="table"&&s!="body"&&s!="html"&&i.clientTop&&i.clientLeft&&(r+=i.clientLeft,n+=i.clientTop);if(input.CoreUtility.IsIE7()&&i.style.position.toLowerCase()=="relative"){r+=t.offsetLeft-t.scrollLeft,n+=t.offsetTop;var o=Utility.GetPageZoomRate();if(o==1){var u=t.offsetTop;for(var a=0;a<i.children.length;a++){var f=i.children[a];if(f==t)break;if(f.offsetTop){u=f.offsetTop;break}}n-=u}}else if(Utility.IsStandCompliantModeOn()&&input.CoreUtility.IsIE7()&&(t.style.position.toLowerCase()=="absolute"||t.style.position.toLowerCase()=="relative")){var o=Utility.GetPageZoomRate();n+=(t.offsetTop-t.scrollTop)/o,r+=(t.offsetLeft-t.scrollLeft)/o}else t.tagName.toLowerCase()=="input"&&t.type.toLowerCase()=="text"||t.tagName.toLowerCase()=="textarea"?(n+=t.offsetTop,r+=t.offsetLeft):(n+=t.offsetTop-t.scrollTop,r+=t.offsetLeft-t.scrollLeft);t=i}else t.left&&t.top?(r+=t.left,n+=t.top):(t.x&&(r+=t.x),t.y&&(n+=t.y));if(t.style.position.toLowerCase()!="relative"&&t.style.position.toLowerCase()!="absolute"&&t.tagName.toLowerCase()=="body"&&Utility.IsStandCompliantModeOn())if(!input.CoreUtility.IsIE7())n+=t.offsetTop,r+=t.offsetLeft;else{var l=parseInt(t.currentStyle.marginTop),c=parseInt(t.currentStyle.marginLeft);isNaN(l)&&(l=0),isNaN(c)&&(c=0),n+=l,r+=c}return{Left:r,Top:n}},Utility.GetElementPositionForFireFox=function(e){var t=e;typeof e=="string"&&(t=document.getElementById(e));var n=0,r=0,i=0,s=0;if(t==null)return{Left:r,Top:n};if(t.offsetParent)while(t.offsetParent!=null){var o=t.offsetParent.tagName.toLowerCase();o!="table"&&o!="body"&&o!="html"&&o!="div"&&t.offsetParent.clientTop&&t.offsetParent.clientLeft&&(r+=t.offsetParent.clientLeft,n+=t.offsetParent.clientTop),n+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent}else t.left&&t.top?(r+=t.left,n+=t.top):(t.x&&(r+=t.x),t.y&&(n+=t.y));t=e,typeof e=="string"&&(t=document.getElementById(e));if(t.parentElement)while(t.parentElement!=null&&t.tagName.toLowerCase()!="html")s+=t.scrollTop,i+=t.scrollLeft,t=t.parentElement;return n-=s,r-=i,t.style.position.toLowerCase()!="relative"&&t.style.position.toLowerCase()!="absolute"&&t.tagName.toLowerCase()=="body"&&Utility.IsStandCompliantModeOn()&&(n+=t.offsetTop,r+=t.offsetLeft),{Left:r,Top:n}},Utility.GetOSDefaultFontFamily=function(){switch(input.CoreUtility.GetClientOS().toLowerCase()){case"winxp":return"MS UI Gothic";case"vista":return"\ufffd\u1964\ufffd\ua96a";case"win7":return"\ufffd\u1964\ufffd\ua96a";case"win8":return"Meiryo UI";case"win2003":return"MS UI Gothic";case"win2000":return"MS UI Gothic"}return"MS UI Gothic"},Utility.IsTouchSupport=function(){return window.navigator.userAgent.toLowerCase().indexOf("touch")!=-1},Utility.DisabledHoldVisual=function(e){e!==null&&e!==undefined&&Utility.IsTouchSupport()&&input.CoreUtility.IsIE10OrLater()&&(e.addEventListener("MSHoldVisual",function(e){e.preventDefault()},!1),e.addEventListener("MSGestureHold",function(e){e.preventDefault()},!1),e.addEventListener("contextmenu",function(e){e.preventDefault()},!1))},Utility.IsFocusFromIMControl=function(e,t){try{var n=t.fromElement;while(n!=null){if(n.id==e||n.id==e+this.Hold+"_DropDownObj"||n.id==e+"_DropDown_Container"||n.id==e+"_ContextMenu"||n.id==e+"_HistoryList"||n.id==e+"_EditField"||n.id==e+"_BorderContainer"||n.id==e+"_DropDown_EditField")return!0;n=n.parentNode}return!1}catch(r){return!1}},Utility.IsFocusToIMControl=function(e,t){try{var n=t.toElement;while(n!=null){if(n.id==e||n.id==e+this.Hold+"_DropDownObj"||n.id==e+"_DropDown_Container"||n.id==e+"_ContextMenu"||n.id==e+"_HistoryList"||n.id==e+this.Hold+"_DropDownObj_PopupMonth"||n.id==e+"_EditField"||n.id==e+"_BorderContainer"||n.id==e+"_DropDown_EditField")return!0;n=n.parentNode}return!1}catch(r){return!1}},Utility.Trim=function(e){if(e=="")return"";var t=0,n=0;for(var r=0;r<e.length;r++)if(e.CharAt(r)!=" "&&e.CharAt(r)!="\ufffd\ufffd"){t=r;break}for(var r=e.length-1;r>=0;r--)if(e.CharAt(r)!=" "&&e.CharAt(r)!="\ufffd\ufffd"){n=r+1;break}try{var i=e.Substring(t,n);return i}catch(s){return e}},Utility.GetTouchPath=function(e,t){return e===-1||t===-1?"Error":e>t?e-t>20?"ToTop":"NotMove":e<t?t-e>20?"ToBottom":"NotMove":"NotMove"},Utility.IsJapan=function(){return navigator.userLanguage?navigator.userLanguage.indexOf("ja")!=-1:navigator.language?navigator["language"].indexOf("ja")!=-1:!1},Utility.CreateStyleElement=function(e){var t=document.createElement("style");return t.id=e,t.type="text/css",t},Utility.CreateClassStyle=function(e){return Utility.CreateSelectorStyle("."+e)},Utility.CreateSelectorStyle=function(e){var t=document.getElementById("tableStyle");t==null&&(t=this.CreateStyleElement("tableStyle"),document.body.appendChild(t));var n=t.sheet||t.styleSheet,r=n.cssRules||n.rules;return n.insertRule?n.insertRule(e+"{ }",r.length):n.addRule(e,"{ }",r.length),r.item(r.length-1)},Utility.SetSelection=function(e,t,n,r){$(e).wijtextselection(Math.min(t,n),Math.max(t,n))},Utility.PreventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Utility.CancelBubble=function(e){e.cancelBubble!==undefined?e.cancelBubble=!0:e.stopPropagation()},Utility.DragDrop=function(e){try{e.dragDrop(!0)}catch(t){}},Utility.GetMouseButton=function(e){var t=-1,n=input.CoreUtility.IsIE8OrBelow()?1:0;return e.button==n?t=0:e.button==1?t=1:e.button==2&&(t=2),t},Utility.GetMouseWheelValue=function(e,t){return input.CoreUtility.IsFireFox4OrLater()?-t.detail/3:(t.wheelDelta>=120?e++:t.wheelDelta<=-120&&e--,e)},Utility.SetCopy=function(e,t){var n;try{if(e==null||e==""){document.selection&&(n=document.selection.createRange().text);if(n=="")return}}catch(r){}e!=null&&(n=e),Utility.CopyDataToClipBoard(n,t)},Utility.CopyDataToClipBoard=function(e,t){if(t==0){Utility.SavedText=e;return}window.clipboardData?setTimeout(function(){try{window.clipboardData.setData("Text",e)}catch(t){}},0):Utility.CutCopyPasteEventObject!==null&&Utility.CutCopyPasteEventObject.clipboardData!==undefined&&Utility.CutCopyPasteEventObject.clipboardData.setData("text",e)},Utility.SetZoomStyle=function(e,t,n){if(e===undefined||e===null)return;var r="top left";n===2&&(r="top right"),input.CoreUtility.firefox?(e.style.MozTransformOrigin=t===""?"":r,e.style.MozTransform=t===""?"":"scale("+t+")",e.setAttribute("ZoomValue",t)):input.CoreUtility.chrome||input.CoreUtility.safari?t!==""?(e.style.MozTransform="scale("+t+")",e.style.WebkitTransform="scale("+t+")",e.style.webkitTransformOrigin=r):(e.style.MozTransform="",e.style.WebkitTransform="",e.style.WebkitTransformOrigin=""):input.CoreUtility.IsIE9OrLater()?t!==""?(e.style.msTransform="scale("+t+")",e.style.msTransformOrigin=r):(e.style.msTransform="",e.style.msTransformOrigin=""):e.style.zoom=t},Utility.FilterText=function(e,t){if(t.GetLength()==0)return"";var n="",r=0,i=0;for(r=0;r<t.GetLength();r++){var s=!1;for(i=0;i<e.GetLength();i++)t.Substring(r,r+1)==e.Substring(i,i+1)&&(s=!0);s==1&&(n+=t.Substring(r,r+1))}return n},Utility.IndexOfAny=function(e,t,n){if(n>=e.length)return-1;for(var r=n;r<e.length;r++)for(var i=0;i<t.length;i++)if(e.charAt(r)==t[i])return r;return-1},Utility.IdCounter=0,Utility.EditFieldSuffix="_EidtField",Utility.MaskValChar="\ufeff",Utility.Hold="g-C2",Utility}();input.Utility=Utility,function(e){e[e.None=0]="None",e[e.Click=1]="Click",e[e.ContextMenu=2]="ContextMenu",e[e.ClientEvent=3]="ClientEvent",e[e.KeyExit=4]="KeyExit",e[e.Default=5]="Default",e[e.SpinButton=6]="SpinButton",e[e.DropDown=7]="DropDown",e[e.ImeInput=8]="ImeInput",e[e.Left=9]="Left",e[e.Right=10]="Right",e[e.DragDrop=11]="DragDrop"}(input.FocusType||(input.FocusType={}));var FocusType=input.FocusType;(function(e){e[e.Default=0]="Default",e[e.Era=1]="Era",e[e.Year=2]="Year",e[e.Month=3]="Month",e[e.Day=4]="Day",e[e.AMPM=5]="AMPM",e[e.Hour=6]="Hour",e[e.Minute=7]="Minute",e[e.Second=8]="Second"})(input.DateCursorPosition||(input.DateCursorPosition={}));var DateCursorPosition=input.DateCursorPosition;(function(e){e[e.NoControl=0]="NoControl",e[e.Filter=1]="Filter",e[e.Cut=2]="Cut"})(input.CrLfMode||(input.CrLfMode={}));var CrLfMode=input.CrLfMode;(function(e){e[e.IncludeLiterals=0]="IncludeLiterals",e[e.ExcludeLiterals=1]="ExcludeLiterals"})(input.ClipContent||(input.ClipContent={}));var ClipContent=input.ClipContent;(function(e){e[e.Insert=0]="Insert",e[e.Overwrite=1]="Overwrite",e[e.FixedInsert=2]="FixedInsert",e[e.FixedOverwrite=3]="FixedOverwrite"})(input.EditMode||(input.EditMode={}));var EditMode=input.EditMode;(function(e){e[e.Always=1]="Always",e[e.PostDisplay=2]="PostDisplay",e[e.PreDisplay=3]="PreDisplay"})(input.ShowLiterals||(input.ShowLiterals={}));var ShowLiterals=input.ShowLiterals;(function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Both=3]="Both"})(input.ExitOnLeftRightKey||(input.ExitOnLeftRightKey={}));var ExitOnLeftRightKey=input.ExitOnLeftRightKey;(function(e){e[e.None=0]="None",e[e.Field=1]="Field",e[e.All=2]="All"})(input.HighlightText||(input.HighlightText={}));var HighlightText=input.HighlightText;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(input.DropDownAlign||(input.DropDownAlign={}));var DropDownAlign=input.DropDownAlign;(function(e){e[e.Automatic=0]="Automatic",e[e.Fixed=1]="Fixed"})(input.ScrollBarMode||(input.ScrollBarMode={}));var ScrollBarMode=input.ScrollBarMode;(function(e){e[e.None=0]="None",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical",e[e.Both=3]="Both"})(input.ScrollBars||(input.ScrollBars={}));var ScrollBars=input.ScrollBars;(function(e){e[e.Normal=0]="Normal",e[e.Hover=1]="Hover",e[e.Pressed=2]="Pressed",e[e.Focused=4]="Focused",e[e.Disabled=8]="Disabled"})(input.ControlStatus||(input.ControlStatus={}));var ControlStatus=input.ControlStatus;(function(e){e[e.Tab=1]="Tab",e[e.ShiftTab=2]="ShiftTab",e[e.NextControl=3]="NextControl",e[e.PreviousControl=4]="PreviousControl",e[e.Right=5]="Right",e[e.Left=6]="Left",e[e.CtrlRight=7]="CtrlRight",e[e.CtrlLeft=8]="CtrlLeft",e[e.CharInput=9]="CharInput"})(input.ExitKeys||(input.ExitKeys={}));var ExitKeys=input.ExitKeys;(function(e){e[e.Control=0]="Control",e[e.Field=1]="Field"})(input.TabAction||(input.TabAction={}));var TabAction=input.TabAction;(function(e){e[e.BackSpace=8]="BackSpace",e[e.Tab=9]="Tab",e[e.Clear=12]="Clear",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Pause=19]="Pause",e[e.Caps_Lock=20]="Caps_Lock",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Select=41]="Select",e[e.Print=42]="Print",e[e.Execute=43]="Execute",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Help=47]="Help",e[e.equalbraceright=48]="equalbraceright",e[e.exclamonesuperior=49]="exclamonesuperior",e[e.quotedbltwosuperior=50]="quotedbltwosuperior",e[e.sectionthreesuperior=51]="sectionthreesuperior",e[e.dollar=52]="dollar",e[e.percent=53]="percent",e[e.ampersand=54]="ampersand",e[e.slashbraceleft=55]="slashbraceleft",e[e.parenleftbracketleft=56]="parenleftbracketleft",e[e.parenrightbracketright=57]="parenrightbracketright",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.KP_0=96]="KP_0",e[e.KP_1=97]="KP_1",e[e.KP_2=98]="KP_2",e[e.KP_3=99]="KP_3",e[e.KP_4=100]="KP_4",e[e.KP_5=101]="KP_5",e[e.KP_6=102]="KP_6",e[e.KP_7=103]="KP_7",e[e.KP_8=104]="KP_8",e[e.KP_9=105]="KP_9",e[e.KP_Multiply=106]="KP_Multiply",e[e.KP_Add=107]="KP_Add",e[e.KP_Separator=108]="KP_Separator",e[e.KP_Subtract=109]="KP_Subtract",e[e.KP_Decimal=110]="KP_Decimal",e[e.KP_Divide=111]="KP_Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.F13=124]="F13",e[e.F14=125]="F14",e[e.F15=126]="F15",e[e.F16=127]="F16",e[e.F17=128]="F17",e[e.F18=129]="F18",e[e.F19=130]="F19",e[e.F20=131]="F20",e[e.F21=132]="F21",e[e.F22=133]="F22",e[e.F23=134]="F23",e[e.F24=135]="F24",e[e.Num_Lock=136]="Num_Lock",e[e.Scroll_Lock=137]="Scroll_Lock"})(input.Key||(input.Key={}));var Key=input.Key,BaseUIProcess=function(){function e(){this.isMulSelected=!1,this.isDblClick=!1,this.isTriClick=!1,this.isOverWrite=!1,this.moveFocusExitOnLastChar=!1}return e.prototype.GetInputElement=function(){return this.Owner.GetInputElement()},e.prototype.GetElementId=function(){return this.Owner.GetInputElement().id},e.prototype.GetShowLiterals=function(){return this.Owner.GetShowLiterals!==undefined?this.Owner.GetShowLiterals():1},e.prototype.SetCursorPositionAndSelection=function(e,t,n,r){var i={};if(e==1||e==2)i.SelectionStart=0,i.SelectionEnd=t.GetLength();return i},e.prototype.Clear=function(){return null},e.prototype.Focus=function(e){var t=e.Text,n=e.DisplayText,r=e.FocusType,i=e.Element,s=e.HighlightText,o=e.CursorPosition,u={};this.isMulSelected=!1,r==1&&(u.SelectionStart=Utility.GetCursorPosition(i),u.SelectionEnd=u.SelectionStart),u.Text=t,u.SelectionStart==-1?(u.SelectionStart=0,u.SelectionEnd=0):u.SelectionStart>u.Text.GetLength()?(u.SelectionStart=u.Text.GetLength(),u.SelectionEnd=u.Text.GetLength()):u.SelectionStart==n.GetLength()&&(u.SelectionStart=u.Text.GetLength(),u.SelectionEnd=u.Text.GetLength()),r==9&&o==0?(u.SelectionStart=0,u.SelectionEnd=0):r==10&&o==0&&(u.SelectionStart=u.Text.GetLength(),u.SelectionEnd=u.Text.GetLength());if(s==0&&o==0)return u;if(r==2)return u;var a=u.SelectionStart==null?e.SelectionStart:u.SelectionStart,f=this.SetCursorPositionAndSelection(s,u.Text,o,a);return f!=null&&(u.SelectionStart=f.SelectionStart,u.SelectionEnd=f.SelectionEnd,u.IsSelectionDeterminedByHighlightText=!0),u},e.prototype.LoseFocus=function(e){},e.prototype.MouseDown=function(e){var t={};return this.isTriClick=!1,this.isDblClick&&!Utility.GrapeCityTimeout&&e==0&&(this.isTriClick=!0,t=this.SelectAll()),this.isDblClick=!1,t},e.prototype.MouseUp=function(e,t,n,r,i){var s={};return this.isTriClick?(Utility.SetSelection(e,t,n),null):i?(s=this.SelectAll(),Utility.SetSelection(e,s.SelectionStart,s.SelectionEnd),s):(s.SelectionStart=t,s.SelectionEnd=n,r==0&&(s.SelectionStart=Utility.GetSelectionStartPosition(e),s.SelectionEnd=Utility.GetSelectionEndPosition(e)),s.SelectionStart!=s.SelectionEnd?this.isMulSelected=!0:this.isMulSelected=!1,s)},e.prototype.ProcessShortcutKey=function(e,t,n,r){var i={};switch(e){case"Clear":if(t)return i.System=!1,i;return this.Clear();case"NextControl":var s=this.MoveControl(this.GetInputElement(),!0,!1,"NextControl");return s!=null&&(i.EventInfo=s.EventInfo,i.FocusType=s.FocusType,i.FocusExit=!0),i.System=!1,i;case"PreviousControl":var s=this.MoveControl(this.GetInputElement(),!1,!1,"PreviousControl");return s!=null&&(i.EventInfo=s.EventInfo,i.FocusType=s.FocusType,i.FocusExit=!0),i.System=!1,i;case"NextField":return i=this.MoveField(n,!0),i;case"PreviousField":return i=this.MoveField(n,!1),i;case"NextField/NextControl":var i=this.MoveFieldAndControl(n,!0);return i;case"PreviousField/PreviousControl":var i=this.MoveFieldAndControl(n,!1);return i}},e.prototype.ProcessCharKeyInput=function(e,t,n,r,i){return null},e.prototype.ProcessNavigatorKeyInput=function(e,t,n,r,i,s,o,u){var a={};switch(e){case 45:return t==2?this.isOverWrite=!1:t==3?this.isOverWrite=!0:this.isOverWrite=!this.isOverWrite,a.Overwrite=this.isOverWrite,a.System=!1,this.Format.Fields.fieldCount==0&&(a.System=!0),a;case 8:a=this.ProcessBackSpace(i,s,r),a.System=!1;break;case 46:a=this.ProcessDelete(i,s,r),a.System=!1;break;case 196643:case 196644:case 196645:case 196647:case 65569:case 196641:case 65570:case 196642:if(e==65569||e==196641)e=196644;else if(e==65570||e==196642)e=196643;a.SelectionEnd=this.GetCaretPosition(s,e),this.isMulSelected=!0,a.System=!1;break;case 65582:case 65544:if(this.isMulSelected){if(!this.Owner._isSupportClipBoard()){a.System=!0;break}a=this.Cut(n,i,s)}else a=this.ProcessBackSpace(i,s);a.System=!1;break;case 65581:case 131158:if(this.Owner._isSupportClipBoard()){var f=Utility.GetPasteData(this.Owner?this.Owner.GetUseClipboard():!0);a=this.Paste(i,s,f,u),a.System=!1}else a.System=!0;break;case 65571:case 65572:case 65573:case 65575:case 65574:case 65576:this.isMulSelected=!0,a.SelectionEnd=this.GetCaretPosition(s,e),a.System=!1;break;case 131139:case 131117:this.Owner._isSupportClipBoard()?(this.Copy(n,i,s),a.System=!1):a.System=!0;break;case 131118:this.isMulSelected||(s=this.GetCaretPosition(s,e)),a=this.ProcessDelete(i,s),a.System=!1;break;case 131080:case 196616:this.isMulSelected||(s=this.GetCaretPosition(s,e)),a=this.ProcessBackSpace(i,s),a.System=!1;break;case 131137:a=this.SelectAll(),a.System=!1;break;case 131160:this.Owner._isSupportClipBoard()?(a=this.Cut(n,i,s),a.System=!1):a.System=!0;break;case 131162:a=this.Undo(),a.System=!1;break;case 131109:case 37:if(i==0&&(o==3||o==1)){var l=e==37?"Left":"CtrlLeft",c=this.MoveControl(this.GetInputElement(),!1,!0,l);return c!=null&&(a.EventInfo=c.EventInfo,a.FocusType=c.FocusType,a.FocusExit=!0),a};case 131108:case 131110:case 36:case 33:case 131105:if(e==33||e==131105)e=131108;a=this.ProcessLeftDirection(i,s,e),a.System=!1;break;case 131111:case 39:if(i==r.GetLength()&&(o==3||o==2)){var l=e==39?"Right":"CtrlRight",c=this.MoveControl(this.GetInputElement(),!0,!0,l);return c!=null&&(a.EventInfo=c.EventInfo,a.FocusType=c.FocusType,a.FocusExit=!0),a};case 131107:case 131112:case 35:case 34:case 131106:if(e==34||e==131106)e=131107;a=this.ProcessRightDirection(i,s,e),a.System=!1;break;default:a=null}return a},e.prototype.ProcessLeftDirection=function(e,t,n){},e.prototype.ProcessRightDirection=function(e,t,n){},e.prototype.KeyDown=function(e){var t=e.KeyCode,n=e.SelectionStart,r=e.SelectionEnd,i=e.Text,s=e.EditMode,o=e.KeyAction,u=e.ReadOnly,a=e.ClipContent,f=e.ExitOnLastChar,l=e.ExitOnLeftRightKey,c=e.TabAction,h={};switch(s){case 0:this.isOverWrite=!1;break;case 1:this.isOverWrite=!0;break;case 2:this.isOverWrite=!1;break;case 3:this.isOverWrite=!0}n!=r?this.isMulSelected=!0:this.isMulSelected=!1;switch(t){case 9:return h=this.ProcessTabKey(r,!0,c),h;case 65545:return h=this.ProcessTabKey(r,!1,c),h}if(o!=null)return this.ProcessShortcutKey(o,u,r,n);if(u){if(t==27||t==262182||t==262184||t==38||t==40)return null;if(t!=131117&&t!=131139&&t!=9&&t!=65545&&t!=131081&&t!=196617&&t!=131137&&t!=37&&t!=39&&t!=38&&t!=40)return h}if(this.Format.Fields.fieldCount==0){switch(t){case 45:return s==2?this.isOverWrite=!1:s==3?this.isOverWrite=!0:this.isOverWrite=!this.isOverWrite,h.Overwrite=this.isOverWrite,this.Format.Fields.fieldCount==0&&(h.System=!0),h;case 37:case 131109:if(n==0&&(l==3||l==1)){var p=t==37?"Left":"CtrlLeft",d=this.MoveControl(this.GetInputElement(),!1,!0,p);return d!=null&&(h.EventInfo=d.EventInfo,h.FocusType=d.FocusType,h.FocusExit=!0),h}break;case 39:case 131111:if(n==i.GetLength()&&(l==3||l==2)){var p=t==39?"Right":"CtrlRight",d=this.MoveControl(this.GetInputElement(),!0,!0,p);return d!=null&&(h.EventInfo=d.EventInfo,h.FocusType=d.FocusType,h.FocusExit=!0),h}}return null}var v=this.ProcessCharKeyInput(t,n,r,f,i);return v!=null?v:(h=this.ProcessNavigatorKeyInput(t,s,a,i,n,r,l,f),h)},e.prototype.KeyPress=function(e){},e.prototype.KeyUp=function(e){},e.prototype.ShowContextMenu=function(e,t){var n={};return t==""&&(n.SelectionStart=Utility.GetCursorPosition(e),n.SelectionEnd=n.SelectionStart),n},e.prototype.SelectStart=function(e,t,n){var r={};return t==""&&!this.isTriClick&&!this.isDblClick&&n!=-1&&(r.SelectionStart=Utility.GetCursorPosition(e),r.SetFalse=!0),r},e.prototype.DoubleClick=function(e){var t={},n=this.Format.Fields.GetFieldIndexByPos(e),r=this.Format.Fields.GetFieldRange(n.index);return t.SelectionStart=r.start,t.SelectionEnd=r.length+r.start,Utility.GrapeCityTimeout=!1,this.isDblClick=!0,this.isMulSelect=!0,setTimeout(function(){Utility.GrapeCityTimeout=!0},300),t},e.prototype.Undo=function(){},e.prototype.Cut=function(e,t,n){var r={};return t==n?r:(this.FireClientEvent("OnBeforeCut"),this.Copy(e,t,n),r=this.ProcessDelete(t,n),this.FireClientEvent("OnCut"),r)},e.prototype.Copy=function(t,n,r){var i=null,s=!0;if(t==1){var o=Math.abs(n-r),n=Math.min(n,r);if(o==0)return;i=this.Format.Fields.GetNonLiteralsText(n,o)}else!input.CoreUtility.IsIE()||input.CoreUtility.IsIE11OrLater()?i=Utility.GetSelectionText(this.Owner.GetInputElement()):i=document.selection.createRange().text;this.Owner&&(i=e.UpdateCrLfString(i,this.Owner.GetAcceptsCrlf()),s=this.Owner.GetUseClipboard()),input.CoreUtility.IsIE()?setTimeout(function(){Utility.SetCopy(i,s)}):Utility.SetCopy(i,s)},e.prototype.Paste=function(e,t,n,r){},e.prototype.SelectAll=function(){var e={SelectionStart:0,SelectionEnd:0};e.SelectionStart=0;var t;return this.ID&&(t=this.GetShowLiterals()),t=="PostDisplay"||t=="PreDisplay"?e.SelectionEnd=Utility.FindIMControl(this.ID).GetText().GetLength():e.SelectionEnd=this.Format.Fields.GetLength(),this.isMulSelected=!0,e},e.prototype.FireEvent=function(e,t,n,r){if(Utility.FireEvent(e,t,n,r))return 3},e.prototype.ProcessCharKey=function(e,t,n,r){var i={},s=Math.min(e,t),o=Math.abs(t-e),u={};i.start=s,i.success=!1;if(this.Format.Fields.GetFieldIndex(s).index==-1){var a={};return a.Name=this.Owner.InvalidInputEvent,a.Args=null,a.Type="invalidInput",i.EventInfo=a,i}var f=n.toString();if(o==0&&!this.isOverWrite)u=this.Format.Fields.Insert(s,f,!1);else if(o==0)if(s==this.Format.Fields.GetLength())u=this.Format.Fields.Insert(s,f,!1);else{var l=!1,c=this.Format.Fields.GetFieldIndexByPos(s),h=c.index,p=c.offset,d=this.Format.Fields.GetFieldRange(h);this.Format.Fields.GetFieldByIndex(h).fieldLabel=="PromptField"?s-p+d.length==this.Format.Fields.GetLength()?l=!1:(l=!0,o=d.length-p+1):(l=!0,o=n.GetLength());if(this.Format.Fields.GetFieldIndexByPos(s+o).index==-1){var a={};return a.Name=this.Owner.InvalidInputEvent,a.Args=null,a.Type="invalidInput",i.EventInfo=a,i}l?u=this.Format.Fields.Replace(s,o,f,!1):u=this.Format.Fields.Insert(s,f,!1)}else u=this.Format.Fields.Replace(s,o,f,!1);s=u.cursorPos;if(u.text!=""){var a={};return a.Name=this.Owner.InvalidInputEvent,a.Args=null,a.Type="invalidInput",i.EventInfo=a,i.start=s,i.success=!1,i}if(r==1)if(s==this.Format.Fields.GetLength())this.moveFocusExitOnLastChar=!0;else{var c=this.Format.Fields.GetFieldIndexByPos(s),h=c.index,p=c.offset;h==this.Format.Fields.fieldCount-1&&p==0&&this.Format.Fields.GetFieldByIndex(h).fieldLabel=="PromptField"&&(this.moveFocusExitOnLastChar=!0)}return i.start=s,i.success=!0,i},e.prototype.ProcessDeleteKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};if(n==this.Format.Fields.GetLength()&&r==0)return i;var s,o=this.Format.Fields.GetFieldIndexByPos(n);s=o.index;if(s==-1)return i;if(r==0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel=="PromptField")return i;n=this.Format.Fields.Delete(n,1).cursorPos,i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var u,a;o=this.Format.Fields.GetFieldIndexByPos(n+r),u=o.offset,a=o.index;if(a==-1)return i;u==0&&a--;if(s==a&&this.Format.Fields.GetFieldByIndex(s).fieldLabel=="PromptField")return i;var f=this.Format.Fields.Delete(n,r);if(!f.isSucceed)return i;i.SelectionStart=f.cursorPos,i.SelectionStart==0&&this.Format.Fields.GetFieldByIndex(0).fieldLabel=="PromptField"&&(i.SelectionStart=this.Format.Fields.GetFieldByIndex(0).GetLength()),i.SelectionEnd=i.SelectionStart;var l,c,h=this.Format.Fields.GetFieldIndexByPos(i.SelectionStart);c=h.index,l=h.offset,l!=0&&this.Format.Fields.GetFieldByIndex(c).fieldLabel=="PromptField"&&(i.SelectionStart=i.SelectionStart-l+this.Format.Fields.GetFieldByIndex(c).GetLength(),i.SelectionEnd=i.SelectionStart)}return i},e.prototype.ProcessBackSpace=function(e,t,n){},e.prototype.ProcessDelete=function(e,t,n){},e.prototype.GetCaretPosition=function(e,t,n,r,i){var s=this.Format.Fields,o=s.GetFieldIndexByPos(e),u=o.index,a=o.offset,f,l=0;switch(t){case 36:case 65572:case 65574:return e<=n?0:n;case 35:case 65571:case 65576:return e>=r?s.GetLength():r;case 37:if(e==0)return 0;s.GetFieldByIndex(u).fieldLabel==i?a>0?e-=a:e--:a==0&&s.GetFieldByIndex(u-1).fieldLabel==i?e-=s.GetFieldRange(u-1).length:e--;break;case 39:if(e==s.GetLength())return e;if(s.GetFieldByIndex(u).fieldLabel==i){f=s.GetFieldRange(u),n=f.start,r=n+f.length;if(e<r)return r}else e++;break;case 131109:if(e==0||u==0)return 0;if(s.GetFieldByIndex(u).fieldLabel==i)f=s.GetFieldRange(u-1),e=f.start;else{if(a==0){for(l=u-1;l>=0;l--)if(s.GetFieldByIndex(l).fieldLabel!=i)return f=s.GetFieldRange(l),f.start;return 0}e-=a}break;case 196645:if(e==0||u==0)return 0;a==0?(f=s.GetFieldRange(u-1),e=f.start):e-=a;break;case 131111:if(e==s.GetLength()||u==s.fieldCount-1)return s.GetLength();if(s.GetFieldByIndex(u).fieldLabel!=i){for(l=u+1;l<s.fieldCount;l++)if(s.GetFieldByIndex(l).fieldLabel!=i)return f=s.GetFieldRange(l),f.start;return s.GetLength()}f=s.GetFieldRange(u+1),e=f.start;break;case 196647:if(e==s.GetLength()||u==s.fieldCount-1)return s.GetLength();f=s.GetFieldRange(u+1),e=f.start;break;case 131118:return e==s.GetLength()||s.GetFieldByIndex(u).fieldLabel==i?e:(f=s.GetFieldRange(u),f.start+f.length);case 131080:case 196616:if(e==0||s.GetFieldByIndex(u).fieldLabel==i&&u==0)return e;if(s.GetFieldByIndex(u).fieldLabel==i)return s.GetFieldRange(u-1).start;if(a==0){for(l=u-1;l>=0;l--)if(s.GetFieldByIndex(l).fieldLabel!=i)return f=s.GetFieldRange(l),f.start;return e}e-=a;break;case 196643:case 131107:case 131112:return s.GetLength();case 196644:case 131108:case 131110:return 0;case 65573:return e==0?0:--e;case 65575:return e==s.GetLength()?e:++e}return e},e.prototype.CompareShortcut=function(e,t){if(t.toString().IndexOf("|")==-1)return t==e?!0:!1;var n=null;while(n!=-1){n=t.toString().IndexOf("|");var r=t.toString().GetLength();if(t.Substring(0,n==-1?r:n)==e)return!0;t=t.Substring(n+1,r)}return!1},e.prototype.MoveControl=function(e,t,n,r){var i=input.CoreUtility.GetElements(),s=null,o={};if(i.length<2)return null;var u=input.CoreUtility.GetNextFocusableControl(e,i,t);r=="CharInput"||!input.CoreUtility.IsIE()?(Utility.NextID=u,setTimeout(function(){input.CoreUtility.SetElementFocus(u)},0)):input.CoreUtility.SetElementFocus(u);if(n){var a=document.getElementById(u);if(a!=null&&(a.tagName.toLowerCase()=="textarea"||a.type=="text")&&input.CoreUtility.IsIE()){var f=a.createTextRange();if(r=="Left"||r=="CtrlLeft")f.moveStart("character",a.value.length),f.select()}}var l={Key:9};switch(r){case"NextControl":l.Key=3;break;case"PreviousControl":l.Key=4;break;case"Right":l.Key=5;break;case"Left":l.Key=6;break;case"CtrlRight":l.Key=7;break;case"CtrlLeft":l.Key=8;break;case"CharInput":l.Key=9}return s={},s.Name=this.Owner.KeyExitEvent,s.Args=l,s.Type="KeyExit",s!=null&&(o.EventInfo=s),o},e.prototype.MoveField=function(e,t){var n=this.Format.Fields.MoveField(e,t),r={};return n==-1?(r.NextPos=n,r):(r.SelectionStart=n,r.SelectionEnd=n,r)},e.prototype.ProcessTabKey=function(e,t,n){var r={Key:1},i={};t?r.Key=1:r.Key=2;var s={};return s.Name=this.Owner.KeyExitEvent,s.Args=r,s.Type="KeyExit",i.EventInfo=s,i.FocusType=4,i.System=!0,i},e.prototype.MoveFieldAndControl=function(e,t){var n=this.MoveField(e,t);if(n.NextPos!=-1)return n;var r=t?"NextControl":"PreviousControl",i=this.MoveControl(this.GetInputElement(),t,!1,r);return i!=null&&(n.EventInfo=i.EventInfo,n.FocusType=i.FocusType,n.FocusExit=!0),n},e.prototype.DragStart=function(){},e.prototype.DragEnd=function(){},e.prototype.Drop=function(){},e.prototype.DragOver=function(){},e.prototype.GetKeyActionName=function(e,t){if(t==null)return null;var n=t,r=new Array,i=n.IndexOf(","),s=0;if(t!=""){while(i!=-1)r[s++]=n.Substring(0,i),n=n.Substring(i+1,n.GetLength()),i=n.IndexOf(",");r[s++]=n;for(var o=0;o<s;o+=2)if(this.IsKeyCodeContained(e,r[o+1]))return r[o]}return null},e.prototype.IsKeyCodeContained=function(e,t){var n=t,r=n.IndexOf("|");while(r!=-1){if(n.Substring(0,r)==e)return!0;n=n.Substring(r+1,n.GetLength()),r=n.IndexOf("|")}return n==e?!0:!1},e.prototype.FireClientEvent=function(e){},e.prototype.PerformSpin=function(e,t,n){},e.UpdateCrLfString=function(e,t){var n=e;if(e)if(t==1)n=e.replace(new RegExp("[\r\n]","g"),"");else if(t==2){var r=e.split(new RegExp("[\r\n]","g"));r.length>0?n=r[0]:n=""}return n},e.FilterReturnChar=function(e){return e!=null&&(e=e.replace(new RegExp("[\r]","g"),"")),e},e}();input.BaseUIProcess=BaseUIProcess;var InputUIUpdate=function(){function e(e){this.Owner=e}return e.prototype.SetLastClientValues=function(e){},e.prototype.GetText=function(){if(this.Owner.GetInputElement()!=null)return this.Owner.GetInputElement().value},e.prototype.SetText=function(e){if(this.GetText()==null)return;if(this.GetText().replace(/\r\n/g,"\n")==e.replace(/\r\n/g,"\n"))return;this.Owner.GetInputElement()!=null&&(this.Owner.GetInputElement().value=e)},e.prototype.SetFocus=function(){try{this.Owner.GetInputElement()!=null&&this.Owner.GetInputElement().focus()}catch(e){}},e.prototype.GetTextHAlign=function(){return this.Owner.GetInputElement()!==null?this.Owner.GetInputElement().style.textAlign:""},e.prototype.SetTextHAlign=function(e){if(this.Owner.GetInputElement()!==null){this.Owner.GetInputElement().style.textAlign=e;if(input.CoreUtility.IsIE()){var t=this.Owner.GetInputElement().style.width,n=parseInt(t);isNaN(n)&&(n=120),this.Owner.GetInputElement().style.width=n+1+"px";var r=this;setTimeout(function(){r.InputElement.style.width=t},0)}}},e.prototype.SetForeColor=function(e){this.Owner.GetInputElement()!=null&&(this.Owner.GetInputElement().style.color=e)},e.prototype.WriteCssStyle=function(e){try{var t=document.getElementById("gcsh_InputManWeb_Style_Container");if(input.CoreUtility.IsIE())t.styleSheet.cssText=e;else{var n=t.sheet;for(var r=n.cssRules.length-1;r>=0;r--)n.deleteRule(r);var i=e.split("}");for(var s=0;s<i.length;s++){var o=i[s],u=o.indexOf("{");if(u==-1)continue;var e=o.substring(u+1);if(e.length!=0){var a=o.substring(0,u);n.insertRule(a+"{"+e+"}",n.cssRules.length)}}}}catch(f){}},e.prototype.ClearCssStyle=function(){},e}();input.InputUIUpdate=InputUIUpdate;var GlobalEventHandler=function(){function e(){}return e.OnKeyDown=function(e,t,n){if(e.ImeMode===!0&&!input.CoreUtility.IsIE8OrBelow())return;var r=t.keyCode;n&&(r|=524288);var i={};i.Shift=!1,i.Ctrl=!1,i.Alt=!1,t.shiftKey&&(i.Shift=!0),t.ctrlKey&&(i.Ctrl=!0),t.altKey&&(i.Alt=!0);var s=null;Utility.FuncKeysPressed=i;try{s=e.KeyDown(t)}catch(o){}if(s!=null&&s.KeyCode!=null){input.CoreUtility.IsIE()&&(t.keyCode=s.KeyCode),input.CoreUtility.IsIE()||(Utility.ShouldInvokeKeyPress=!1);return}s?input.CoreUtility.IsIE()?t!=null&&(t.returnValue=!0):Utility.ShouldInvokeKeyPress=!0:(Utility.PreventDefault(t),input.CoreUtility.IsIE()||(Utility.ShouldInvokeKeyPress=!1))},e.OnKeyPress=function(t,n){if(!(n.charCode!==118&&n.charCode!==120&&n.charCode!==99||!n.ctrlKey))return;if(input.CoreUtility.IPad&&n.charCode>256)return;if(n.keyCode==46&&n.shiftKey)return;if(t.ImeMode===!0)return;var r=t;if(!input.CoreUtility.IsIE()&&(n.charCode==0||!Utility.ShouldInvokeKeyPress)){if(!Utility.ShouldInvokeKeyPress||(n.keyCode==38||n.keyCode==40)&&r.Type!="Edit"){Utility.ShouldInvokeKeyPress=!0,Utility.PreventDefault(n),r!=null&&r.Type=="Edit"&&r.DropDownObj!=null&&r.DropDownObj.IsKeyFromDropDown&&(r.DropDownObj.IsKeyFromDropDown=!1);return}if(n.keyCode!=13||r.Type!="Edit")return}var i=n.keyCode||n.charCode;if(i!=13||r.Type=="Edit"){var s=String.fromCharCode(i);try{if(input.CharProcess.CharEx.IsSurrogate(s.charAt(0))){r.IsSurrogateKeyPressing=!0;return}}catch(o){}if(s!=null){var u=null;try{u=e.CallKeyPress(t,s,n)}catch(o){}}if(!u){Utility.PreventDefault(n);return}}},e.CallKeyPress=function(e,t,n){if(input.CoreUtility.IsPad())return e.HasInput=!0,!0;var r=e.KeyPress(t,n);return r},e.OnKeyUp=function(e,t){if(e.ImeMode===!0&&!input.CoreUtility.IsIE8OrBelow())return;try{var n=e;if(n.IsSurrogateKeyPressing)try{if(n.InputElement!=null){var r=n.InputElement.value,i=n.InputElement.selectionStart,s=r.substr(i-2,i);n.KeyPress(s,t)}}finally{n.IsSurrogateKeyPressing=!1}Utility.FuncKeysPressed={Shift:t.shiftKey,Ctrl:t.ctrlKey,Alt:t.altKey},n.KeyUp(t)}catch(o){}},e.OnCompositionStart=function(e,t){try{if(input.CoreUtility.IsPad()){e.ImeMode=!0;return}e.CompositionStart(t)}catch(n){}},e.OnCompositionUpdate=function(e,t){try{if(input.CoreUtility.IsPad())return;e.CompositionUpdate(t)}catch(n){}},e.OnCompositionEnd=function(e,t){try{if(input.CoreUtility.IsPad()){e.HasInput=!0,e.ImeMode=!1;return}e.CompositionEnd(t)}catch(n){}},e.OnInput=function(e,t){try{if(e.ImeMode===!0||e.HasInput!==!0)return;e.ImeMode=!0,e.HasInput=!1,e.Input(t)}catch(n){}},e.OnMouseOver=function(e,t){try{e.MouseOver&&e.MouseOver()}catch(n){}},e.OnMouseOut=function(e,t){try{e.MouseOut()}catch(n){}},e.OnMouseMove=function(e,t){try{e.MouseMove&&e.MouseMove(t)}catch(n){}},e.OnMouseDown=function(e,t){if(e.ImeMode&&e.ImeMode===!0&&!input.CoreUtility.IsIE8OrBelow())return;try{e.MouseDown(t),input.CoreUtility.IsIE()||(Utility.DragStartElementID=e)}catch(n){}},e.OnMouseUp=function(e,t){if(e.ImeMode&&e.ImeMode===!0&&!input.CoreUtility.IsIE8OrBelow())return;try{if(e.MouseUpPointerType!=null&&e.MouseUpPointerType!==4&&e.MouseUpPointerType!=="mouse"){var n={};for(var r in t)n[r]=t[r];setTimeout(function(t){e.MouseUp(n)},300)}else e.MouseUp(t);input.CoreUtility.IsIE()||(Utility.DragStartElementID="")}catch(i){}},e.OnSelectStart=function(e,t){Utility.InnerSelect===!0&&Utility.ShouldFireOnSelectStart==0&&Utility.CancelBubble(t);var n=Utility.GetSelectionText(e.GetInputElement());if(typeof n=="undefined"||n==null)n="";var r=null;try{r=e.SelectStart(n)}catch(i){}r==0&&Utility.PreventDefault(t)},e.OnDblClick=function(e,t){var n=null;try{n=e.DoubleClick()}catch(r){}n||Utility.PreventDefault(t)},e.OnHTML5BeforeCopy=function(e,t){try{Utility.CutCopyPasteEventObject=t?t.originalEvent:t,e.Copy(t)}catch(n){}finally{Utility.CutCopyPasteEventObject=null}},e.OnHTML5Cut=function(e,t){try{var n=e.GetInputElement(),r=n.value,i=n.selectionStart,s=n.selectionEnd;setTimeout(function(){n.value=r,n.selectionStart=i,n.selectionEnd=s,e.Cut(t)},0)}catch(o){}},e.OnHTML5Paste=function(e,t){try{if(input.CoreUtility.chrome&&input.CoreUtility.GetClientOS().toLowerCase()!=="android")Utility.CutCopyPasteEventObject=t?t.originalEvent:t,e.Paste(Utility.GetDataFromClipboard(!0)),Utility.PreventDefault(t);else{var n=e.SelectionStart,r=e.SelectionEnd;setTimeout(function(){input.CoreUtility.GetClientOS().toLowerCase()==="android"&&(e.SelectionStart=n,e.SelectionEnd=r),e.isPasting=!0,e.ImeInput("DirectInput")},0)}}catch(i){}finally{Utility.CutCopyPasteEventObject=null}},e.OnMouseWheel=function(e,t){try{e.MouseWheel(t),e.ShouldCancelMouseWheelDefaultBehavior()&&Utility.PreventDefault(t)}catch(n){}},e.OnDragStart=function(e,t){try{e.DragStart()}catch(n){}},e.OnDragEnd=function(e,t){try{e.DragEnd(t)}catch(n){}},e.OnDrop=function(e,t){try{var n=t.originalEvent.dataTransfer.getData("Text");e.DragDrop(n,t)}catch(r){}},e.OnTouchStart=function(e,t){Utility.TouchStartTime=new Date,Utility.TouchStartEvt=t},e.OnTouchEnd=function(e,t){if(Utility.TouchStartTime!==undefined){Utility.TouchEndTime=new Date;var n=Utility.TouchEndTime.valueOf()-Utility.TouchStartTime.valueOf();if(n>1e3){var r="";try{r=Utility.GetSelectionText(e.GetInputElement())}catch(i){}e.ShowContextMenu(r,Utility.TouchStartEvt),e.GetEnabled()&&Utility.PreventDefault(t)}Utility.TouchStartTime=undefined,Utility.TouchEndTime=undefined}},e.OnDragEnter=function(e,t){try{e.DragEnter()}catch(n){}},e.OnDragLeave=function(e,t){try{e.DragLeave()}catch(n){}},e.OnSelect=function(e,t){try{if(input.CoreUtility.IsPad()&&e.ImeMode)return;e&&e.Focused&&e.Select()}catch(n){}},e.OnPropertyChanged=function(e,t){try{e.PropertyChange(t)}catch(n){}},e.OnMSPointerUp=function(e,t){e.MSPointerUp(t)},e.OnMSPointerDown=function(e,t){try{e.MSPointerDown(t)}catch(n){}},e.OnMSGestureTap=function(e,t){try{e.MSGestureTap(t)}catch(n){}},e.OnEditFieldFocus=function(e,t){if(Utility.IsFocusFromIMControl(e._id,t))if(input.CoreUtility.IsIE()||Utility.HasGetFocus)return;Utility.IsOnFocus=!0,input.CoreUtility.IsIE()||(Utility.HasGetFocus=!0),this.OnFocus(e,t)},e.OnEditFieldLoseFocus=function(t,n){try{var r=t;if(r!=null&&r.Type=="Edit"&&r.IsFocusToDropDownEdit){r.IsFocusToDropDownEdit=!1;return}if(Utility.IsFocusToIMControl(t._id,n))return;if(input.CoreUtility.firefox){if(Utility.IsOnFocus&&input.CoreUtility.IsIE()&&Utility.IsOnActivate&&Utility.IsOnActivateControlID==t._id){Utility.FocusToBorder!=null&&Utility.FocusToBorder==1&&(Utility.FocusToBorder=!1,r.SetInnerFocus());return}Utility.FocusToBorder=!1,input.CoreUtility.IsIE()?Utility.IsOnFocus=!1:Utility.HasGetFocus=!1}e.OnLostFocus(t,n),Utility.FuncKeysPressed={Shift:!1,Ctrl:!1,Alt:!1}}catch(i){}},e.OnFocusOut=function(e,t){Utility.FocusToBorder=!1;if(input.CoreUtility.IsIE()&&t.toElement){var n=t.toElement.id;n==e._id+"_Inside_Div_Container"&&(Utility.FocusToBorder=!0)}if(Utility.IsFocusToIMControl(e._id,t)){input.CoreUtility.IsIE9OrLater()&&(Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=e._id,Utility.IsOnFocus=!0);return}input.CoreUtility.IsIE()&&Utility.IsOnActivate&&(Utility.IsOnActivate=!1,Utility.IsOnActivateControlID=""),Utility.IsOnFocus&&(Utility.IsOnFocus=!1)},e.OnActivate=function(e,t){Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=e._id;if(Utility.IsFocusFromIMControl(e._id,t))return;Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=e._id},e.OnDeActivate=function(e,t){if(Utility.IsFocusToIMControl(e._id,t))return;Utility.IsOnActivate=!1,Utility.IsOnActivateControlID="",Utility.IsOnFocus=!1},e.OnFocus=function(t,n){try{var r=function(){t.Focus(),t.Focused=!0,input.CoreUtility.IsPad()&&(t.IPadSelectionRefreshTimer=setInterval(function(n){e.OnSelect(t,n)},400))};input.CoreUtility.IsIE()?r.call(this):setTimeout(r,0)}catch(i){}},e.OnLostFocus=function(e,t){try{e.LoseFocus(t),e.Focused=!1,input.CoreUtility.IsPad()&&clearInterval(e.IPadSelectionRefreshTimer)}catch(n){}},e}();input.GlobalEventHandler=GlobalEventHandler})(wijmo.input||(wijmo.input={}));var input=wijmo.input})(wijmo||(wijmo={}))});