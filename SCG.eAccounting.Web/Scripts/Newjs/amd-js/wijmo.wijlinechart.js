var wijmo;define(["./wijmo.wijchartcore"],function(){var e=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};(function(t){(function(n){var r=function(t){function r(){t.apply(this,arguments)}return e(r,t),r.prototype._create=function(){var e=this.options;this._handleChartStyles(),t.prototype._create.call(this),this.chartElement.addClass(e.wijCSS.lineChart),e.type==="area"&&this.chartElement.addClass(e.wijCSS.areaChart)},r.prototype.destroy=function(){var e=this.options;this.chartElement.removeClass(e.wijCSS.lineChart),e.type==="area"&&this.chartElement.removeClass(e.wijCSS.areaChart),t.prototype.destroy.call(this),this.aniPathsAttr&&this.aniPathsAttr.length&&($.each(this.aniPathsAttr,function(e,t){t=null}),this.aniPathsAttr=null)},r.prototype.getLinePath=function(e){var t=this.chartElement.data("fields"),n,r;if(t&&t.chartElements){n=t.chartElements;if(n.paths&&n.paths.length)return n.paths[e]}return r},r.prototype.getLineMarkers=function(e){var t=this.options,n=this.chartElement.data("fields"),r,i;if(t.seriesList&&t.seriesList[e].markers&&t.seriesList[e].markers.visible&&n&&n.chartElements){r=n.chartElements;if(r.markersSet&&r.markersSet.length)return r.markersSet[e]}return i},r.prototype._showSerieEles=function(e){var t=this.options,n;e.markers&&$.each(e.markers,function(e,t){var n=$(t.node).data("wijchartDataObj");if(n&&n.lineSeries&&n.lineSeries.markers&&!n.lineSeries.markers.visible)return!0;t.show()}),e.dcl&&$.each(e.dcl,function(e,n){t.showChartLabels&&n.show()}),e.path&&(n=$(e.path.node).data("wijchartDataObj"),!n.visible&&n.markers&&n.markers.visible||(e.path.show(),e.path.shadow&&e.path.shadow.show(),e.path.area&&e.path.area.show(),e.path.tracker&&e.path.tracker.show()),$(e.path.node).data("wijchartDataObj")&&$(e.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(e.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!0}))},r.prototype._hideSerieEles=function(e){e.markers&&$.each(e.markers,function(e,t){t.hide()}),e.dcl&&$.each(e.dcl,function(e,t){t.hide()}),e.path&&(e.path.hide(),e.path.shadow&&e.path.shadow.hide(),e.path.area&&e.path.area.hide(),e.path.tracker&&e.path.tracker.hide(),$(e.path.node).data("wijchartDataObj")&&$(e.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(e.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!1}))},r.prototype._supportStacked=function(){return!0},r.prototype._indicatorLineShowing=function(e){t.prototype._indicatorLineShowing.call(this,e),$.each(e,function(e,t){t.marker&&t.marker.attr(t.markerHoverStyle)})},r.prototype._removeIndicatorStyles=function(e){$.each(e,function(e,t){t.marker&&(t.marker.attr(t.markerStyle),t.marker.transform("s1"))})},r.prototype._mouseDownInsidePlotArea=function(e,n){t.prototype._mouseDownInsidePlotArea.call(this,e,n),this._clearHoverState(!0)},r.prototype._mouseDown=function(e,n){t.prototype._mouseDown.call(this,e,n)},r.prototype._mouseUp=function(e,n){t.prototype._mouseUp.call(this,e,n)},r.prototype._mouseOver=function(e,r){if(!r||r.type!=="line"&&r.type!=="marker"&&r.type!==n.ChartConsts.strTrendline)return;if(this.indicatorLine)return;t.prototype._mouseOver.call(this,e,r),r.type==="marker"&&(r=r.lineSeries);if(r.path.removed)return;if(this.hoverLine!==r||this.hoverLine===null)this.isNewLine=!0,this.hoverLine&&(this.hoverLine.path.removed||((this.options.type==="line"||r.type===n.ChartConsts.strTrendline)&&this.hoverLine.lineStyle.fill&&delete this.hoverLine.lineStyle.fill,this.hoverLine.path.wijAttr(this.hoverLine.lineStyle),this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1")))),r.lineHoverStyle&&r.path.wijAttr(r.lineHoverStyle),this.hoverLine=r,this.hoverPoint=null,this.hoverVirtualPoint=null},r.prototype._mouseOut=function(e,n){t.prototype._mouseOut.call(this,e,n)},r.prototype._mouseMove=function(e,n){t.prototype._mouseMove.call(this,e,n)},r.prototype._click=function(e,n){t.prototype._click.call(this,e,n)},r.prototype._mouseMoveInsidePlotArea=function(e,r){var i=this,s=this.tooltip,o=this.options.hint,u,a,f=0,l,c,h,p,d=null,v=null,m=null,g=o.title,y=o.content,b=$.isFunction(g),w=$.isFunction(y),E=0;s&&(m=s.getOptions());if(this.hoverLine&&!this.indicatorLine){this.isNewLine&&(o.enable&&s&&s.hide(),this.isNewLine=!1);if(this.hoverLine.type!==n.ChartConsts.strTrendline){u=this.hoverLine.lineMarkers,a=this.hoverLine.virtualMarkers,f=-1,l={x:0,y:0};if(u&&u.length){$.each(u,function(e,t){if(t.removed)return!0;var n=t.wijGetBBox(),i=n.x+n.width/2,s=Math.abs(i-r.left);if(e===0||s<E)E=s,f=e,l={x:i,y:n.y+n.height/2}});if(this.hoverPoint&&this.hoverPoint.index===f)return;if(f>-1){if(u[f].removed)return;c=$(u[f].node).data("wijchartDataObj"),c&&(this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.removed||(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1"))),c.isSymbol||c.marker.removed||c.marker.wijAttr(c.markerHoverStyle)),this.hoverPoint=c,this.hoverVirtualPoint=a[f]}}else{$.each(a,function(e,t){var n=Math.abs(t.x-r.left);if(e===0||n<E)E=n,f=e,l={x:t.x,y:t.y}});if(this.hoverVirtualPoint&&this.hoverVirtualPoint.index===f)return;f>-1&&(this.hoverPoint=null,this.hoverVirtualPoint=a[f])}if(s){v=this.hoverVirtualPoint,h=v.valX,p=v.valY;if(b||w)b&&(m.title=function(){var e={pointIndex:f,lineIndex:i.hoverLine.index,x:h,y:p,label:i.hoverLine.label,data:v,fmt:g},t=$.proxy(e.fmt,e),n=t();return n}),w&&(m.content=function(){var e={pointIndex:f,lineIndex:i.hoverLine.index,x:h,y:p,label:i.hoverLine.label,data:v,fmt:y},t=$.proxy(e.fmt,e),n=t();return n});d=$.extend({stroke:this.hoverLine.path.attr("stroke")},o.style),m.style.stroke=d.stroke,s.showAt(l)}}}t.prototype._mouseMoveInsidePlotArea.call(this,e,r)},r.prototype._mouseMoveOutsidePlotArea=function(e,n){this._clearHoverState(!1),t.prototype._mouseMoveOutsidePlotArea.call(this,e,n)},r.prototype._clearHoverState=function(e){var t=this.tooltip,r=this.options.hint;r.enable&&t&&!e&&t.hide(),this.hoverLine&&(this.hoverLine.path.removed||((this.options.type==="line"||this.hoverLine.type===n.ChartConsts.strTrendline)&&this.hoverLine.lineStyle.fill&&delete this.hoverLine.lineStyle.fill,this.hoverLine.path.wijAttr(this.hoverLine.lineStyle),this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1")))),this.hoverLine=null,this.hoverPoint=null,this.hoverVirtualPoint=null},r.prototype._getLegendbasicInfo=function(){var e=this.options,n;return e.legend.size=$.extend(!0,{width:30,height:3},e.legend.size),n=t.prototype._getLegendbasicInfo.call(this),n},r.prototype._getLegendInfoFromSeries=function(e,n,r){if(n.legendEntry===!1)return undefined;var i=$.extend(!0,{width:30,height:3},this.options.legend.size),s,o,u;u=t.prototype._getLegendInfoFromSeries.call(this,e,n,r),u.seriesVisible=n.visible!==!1||n.markers&&n.markers.visible,u.icon="line",s=u.iconStyle;if(s){var a=i.height;s=$.extend(!0,{},s,{"stroke-width":a}),s["stroke-dasharray"]&&(s=$.extend(!0,{},s,{"stroke-width":1,"stroke-dasharray":s["stroke-dasharray"]}))}return u.iconStyle=s,u.markers=n.markers?n.markers.type:undefined,u.markerVisible=n.markers?n.markers.visible:!1,o=$.extend({fill:s.stroke,stroke:s.stroke,opacity:1},n.markerStyle),u.markerStyle=o,u},r.prototype._paintPlotArea=function(){var e=this.options,t;this.aniPathsAttr||(this.aniPathsAttr=[]),this.linechartRender=new o(this.chartElement,{bounds:this.canvasBounds,widgetName:this.widgetName,canvas:this.canvas,tooltip:this.tooltip,wijCSS:e.wijCSS,stacked:e.stacked,hole:e.hole,type:e.type,axis:e.axis,animation:e.animation,seriesTransition:e.seriesTransition,seriesList:e.seriesList,seriesStyles:e.seriesStyles,seriesHoverStyles:e.seriesHoverStyles,showChartLabels:e.showChartLabels,chartLabelStyle:e.chartLabelStyle,chartLabelFormatString:e.chartLabelFormatString,chartLabelFormatter:e.chartLabelFormatter,isXTime:this.axisInfo.x.isTime,isYTime:this.axisInfo.y[0].isTime,disabled:this._isDisabled(),culture:this._getCulture(),hint:e.hint,aniPathsAttr:this.aniPathsAttr,chartLabelEles:this.chartLabelEles,mouseDown:$.proxy(this._mouseDown,this),mouseUp:$.proxy(this._mouseUp,this),mouseOver:$.proxy(this._mouseOver,this),mouseOut:$.proxy(this._mouseOut,this),mouseMove:$.proxy(this._mouseMove,this),click:$.proxy(this._click,this),widget:this,extremeValue:{txx:this.extremeValue.txx,txn:this.extremeValue.txn,tyx:this.extremeValue.y[0].tyx,tyn:this.extremeValue.y[0].tyn}}),this.linechartRender.render()},r.prototype._clearChartElement=function(){t.prototype._clearChartElement.call(this),this.hoverLine=null,this.hoverPoint=null,this.hoverVirtualPoint=null},r}(n.wijchartcore);n.wijlinechart=r;var i=function(t){function n(){t.apply(this,arguments),this.lineChart="wijmo-wijlinechart",this.areaChart="wijmo-wijareachart",this.lineLabel="wijlinechart-label",this.lineElement="wijlinechart",this.areaElement="wijlinechart-area",this.lineTracker="linetracker",this.canvasMarker="wijchart-canvas-marker"}return e(n,t),n}(n.wijchartcore_css);n.wijlinechart_css=i;var s=function(n){function r(){n.apply(this,arguments),this.initSelector=":jqmData(role='wijlinechart')",this.wijCSS=new t.chart.wijlinechart_css,this.stacked=!1,this.hole=null,this.type="line",this.animation={enabled:!0,direction:"horizontal",duration:2e3,easing:"easeInCubic"},this.seriesTransition={enabled:!0,duration:2e3,easing:"easeInCubic"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return e(r,n),r}(n.wijchartcore_options);r.prototype.options=$.extend(!0,{},t.wijmoWidget.prototype.options,new s),$.wijmo.registerWidget("wijlinechart",r.prototype);var o=function(){function e(e,t){this.options=t,this.element=e}return e.prototype.render=function(){var e=this.element,t=this.options,n=t.wijCSS,r=t.bounds,i=t.widgetName,s=t.canvas,o=t.animation,u=t.seriesTransition,a=t.hint,f=t.tooltip,l=t.mouseDown,c=t.mouseUp,h=t.mouseOver,p=t.mouseOut,d=t.mouseMove,v=t.click,m=[],g=[],y=[],b=[],w=[],E=t.disabled,S=s.set(),x=t.aniPathsAttr,T=[],N,C=e.data("fields")||{},k=[],L=t.culture,A=t.widget,O=t.extremeValue,M={enable:!1,left:-10,top:-10,right:10,bottom:10};this.widget=A,this.renderLineChart(t,T,x,b,w,m,S,g,y,k,L),!t.axis.x.autoMax&&t.axis.x.max<O.txx&&(M.enable=!0,M.right=0),!t.axis.x.autoMin&&t.axis.x.min>O.txn&&(M.enable=!0,M.left=0),!t.axis.y.autoMax&&t.axis.y.max<O.tyx&&(M.enable=!0,M.top=0),!t.axis.y.autoMin&&t.axis.y.min>O.tyn&&(M.enable=!0,M.bottom=0),o.enabled||u.enabled?this.playAnimation(o,u,S,r,b,x,M):M.enable&&this.setClipRect(M,S,r),x.length=0,$.each(T,function(e,t){x.push(t)}),this.unbindLiveEvents(e,i,n),this.bindLiveEvents(e,s,r,i,l,c,h,p,d,v,E,a,y,f,n),N={paths:b,shadowPaths:w,markersSet:m,animationSet:S,symbols:g},C.chartElements||(C.chartElements={}),C.seriesEles=k,$.extend(!0,C.chartElements,N),e.data("fields",C)},e.prototype.setClipRect=function(e,t,n){var r=n.endX-n.startX-e.left+e.right,i=n.endY-n.startY-e.top+e.bottom;t.wijAttr("clip-rect",Raphael.format("{0} {1} {2} {3}",n.startX+e.left,n.startY+e.top,r,i))},e.prototype.playAnimation=function(e,t,n,r,i,s,o){var u=this,a=e.duration,f=e.easing;e.direction==="horizontal"?(s&&s.length&&t.enabled&&(a=t.duration,f=t.easing),this.playHAnimation(a,f,n,r,i,o)):(o.enable&&this.setClipRect(o,n,r),$.each(i,function(e,n){if(typeof n=="undefined"||n===null)return!0;s&&s.length>e&&t.enabled?(a=t.duration,f=t.easing,u.playVAnimation(n,s,e,a,f)):n.straight&&u.playVStraightAnimation(n,a,f)}))},e.prototype.playVAnimation=function(e,t,r,i,s){var o,u;e.shadow&&e.shadow.hide(),e.tracker&&e.tracker.hide(),o=t[r],o&&o.path&&(u=n.ChartUtil.getDiffAttrs(o.path,e.attr())),$.isEmptyObject(u)||(e.attr(o.path),e.wijAnimate(u,i,s,function(){e.shadow&&e.visible!==!1&&e.shadow.show(),e.tracker&&e.visible!==!1&&e.tracker.show()})),$.each(e.markers,function(e,t){var r=n.ChartUtil.getDiffAttrs(o.markers[e],t.attr());$.isEmptyObject(r)||(t.attr(o.markers[e]),t.wijAnimate(r,i,s))}),e.labels&&$.each(e.labels,function(e,t){var r=n.ChartUtil.getDiffAttrs(o.labels[e],t.attr()),u=o.labels[e];u&&u.text&&delete u.text,$.isEmptyObject(r)||(t.attr(u),t.wijAnimate(r,i,s))}),e.area&&(u=n.ChartUtil.getDiffAttrs(o.area,e.area.attr()),$.isEmptyObject(u)||(e.area.attr(o.area),e.area.wijAnimate(u,i,s)))},e.prototype.playVStraightAnimation=function(e,t,n){var r,i,s;e.shadow&&e.shadow.hide(),e.tracker&&e.tracker.hide(),r=e.straight,i=e.attr().path,e.attr({path:r}),e.wijAnimate({path:i},t,n,function(){e.shadow&&e.visible!==!1&&e.shadow.show(),e.tracker&&e.visible!==!1&&e.tracker.show()}),$.each(e.markers,function(e,r){if(r.straight){var i=r.attr().cy;r.attr({cy:r.straight}),r.wijAnimate({cy:i},t,n)}}),e.area&&(s=e.area,r=s.straight,i=s.attr().path,s.attr({path:r}),s.wijAnimate({path:i},t,n))},e.prototype.playHAnimation=function(e,t,n,r,i,s){$.each(i,function(e,t){t.tracker&&t.tracker.hide()});var o=s.enable,u=r.endX-r.startX-s.left+s.right,a=r.endY-r.startY-s.top+s.bottom;n.wijAttr("clip-rect",Raphael.format("{0} {1} 0 {2}",r.startX+s.left,r.startY+s.top,a)),n.wijAnimate({"clip-rect":Raphael.format("{0} {1} {2} {3}",r.startX+s.left,r.startY+s.top,u,a)},e,t,function(){this.tracker&&this.visible!==!1&&this.tracker.show();if(Raphael.vml&&!o){var e=null,t=null,n=this.node;n&&n.clipRect&&(e=this.attrs,delete e["clip-rect"],n.clipRect=null,t=$(n).parent(),t.before(n),t.remove(),this.attr(e),e.src&&e.src.length&&this.attr({src:e.src}),e.gradient&&e.gradient.length&&e.fill==="none"&&this.attr({fill:e.gradient}))}})},e.prototype.renderLineChart=function(e,t,r,i,s,o,u,a,f,l,c){var h=this,p=e.wijCSS,d=e.bounds,v=e.canvas,m=e.stacked,g=e.hole,y=e.type,b=e.axis,w=e.animation,E=e.seriesTransition,S=!1,x=e.seriesList,T=e.seriesStyles,N=e.seriesHoverStyles,C=e.showChartLabels,k=e.chartLabelStyle,L=e.chartLabelFormatString,A=e.chartLabelFormatter,O=e.isXTime,M=e.isYTime,_=e.chartLabelEles,D,P,H,B,j,F,I=[],q=[],R,U,z,W,X,V=this.element.data("fields")||{},J=v.set();$.each(x,function(e,V){var J=[],K=[],Q=[],G,Y,Z,et,tt,nt,rt=[];if(V.display==="exclude")return!0;nt=T[e],Z=N[e];if(V.isTrendline)return n.TrendlineRender.renderSingleTrendLine(V,nt,Z,b,g,r,w,E,e,d,v,i,s,u,t,p,l),!0;V=$.extend(!0,{display:"show",fitType:"line",markers:{visible:!1,type:"circle"},visible:!0},V),G=V.data,Y=$.extend({stroke:"black",opacity:1,fill:"none","stroke-linejoin":"round","stroke-linecap":"round"},nt),et=V.markerStyle,et=$.extend({fill:Y.stroke,stroke:Y.stroke,opacity:1,width:3},et),tt=$.extend(!0,{},Z,{transform:"s1.5","stroke-width":1},x.markerHoverStyle),j=[].concat(G.x),F=[].concat(G.y),z=v.set(),U=[],B=V.fitType,W=!1,V.markers.symbol&&V.markers.symbol.length&&(W=!0),D=v.set();if(!r||r.length<=e||w.enabled&&!E.enabled)S=!0;S&&F.length>0&&(P=n.ChartUtil.getFirstValidListValue(F),M&&(P=$.toOADate(P)),H=n.ChartUtil.getLastValidListValue(F),M&&(H=$.toOADate(H))),X=h.processYValues(F,V.display,g,m,I),$.each(F,function(t,n){R=j[t],O&&(R=$.toOADate(R)),n=F[t];if(X[t].isHole){if(V.display==="excludeHole")return!0;if(!X[t].isValue)return!0}M&&(n=$.toOADate(n));if(R===undefined)return!1;U=h.renderPoint(d,v,Q,U,z,J,u,D,K,_,L,S,P,H,R,n,G.y[t],b,B,O,M,t,et,tt,V,W,C,a,j,F,X,V.display,m,rt,c,p,e,A)}),h.renderPath(v,d,V,i,s,f,Z,et,tt,z,o,u,U,t,Q,Y,k,J,K,D,e,y,q,m,rt,p),l.push({markers:z,path:i[i.length-1],shadowPath:s[s.length-1],dcl:D})}),$.each($.merge([],i).reverse(),function(e,t){t.toFront(),t.area&&t.area.toFront()}),$.each(i,function(e,t){t.tracker&&(t.tracker.toFront(),J.push(t.tracker))}),V.trackers=J,this.element.data("fields",V),$.each(i,function(e,t){t.markers&&t.markers.toFront()})},e.prototype.renderPath=function(e,t,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){var k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z=this.options.axis.y.origin;U=t.endY,this.options.axis&&this.options.axis.y&&z!==null&&z!==undefined&&!isNaN(z)&&(U=this._calculatePoint(z,"y")),k=e.path(p.join(" ")),k.straight=v.join(" "),n.ChartUtil.paintShadow(k,1,"#cccccc"),E===0&&(x.length=0,p.length>1?(_=p[1],D=p[p.length-2]):(_=t.startX,D=t.endX),$.merge(x,["L",_,U,"L",D,U])),P=e.path(p.join(" ")),k.tracker=P,m["stroke-width"]?H=10+parseFloat(m["stroke-width"]):H=10,P.attr({"stroke-width":H,stroke:"#C0C0C0",opacity:.01}),$.wijraphael.addClass($(P.node),Raphael.format("{0} {1} {2}",C.canvasObject,C.lineElement,C.lineTracker)),$(P.node).data("owner",$(k.node)),S==="area"?(m.fill&&m.fill!=="none"?(L=m.fill,delete m.fill):L=m.stroke,A=.5,O=1,m["fill-opacity"]&&m["fill-opacity"]!=="none"&&(A=m["fill-opacity"]),m.opacity&&m.opacity!=="none"&&(O=m.opacity),k.wijAttr(m),p.length>1?_=p[1]:_=t.startX,T?(p.push("V"),p.push(U),p.push("H"),p.push(_),p.push("Z")):(I=Raphael.parsePathString(k.attr("path")),I&&I.length>0&&(p=[],$.each(I,function(e,t){$.each(t,function(e,t){p.push(t)}),t[0]==="M"&&(_=t[1]),e<I.length-1&&I[e+1][0]==="M"&&(p.push("V"),p.push(U),p.push("H"),p.push(_),p.push("Z")),e===I.length-1&&(p.push("V"),p.push(U),p.push("H"),p.push(_),p.push("Z"))}))),M=e.path(p.join(" ")),$.wijraphael.addClass($(M.node),C.areaElement),M.wijAttr({fill:L,opacity:O,"fill-opacity":A,stroke:"none"}),v.push("V"),v.push(U),v.push("H"),v.push(_),v.push("Z"),M.straight=v.join(" "),k.area=M,h.push(M),d.push({path:$.extend(!0,{},k.attr()),area:$.extend(!0,{},M.attr()),markers:y,labels:b})):(R=$.extend(!0,{},m),R.fill&&delete R.fill,k.wijAttr(R),u.fill&&delete u.fill,d.push({path:$.extend(!0,{},k.attr()),markers:y,labels:b})),k.markers=l,i.push(k),k.shadow&&(s[E]=k.shadow),h.push(k),o[E]={lineStyle:m,lineHoverStyle:u,markerStyle:a,markerHoverStyle:f},(!r.markers.visible||r.display==="hide")&&l.hide();if(!r.visible||r.display==="hide")k.hide(),k.tracker&&k.tracker.hide(),k.shadow&&k.shadow.hide(),k.area&&k.area.hide(),k.visible=!1;r.markers.style&&l.attr(r.markers.style),l.toFront(),w.length&&(B=$.extend(!0,{},g),r.textStyle&&(B=$.extend(!0,B,r.textStyle)),w.attr(B),w.toFront(),k.labels=w),c[E]=l,r.index=E,r.type="line",r.path=k,r.lineMarkers=l,r.lineStyle=m,r.lineHoverStyle=u,r.virtualMarkers=N,$.wijraphael.addClass($(k.node),Raphael.format("{0} {1}",C.canvasObject,C.lineElement)),$(k.node).data("wijchartDataObj",r)},e.prototype._calculatePoint=function(e,t){var n=this.options.axis,r=$.isArray(n[t])?n[t][0]:n[t],i=this.options.bounds,s=r.min,o=r.max,u,a;return t==="x"?(a=(i.endX-i.startX)/(o-s),i.startX+(e-s)*a):(a=(i.endY-i.startY)/(o-s),i.endY-(e-s)*a)},e.prototype.renderPoint=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j){var F=e.endX-e.startX,I=e.endY-e.startY,q=g.x.min,R=g.y.min,U=g.x.max,z=g.y.max,W=F/(U-q),X=I/(z-R),V,J,K,Q=0,G,Y,Z,et,tt=T.markers.visible,nt=this.widget,rt;return isNaN(d)||typeof d=="string"?K=E:K=d,Q=this._calculatePoint(K,"x"),G=this._calculatePoint(v,"y"),O[E].x=Q,O[E].y=G,c&&(Y=h+(p-h)/(U-q)*(K-q),Y=e.endY-(Y-R)*X,n.push(O[E].idx?"L":"M"),n.push(Q),n.push(Y)),O[E].isHole?r:(r=this.getPathArrByFitType(r,y,E,A.length,e,L,A,Q,G,b,w,d,v,O,M,_),C&&(et=this.renderChartLabel(t,w,{x:d,y:v,sIdx:B},l,j,Q,G,P,H),f.push(et),u.push(et),a.push($.extend(!0,{},et.attr()))),tt&&(V=this.renderMarker(t,k,N,T.markers,E,Q,G,S,H),J=V.dot,c&&(J.straight=Y)),Z={},Z.valX=L[E],Z.valY=m,Z.index=E,Z.type="marker",Z.lineSeries=T,Z.x=Q,Z.y=G,Z.markerStyle=S,Z.markerHoverStyle=x,Z.visible=!0,tt&&(Z.marker=J,Z.isSymbol=V.isSymbol,$(J.node).data("wijchartDataObj",Z),i.push(J),s.push($.extend(!0,{},J.attr())),o.push(J)),nt.dataPoints=nt.dataPoints||{},nt.pointXs=nt.pointXs||[],rt=$.round(Q,2),nt.dataPoints[rt.toString()]||(nt.dataPoints[rt.toString()]=[],nt.pointXs.push(rt)),nt.dataPoints[rt.toString()].push(Z),D.push(Z),r)},e.prototype.processYValues=function(e,t,r,i,s){var o=[],u=0,a=0;return $.each(e,function(f,l){u||(a=f);var c={isHole:!1,isValue:!0,idx:u,firstYIdx:a,x:0,y:0};u++,n.ChartUtil.isHolefunction(l,r)&&(i?e[f]=0:(c.isHole=!0,t==="excludeHole"?(u--,c.idx=0):(u=0,c.idx=0),!n.ChartUtil.isHolefunction(r,undefined)&&l===r?c.isValue=!0:c.isValue=!1)),o.push(c),i&&f<s.length&&(e[f]+=s[f])}),s.length=0,$.merge(s,e),o},e.prototype.renderMarker=function(e,t,n,r,i,s,o,u,a){var f,l=null,c=!1,h,p;return n&&(f=r.symbol,$.each(f,function(n,r){if(r.index===i)return l=e.image(r.url,s-r.width/2,o-r.height/2,r.width,r.height),t.push(l),c=!0,!1})),l===null&&(h=r.type,p=u.width,l=e.paintMarker(h,s,o,p),r.visible&&l.attr(u)),$.wijraphael.addClass($(l.node),Raphael.format("{0} {1} {2}",a.canvasObject,a.lineElement,a.canvasMarker)),{dot:l,isSymbol:c}},e.prototype.renderChartLabel=function(e,t,r,i,s,o,u,a,f){var l,c,h,p=this.options.widget,d,v,m=this.options;return l=t?$.fromOADate(r.y):r.y,d=n.ChartUtil.getChartLabel(i,l,a,{index:r.sIdx,data:{x:r.x,y:r.y},value:r.y,chartLabelFormatter:s}),l=d.text,v=$.extend(!0,{},m.textStyle,m.chartLabelStyle),c=p._text.call(p,o,u,l),c.wijAttr(v),$.wijraphael.addClass($(c.node),f.lineLabel),h=c.wijGetBBox(),c.transform(Raphael.format("...T{0},{1}",0,-h.height)),c},e.prototype.getAnchors=function(e,t,n,r,i,s){var o=(n-e)/2,u=(i-n)/2,a=Math.atan((n-e)/Math.abs(r-t)),f=Math.atan((i-n)/Math.abs(r-s)),l=0,c=0,h=0,p=0,d=0;return a=t<r?Math.PI-a:a,f=s<r?Math.PI-f:f,l=Math.PI/2-(a+f)%(Math.PI*2)/2,c=o*Math.sin(l+a),h=o*Math.cos(l+a),p=u*Math.sin(l+f),d=u*Math.cos(l+f),{x1:n-c,y1:r+h,x2:n+p,y2:r+d}},e.prototype.getPathArrByFitType=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=null,g=0,y=0,b=0,w=0,E=null,S=null,x=p[n],T=!1,N=x.idx,C,k=n-1,L=n+1;if(d==="excludeHole"&&!v){if(n>0&&n<r-1){L=-1,k=-1;for(C=n+1;C<r;C++){T=!0;if(p[C].isHole)continue;L=C,T=!1;break}for(C=n-1;C>=0;C--){if(p[C].isHole)continue;k=C;break}k>-1&&(b=p[k].x,g=p[k].y)}}else n<r-1&&(T=p[L].isHole),n>0&&n<r-1&&(b=p[k].x,g=p[k].y);return v&&(t="line"),t==="line"?e=e.concat([N?"L":"M",u,a]):t==="spline"?N?N&&n<r-1&&!T?(m=o[L],l&&(m=$.toOADate(m)),y=this._calculatePoint(m,"y"),isNaN(c)||typeof c=="string"?w=this._calculatePoint(L,"x"):(E=s[L],f&&(E=$.toOADate(E)),w=this._calculatePoint(E,"x")),S=this.getAnchors(b,g,u,a,w,y),e=e.concat([S.x1,S.y1,u,a,S.x2,S.y2])):e=e.concat([u,a,u,a]):n===r-1?e=e.concat(["M",u,a]):T?e=e.concat(["M",u,a]):e=e.concat(["M",u,a,"C",u,a]):t==="bezier"&&(N?n<r-1&&p[n+1].isHole&&N%2===1||n===r-1&&N%2===1?e=e.concat(["Q",u,a,u,a]):N%2===0?e=e.concat([u,a]):e=e.concat(["Q",u,a]):e=e.concat(["M",u,a])),e},e.prototype.bindLiveEvents=function(e,t,r,i,s,o,u,a,f,l,c,h,p,d,v){var m="",g={element:e,mousedown:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?s.call(e,t,r):s.call(e,t,i)):s.call(e,t,r)},mouseup:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?o.call(e,t,r):o.call(e,t,i)):o.call(e,t,r)},mouseover:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?u.call(e,t,r):u.call(e,t,i)):u.call(e,t,r)},mouseout:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?a.call(e,t,r):a.call(e,t,i)):a.call(e,t,r)},mousemove:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?f.call(e,t,r):f.call(e,t,i)):f.call(e,t,r)},click:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?l.call(e,t,r):l.call(e,t,i)):l.call(e,t,r)}};$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(m="wij"),e.on(m+"mousedown."+i,"."+v.lineElement,$.proxy(g.mousedown,g)).on(m+"mouseup."+i,"."+v.lineElement,$.proxy(g.mouseup,g)).on(m+"mouseover."+i,"."+v.lineElement,$.proxy(g.mouseover,g)).on(m+"mouseout."+i,"."+v.lineElement,$.proxy(g.mouseout,g)).on(m+"mousemove."+i,"."+v.lineElement,$.proxy(g.mousemove,g)).on(m+"click."+i,"."+v.lineElement,$.proxy(g.click,g)),n.TrendlineRender.bindLiveEvents(e,i,s,o,u,a,f,l,c,v,!0)},e.prototype.unbindLiveEvents=function(e,t,r){e.off("."+t,"."+r.lineElement),n.TrendlineRender.unbindLiveEvents(e,t,r)},e}();n.LineChartRender=o})(t.chart||(t.chart={}));var n=t.chart})(wijmo||(wijmo={}))});