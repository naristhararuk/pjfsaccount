var wijmo;define(["./wijmo.wijchartcore","globalize"],function(){var e=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};(function(t){(function(n){var r=function(t){function r(){t.apply(this,arguments)}return e(r,t),r.prototype._create=function(){var e=this;e._handleChartStyles(),t.prototype._create.call(this),e.chartElement.addClass(e.options.wijCSS.scatter)},r.prototype.destroy=function(){var e=this;e.chartElement.removeClass(e.options.wijCSS.scatter),t.prototype.destroy.call(this)},r.prototype.getScatter=function(e,t){var n=this,r=n.chartElement.data("fields"),i,s,o,u;if(r&&r.chartElements){o=r.chartElements.scatters;if(o&&o.length){s=o.length;if(e<0||e>=s)return i;u=o[e];if(typeof t=="undefined")return u;s=u.length;if(u&&s)return t<0||t>=s?i:u[t]}return i}},r.prototype._getLegendbasicInfo=function(){var e,n=t.prototype._getLegendbasicInfo.call(this);return e=$.extend(!0,{width:20,height:10,r:6},this.options.legend.size),n.iconSize=$.extend(!0,n.iconSize,e),n},r.prototype._getLegendInfoFromSeries=function(e,n,r){if(n.LegendEntry===!1)return undefined;var i,s,o,u=t.prototype._getLegendInfoFromSeries.call(this,e,n,r);return s=u.iconStyle,o=$.extend({fill:s.fill,stroke:s.stroke,opacity:1},n.markerStyle),u.iconStyle=o,n.markerType?u.icon=n.markerType:u.icon="circle",u.markers=undefined,u.markerVisible=!1,u.markerStyle=undefined,u},r.prototype._showSerieEles=function(e){if(e.isTrendline){n.TrendlineRender.showSerieEles(e);return}$.each(e,function(e,t){t.show(),t.label&&t.label.show(),$(t.element).data("wijchartDataObj")&&($(t.element).data("wijchartDataObj").visible=!0)})},r.prototype._hideSerieEles=function(e){if(e.isTrendline){n.TrendlineRender.hideSerieEles(e);return}$.each(e,function(e,t){t.hide(),t.label&&t.label.hide(),$(t.element).data("wijchartDataObj")&&($(t.element).data("wijchartDataObj").visible=!1)})},r.prototype._indicatorLineShowing=function(e){t.prototype._indicatorLineShowing.call(this,e),$.each(e,function(e,t){t.dot&&(t.dot.attr(t.hoverStyle),t.dot.scale(1.5,1.5))})},r.prototype._removeIndicatorStyles=function(e){$.each(e,function(e,t){t.dot&&(t.dot.attr(t.style),t.dot.scale(1,1))})},r.prototype._paintTooltip=function(){var e=this,n=e.chartElement,r=n.data("fields");t.prototype._paintTooltip.call(this),e.tooltip&&r&&r.chartElements&&r.chartElements.tooltipTars&&(e.tooltip.setTargets(r.chartElements.tooltipTars),e.tooltip.setOptions({mouseTrailing:!1}))},r.prototype._getTooltipText=function(e,t){var n=$(t).data("wijchartDataObj"),r={data:n,label:n.label,x:n.x,y:n.y,type:n.markerType,target:t,fmt:e};return $.proxy(e,r)()},r.prototype._onBeforeTooltipShowing=function(e){var n=this,r=e.options,i=n.options.hint.style,s=e.target,o,u;s&&($.browser.msie&&parseInt($.browser.version)<9?(o=$(s).data().wijchartDataObj,u=o.style,r.style.stroke=i.stroke||u.stroke||u.fill||"#ffffff"):r.style.stroke=i.stroke||s.getAttribute("stroke")||s.getAttribute("fill")||"#ffffff",s.attrs={stroke:r.style.stroke}),t.prototype._onBeforeTooltipShowing.call(this,e)},r.prototype._clearChartElement=function(){var e=this,t=e.chartElement.data("fields");e._stopAnimation(),e.legendEles.length&&($.each(e.legendEles,function(e,t){t.wijRemove(),t=null}),e.legendEles=[]),e.legends.length&&($.each(e.legends,function(e,t){t.wijRemove(),t=null}),e.legends=[]),e.legendIcons.length&&($.each(e.legendIcons,function(e,t){t.wijRemove(),t=null}),e.legendIcons=[]),e.legendDots.length&&($.each(e.legendDots,function(e,t){t=null}),e.legendDots=[]),e.axisEles.length&&($.each(e.axisEles,function(e,t){t.wijRemove(),t=null}),e.axisEles=[]),e.chartLabelEles.length&&($.each(e.chartLabelEles,function(e,t){t.wijRemove(),t=null}),e.chartLabelEles=[]),t&&t.chartElements&&($.each(t.chartElements,function(e,n){n.length&&$.each(n,function(e,t){t[0]!==null&&(t.remove&&t.remove(),n[e]=null)}),t.chartElements[e]=null}),t.chartElements={},$(t.clipRect.element).stop().remove(),t.render.destroy(),t.clipRect.destroy()),e.dataPoints=null,e.pointXs=null,e.canvas.clear(),e.innerState={}},r.prototype._paintPlotArea=function(){var e=this,t=e.options;this.scatterRender=new o(this.chartElement,{bounds:e.canvasBounds,widgetName:e.widgetName,canvas:e.canvas,tooltip:e.tooltip,axis:t.axis,animation:t.animation,seriesTransition:t.seriesTransition,seriesList:t.seriesList,seriesStyles:t.seriesStyles,seriesHoverStyles:t.seriesHoverStyles,hint:t.hint,disabled:this._isDisabled(),isXTime:e.axisInfo.x.isTime,isYTime:e.axisInfo.y[0].isTime,zoomOnHover:t.zoomOnHover,mouseDown:$.proxy(e._mouseDown,e),mouseUp:$.proxy(e._mouseUp,e),mouseOver:$.proxy(e._mouseOver,e),mouseOut:$.proxy(e._mouseOut,e),mouseMove:$.proxy(e._mouseMove,e),click:$.proxy(e._click,e),showChartLabels:t.showChartLabels,chartLabelStyle:t.chartLabelStyle,chartLabelFormatString:t.chartLabelFormatString,chartLabelFormatter:t.chartLabelFormatter,culture:e._getCulture(),wijCSS:t.wijCSS,widget:this}),this.scatterRender.render()},r.prototype._stopAnimation=function(){this.scatterRender&&this.scatterRender.stopAnimation()},r}(n.wijchartcore);n.wijscatterchart=r,r.prototype.widgetEventPrefix="wijscatterchart";var i=function(t){function n(){t.apply(this,arguments),this.scatter="wijmo-wijscatterchart",this.scatterElement="wijscatterchart"}return e(n,t),n}(n.wijchartcore_css);n.wijscatterchart_css=i;var s=function(n){function r(){n.apply(this,arguments),this.initSelector=":jqmData(role='wijscatterchart')",this.wijCSS=new t.chart.wijscatterchart_css,this.animation={enabled:!0,duration:2e3,easing:">"},this.showChartLabels=!1,this.seriesTransition={enabled:!0,duration:2e3,easing:">"},this.zoomOnHover=!0,this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return e(r,n),r}(n.wijchartcore_options);r.prototype.options=$.extend(!0,{},t.wijmoWidget.prototype.options,new s),$.wijmo.registerWidget("wijscatterchart",r.prototype);var o=function(){function e(e,t){this.scatters=[],this.chartLabels=[],this.tooltipTars=[],this.seriesEles=[],this.paths=[],this.aniPathsAttr=[],this.fieldsAniPathAttr=[],this.element=e,this.options=t,this._init()}return e.prototype._init=function(){var e=this.element,t=this.options,r=t.canvas,i=t.bounds,s=t.axis.x.min,o=t.axis.y.min,u=t.axis.x.max,a=t.axis.y.max;this.width=i.endX-i.startX,this.height=i.endY-i.startY,this.plotInfo={minX:s,minY:o,maxX:u,maxY:a,width:this.width,height:this.height,kx:this.width/(u-s),ky:this.height/(a-o)},this.fields=e.data("fields")||{},e.find("svg").length>0?this.chartRender=n.render.createRender(r,e.find("svg").get(0),e.width(),e.height()):this.chartRender=n.render.createRender(r,e.children(":first").addClass("vmlcontainer").get(0),e.width(),e.height()),this.clipRect=this.chartRender.clipRect(0,0,0,e.height()),this.g=this.chartRender.g(),this.g.clip(this.clipRect),this.g.add(),this.fields.render=this.chartRender,this.fields.clipRect=this.clipRect,this.animationSet=this.options.canvas.set()},e.prototype.bindLiveEvents=function(){var e=$.isFunction,t=this.options,r=t.wijCSS,i=this.element,s=t.widgetName,o=t.mouseDown,u=t.mouseUp,a=t.mouseOver,f=t.mouseOut,l=t.mouseMove,c=t.click,h=t.zoomOnHover,p=t.seriesHoverStyles,d=t.seriesStyles,v=t.disabled,m="";$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(m="wij"),$("."+r.scatterElement,i[0]).on(m+"mousedown."+s,function(t){if(v)return;if(e(o)){var n=$(t.target).data("wijchartDataObj");n||(n=$(t.target.parentNode).data("wijchartDataObj")),o.call(i,t,n)}}).on(m+"mouseup."+s,function(t){if(v)return;if(e(u)){var n=$(t.target).data("wijchartDataObj");n||(n=$(t.target.parentNode).data("wijchartDataObj")),u.call(i,t,n)}}).on(m+"mouseover."+s,function(t){if(v)return;var n=$(t.target).data("wijchartDataObj"),r,s,o;n||(n=$(t.target.parentNode).data("wijchartDataObj")),o=n.dot,h&&(r=n.seriesIndex,o.attr&&(s=$.extend(!0,{},p[r]),o.attr(s)),document.createElementNS?o.scale(1.5,1.5):o.attr("stroke-width",5)),e(a)&&a.call(i,t,n)}).on(m+"mouseout."+s,function(t){if(v)return;var n=$(t.target).data("wijchartDataObj"),r,s;n||(n=$(t.target.parentNode).data("wijchartDataObj")),s=n.dot,h&&(r=n.seriesIndex,s.attr&&s.attr($.extend(!0,{},d[r]))),document.createElementNS&&s.scale(1,1),e(f)&&f.call(i,t,n)}).on(m+"mousemove."+s,function(t){if(v)return;if(e(l)){var n=$(t.target).data("wijchartDataObj");n||(n=$(t.target.parentNode).data("wijchartDataObj")),l.call(i,t,n)}}).on(m+"click."+s,function(t){if(v)return;if(e(c)){var n=$(t.target).data("wijchartDataObj");n||(n=$(t.target.parentNode).data("wijchartDataObj")),c.call(i,t,n)}}),n.TrendlineRender.bindLiveEvents(i,s,o,u,a,f,l,c,v,r,!1)},e.prototype.unbindLiveEvents=function(){var e=this.options,t=e.widgetName,r=e.wijCSS;$("."+r.scatterElement,this.element).off(t).off("."+t),n.TrendlineRender.unbindLiveEvents(this.element,t,r)},e.prototype.paintDefaultChartLabel=function(e,t,r){var i=this.options,s=$.extend(!0,{"font-size":"10px",fill:"#888","font-family":"Arial"},i.textStyle,i.chartLabelStyle),o,u=i.chartLabelFormatString,a,f=r.y,l;return i.isYTime?o=Globalize.format(f,"f",i.culture):o=$.round(f,2),l=n.ChartUtil.getChartLabel(u,o,i.culture,{index:r.sIdx,data:{x:r.x,y:r.y},value:f,chartLabelFormatter:i.chartLabelFormatter}),o=l.text,a=this.chartRender.text(e,t,o),a.raphaelObj.wijAttr(s),a},e.prototype.paintScatters=function(){var e=this,t=e.options,r=t.seriesList,i=t.seriesStyles,s=t.seriesHoverStyles,o=t.isXTime,u=t.isYTime,a=t.bounds,f=this.plotInfo,l=t.wijCSS,c=t.showChartLabels,h=t.chartLabelStyle,p=t.widget,d=[];$.each(r,function(t,r){var h=r.data,v,m=r.markerWidth||5,g=i[t],y=s[t],b=h.x,w=h.y,E=[],S=[],x;if(r.isTrendline)return n.TrendlineRender.renderSingleTrendLine(r,i[t],s[t],e.options.axis,undefined,e.fieldsAniPathAttr,e.options.animation,e.options.seriesTransition,t,a,e.options.canvas,e.paths,d,e.animationSet,e.aniPathsAttr,l,e.seriesEles),!0;r=$.extend(!0,{visible:!0,markerType:"circle"},r),v=r.markerType;if(r.display==="exclude")return!0;!g.fill&&g.stroke&&(g.fill=g.stroke);if(b===undefined)return!0;$.each(w,function(n,i){var s=b[n],h=0,d=0,T,N,C,k={};o&&(s=$.toOADate(s)),u&&(i=$.toOADate(i));if(typeof s=="undefined")return!1;isNaN(s)||typeof s=="string"?T=n:T=s,h=a.startX+(T-f.minX)*f.kx,d=a.endY-(i-f.minY)*f.ky,g.opacity&&(g["fill-opacity"]=g.opacity,g["stroke-opacity"]=g.opacity,delete g.opacity),v==="cross"&&g["stroke-width"]!==undefined&&g["stroke-width"]===0&&(g["stroke-width"]=1),N=e.chartRender.symbol(v,h,d,m),N.attr(g),N.add(e.g),N.attr({"class":l.canvasObject+" "+l.scatterElement}),k=$.extend(!1,{dot:N,x:b[n],y:w[n],seriesIndex:t,index:n,markerType:v,type:"scatter",style:g,hoverStyle:y,visible:!0},r),c&&(C=e.paintDefaultChartLabel(h,d-6,{x:b[n],y:w[n],sIdx:t}),C.add(e.g),N.label=C,e.chartLabels.push(C)),p.dataPoints=p.dataPoints||{},p.pointXs=p.pointXs||[],x=$.round(h,2),p.dataPoints[x.toString()]||(p.dataPoints[x.toString()]=[],p.pointXs.push(x)),p.dataPoints[x.toString()].push(k),$(N.element).data("wijchartDataObj",k),E.push(N),e.tooltipTars.push($.extend({},N,{node:N.element})),S.push(N),r.visible===!1&&N.hide()}),e.scatters.push(E),e.seriesEles.push(S)}),e.fields.trendLines=e.paths},e.prototype.playAnimation=function(){var e=this,t=e.options,n=t.animation,r=e.element,i=r.css("background-color");n.enabled?(i==="transparent"&&(i="white"),e.clipRect.getCSS?$(e.clipRect.members[0].element).animate({width:r.width()},{duration:n.duration,step:function(t){e.clipRect.width=t;var n=e.clipRect.getCSS();$(this).css(n)}}):$(e.clipRect.element).animate({width:r.width()},{duration:n.duration,step:function(t){e.clipRect.attr("width",t)}})):e.clipRect.getCSS?($(e.clipRect.members[0].element).css({width:r.width()}),e.clipRect.width=r.width(),$(e.clipRect.members[0].element).css(e.clipRect.getCSS())):($(e.clipRect.element).css({width:r.width()}),e.clipRect.attr("width",r.width()))},e.prototype.playTrendLineAnimation=function(){var e=this,t=e.options,r=t.animation,i=r&&r.enabled,s=t.seriesTransition,o=e.fields.trendLines,u,a;i&&(u=r.duration||2e3,a=r.easing||"linear",o&&o.length&&n.TrendlineRender.playAnimation(i,u,a,s,t.bounds,o,e.fieldsAniPathAttr,t.axis,t.widget.extremeValue))},e.prototype.stopAnimation=function(){this.clipRect.members&&this.clipRect.members.length>0?$(this.clipRect.members[0].element).stop(!0):$(this.clipRect.element).stop(!0)},e.prototype.render=function(){this.paintScatters(),this.playAnimation(),this.playTrendLineAnimation(),this.unbindLiveEvents(),this.bindLiveEvents(),this.chartEles={animationSet:this.animationSet,tooltipTars:this.tooltipTars,scatters:this.scatters,labels:this.chartLabels,trendLines:this.paths},this.fields.chartElements||(this.fields.chartElements={}),this.fields.seriesEles=this.seriesEles,$.extend(!0,this.fields.chartElements,this.chartEles),this.element.data("fields",this.fields)},e}();n.ScatterChartRender=o})(t.chart||(t.chart={}));var n=t.chart})(wijmo||(wijmo={})),function(t){(function(t){(function(t){function E(e){return typeof e=="string"}function S(e){return typeof e=="number"}function x(e){return e!==undefined&&e!==null}function T(e,t,n){var r="setAttribute",i;return E(t)?x(n)?e[r](t,n):e&&e.getAttribute&&(i=e.getAttribute(t)):x(t)&&$.isPlainObject(t)&&$.each(t,function(t,n){e[r](t,n)}),i}function N(e,t){i&&t&&t.opacity!==undefined&&(t.filter="alpha(opacity="+t.opacity*100+")"),$.extend(e.style,t)}function C(e,t,r){var i=n.createElement(e);return t&&$.extend(i,t),r&&N(i,r),i}function k(e){$.each(e,function(t,n){e[t]&&e[t].destroy&&e[t].destroy(),delete e[t]})}function P(e,t,n,r){return u?new M(e,t,n,r):new D(e,t,n,r)}var n=document,r=$.each,i=$.browser.msie,s=n.documentMode===8,o="http://www.w3.org/2000/svg",u=!!n.createElementNS&&!!n.createElementNS(o,"svg").createSVGRect,a=0,f="div",l="absolute",c="hidden",h="scatterchart-",p="visible",d="visibility",v="px",m="none",g="M",y="L",b=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,w=/^(\d{1,3})\-(?:((?:[a-zA-Z]+)|(?:\#[0-9a-fA-F]{6})|(?:\#[0-9a-fA-F]{3}))\-)(?:(?:((?:(?:[a-zA-Z]+)|(?:\#[0-9a-fA-F]{6})|(?:\#[0-9a-fA-F]{3}))(?:\:\d{1,3})?)\-)?)*((?:[a-zA-Z]+)|(?:\#[0-9a-fA-F]{6})|(?:\#[0-9a-fA-F]{3}))$/,L=function(){function e(){}return e.prototype.attr=function(e,t){},e.prototype.scale=function(e,t){},e.prototype.symbolAttr=function(e){},e.prototype.clip=function(e){},e.prototype.crisp=function(e,t,n,r,i){},e.prototype.css=function(e){},e.prototype.getBBox=function(){},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.add=function(e){},e.prototype.destroy=function(){},e.prototype.empty=function(){},e.prototype.remove=function(){},e}();t.ChartElement=L;var A=function(){function e(e,t,n,r){}return e.prototype.destroy=function(){},e.prototype.createElement=function(e){},e.prototype.path=function(e){return this._element},e.prototype.circle=function(e,t,n){return this._element},e.prototype.rect=function(e,t,n,r,i,s){return this._element},e.prototype.setSize=function(e,t){},e.prototype.g=function(e){return this._element},e.prototype.text=function(e,t,n){return this._element},e.prototype.symbol=function(e,t,n,r,i){return this._element},e.prototype.clipRect=function(e,t,n,r){return this._element},e}();t.ChartRender=A;var O=function(t){function s(){t.apply(this,arguments)}return e(s,t),s.prototype.init=function(e,t){this.element=n.createElementNS(o,t),this.renderer=e},s.prototype.attr=function(e,t){var n,r,i=this.element,s=this.renderer,o=i.nodeName,u,a,f=this;if(e===undefined)return;E(e)&&x(t)&&(n=e,e={},e[n]=t);if(E(e))n=e,o==="circle"&&(n={x:"cx",y:"cy"}[n]||n),f=T(i,n)||this[n]||0,n!=="d"&&n!==d&&(f=parseFloat(f));else if(e){a=this.raphaelObj;if(a&&a.attr)return a.attr(e),$.each(["visibility","class"],function(t,n){if(n in e){r=e[n];switch(n){case"visibility":r===p?a.show():r===c&&a.hide();break;default:T(i,n,r)}}}),f;$.each(e,function(t,n){u=!1,r=e[t],t==="d"?(r&&r.join&&(r=r.join(" ")),/(NaN| {2}|^$)/.test(r)&&(r="M 0 0"),this.d=r):t==="fill"?r=s._color(r,i,t):t==="transform"?r=s._transform(e[t],i):o==="circle"&&(t==="x"||t==="y")&&(t={x:"cx",y:"cy"}[t]||t),jQuery.browser.safari&&t==="stroke-width"&&r===0&&(r=1e-6),u||T(i,t,r),i.attrs=i.attrs||{},i.attrs[t]=r})}return f},s.prototype.scale=function(e,t){this.attr("transform","S"+e+","+t)},s.prototype.symbolAttr=function(e){var t=this;r(["x","y","r","start","end","width","height","innerR"],function(n,r){e[r]?t[r]=e[r]:t[r]=t[r]}),t.attr({d:t.renderer.symbols[t.symbolName](Math.round(t.x*2)/2,Math.round(t.y*2)/2,t.r,{start:t.start,end:t.end,width:t.width,height:t.height,innerR:t.innerR})})},s.prototype.clip=function(e){return this.attr("clip-path","url("+this.renderer.url+"#"+e.id+")")},s.prototype.crisp=function(e,t,n,r,i){var s=this,o,u={},a={},f;e=e||s.strokeWidth||0,f=e%2/2,a.x=Math.floor(t||s.x||0)+f,a.y=Math.floor(n||s.y||0)+f,a.width=Math.floor((r||s.width||0)-2*f),a.height=Math.floor((i||s.height||0)-2*f),a.strokeWidth=e;for(o in a)s[o]!==a[o]&&(s[o]=u[o]=a[o]);return u},s.prototype.css=function(e){var t=this,n=t.element,r=e&&e.width&&n.nodeName==="text",s="",o=function(e,t){return"-"+t.toLowerCase()};return e&&e.color&&(e.fill=e.color),e=$.extend(t.styles,e),t.styles=e,i&&!u?(r&&delete e.width,N(t.element,e)):($.each(e,function(t,n){s+=n.replace(/([A-Z])/g,o)+":"+e[n]+";"}),t.attr({style:s})),t},s.prototype.getBBox=function(){var e,t,n,r=this.rotation,i=r*Math.PI*2/360;try{e=$.extend({},this.element.getBBox())}catch(s){e={width:0,height:0}}return t=e.width,n=e.height,r&&(e.width=Math.abs(n*Math.sin(i))+Math.abs(t*Math.cos(i)),e.height=Math.abs(n*Math.cos(i))+Math.abs(t*Math.sin(i))),e},s.prototype.show=function(){return this.attr({visibility:p})},s.prototype.hide=function(){return this.attr({visibility:c})},s.prototype.add=function(e){var t=this,n=t.renderer,r=e||n,i=r.element||n.box,s=i.childNodes,o=t.element,u=T(o,"zIndex"),a,f,l;e&&t.htmlNode&&(e.htmlNode||(e.htmlNode=[]),e.htmlNode.push(t)),u&&(r.handleZ=!0,u=parseInt(u,10));if(r.handleZ)for(l=0;l<s.length;l++){a=s[l],f=T(a,"zIndex");if(a!==o&&(parseInt(f,10)>u||!x(u)&&x(f)))return i.insertBefore(o,a),t}return i.appendChild(o),t.added=!0,t},s.prototype._safeRemoveChild=function(e){var t=e.parentNode;t&&t.removeChild(e)},s.prototype.destroy=function(){var e=this,t=e.element||{},n=e.shadows,i=e.box,s;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=null,e.clipPath&&(e.clipPath=e.clipPath.destroy());if(e.stops){for(s=0;s<e.stops.length;s++)e.stops[s]=e.stops[s].destroy();e.stops=null}return e._safeRemoveChild(t),n&&r(n,function(t){e._safeRemoveChild(t)}),i&&i.destroy(),$.each(e,function(t,n){delete e[t]}),null},s.prototype.empty=function(){var e=this.element,t=e.childNodes,n=t.length;while(n--)e.removeChild(t[n]),$(t[n]).remove()},s.prototype.remove=function(){var e=this.element,t=e.parentNode;t.removeChild(e),$(e).remove()},s}(L),M=function(t){function r(e,n,r,i){t.call(this,e,n,r,i),this.gradientCache={},this.init(e,n,r,i)}return e(r,t),r.prototype.init=function(e,t,s,u){var a=this,f=n.location,l;this.RaphaelCanvas=e,this.symbols=r._symbols,this.Element=O,$(t).is("svg")?(a.box=t,l=new a.Element,l.element=t,l.render=a,a.defs=$("defs",t).get(0),a.gradients={}):(l=a.createElement("svg").attr({xmlns:o,version:"1.1"}),t.appendChild(l.element),a.box=l.element,a.boxWrapper=l,a.defs=this.createElement("defs").add(),a.gradients={},a.setSize(s,u)),a.url=i?"":f.href.replace(/#.*?$/,"")},r.prototype.destroy=function(){var e=this;return e.box=null,k(e.gradients||{}),e.gradients=null,null},r.prototype.createElement=function(e){var t=new this.Element;return t.init(this,e),t},r.prototype.path=function(e){var t=this.createElement("path");return t.attr({d:e,fill:m}),t},r.prototype.circle=function(e,t,n){var r=$.isPlainObject(e)?e:{x:e,y:t,r:n},i=this.createElement("circle");return i.attr(r),i},r.prototype.rect=function(e,t,n,r,i,s){$.isPlainObject(e)&&(t=e.y,n=e.width,r=e.height,i=e.r,s=e.strokeWidth,e=e.x);var o=this.createElement("rect");return o.attr({rx:i,ry:i,fill:m}),o.attr(o.crisp(s,e,t,Math.max(n,0),Math.max(r,0))),o},r.prototype.setSize=function(e,t){var n=this;n.width=e,n.height=t,n.boxWrapper.attr({width:e,height:t})},r.prototype.g=function(e){var t=this.createElement("g");return x(e)&&t.attr({"class":h+e}),t},r.prototype.text=function(e,t,n){$.isPlainObject(e)&&(t=e.y,n=e.text,e=e.x);var r=new this.Element,i=this.RaphaelCanvas;if(i&&i.text){var s=i.text(e,t,n);r.raphaelObj=s,r.element=s.node,r.renderer=this,r.attr({"text-anchor":"middle"})}else r=this.createElement("text"),r.attr({x:e,y:t,"text-anchor":"middle"}),r.element.textContent=n;return r},r.prototype.symbol=function(e,t,n,r,i){var s,o=this,u=o.symbols[e],a=u&&u(Math.round(t),Math.round(n),r,i);return a?(s=o.path(a),$.extend(s,{symbolName:e,x:t,y:n,r:r}),i&&$.extend(s,i)):s=o.circle(t,n,r),s},r.prototype.clipRect=function(e,t,n,r){var i,s=h+a++,o=this.createElement("clipPath");return o.attr({id:s}),$(this.defs).append(o.element),i=this.rect(e,t,n,r,0).add(o),i.id=s,i.clipPath=o,i},r.prototype._parsegradientcolor=function(e){var t=this,n=[],r,i,s,o,u,a,f,l;if(t.gradientCache[e])return t.gradientCache[e];for(s=0,a=e.length;s<a;s++){r={},i=e[s].match(/^([^:]*):?([\d\.]*)/),r.color=Raphael.getRGB(i[1]);if(r.color.error)return null;r.color=r.color.hex,i[2]&&(r.offset=i[2]+"%"),n.push(r)}for(s=1,a=n.length-1;s<a;s++)if(!n[s].offset){o=parseFloat(n[s-1].offset||0),u=0;for(f=s+1;f<a;f++)if(n[f].offset){u=n[f].offset;break}u||(u=100,f=a),u=parseFloat(u),l=(u-o)/(f-s+1);for(;s<f;s++)o+=l,n[s].offset=o+"%"}return t.gradientCache[e]=n,n},r.prototype._color=function(e,t,n){var r=this,i="color",s=.5,o=.5,u=r.gradients,f,l,c,p,d,v,m,g,y,E,S=e,x,N,C;w.test(e)?i="linear":e=e.replace(b,function(e,t,n){i="radial";if(t&&n){s=parseFloat(t),o=parseFloat(n);var r=o>.5?1:-1;Math.pow(s-.5,2)+Math.pow(o-.5,2)>.25&&(o=Math.sqrt(.25-Math.pow(s-.5,2))*r+.5)&&o!==.5&&(o=parseFloat(o.toFixed(5))-1e-5*r)}return""});if(i==="linear"||i==="radial"){l=e.split(/\s*\-\s*/);if(i==="linear"){N=l.shift(),N=-parseFloat(N);if(isNaN(N))return e;g=[0,0,Math.cos(Raphael.rad(N)),Math.sin(Raphael.rad(N))],y=1/(Math.max(Math.abs(g[2]),Math.abs(g[3]))||1),g[2]*=y,g[3]*=y,g[2]<0&&(g[0]=-g[2],g[2]=0),g[3]<0&&(g[1]=-g[3],g[3]=0),c=g[0],p=g[1],d=g[2],v=g[3]}return u[S]?x=T(u[S].element,"id"):(C=this._parsegradientcolor(l),$.each(C,function(e,t){t.offset=t.offset?t.offset:e?"100%":"0%"}),x=h+a++,f=r.createElement(i+"Gradient"),i==="radial"?f.attr({id:x,fx:s,fy:o}):f.attr({id:x,x1:c,y1:p,x2:d,y2:v}),$(this.defs).append(f.element),f.stops=[],$.each(C,function(e,t){var n;m=t.color,E=1,n=r.createElement("stop"),n.attr({offset:t.offset,"stop-color":m,"stop-opacity":E}).add(f),f.stops.push(n)}),u[S]=f),"url(#"+x+")"}return t.removeAttribute(n+"-opacity"),e},r.prototype._transform=function(e,t){var n=this,r=Raphael.parseTransformString(e),i=t,s=Raphael.matrix(1,0,0,1,0,0);if(r)for(var o=0,u=r.length;o<u;o++){var a=r[o],f=a.length,l=String(a[0]).toLowerCase(),c=a[0]!=l,h,p,d,v,m,g;c&&(h=s.invert()),l=="t"&&f==3?c?(p=h.x(0,0),d=h.y(0,0),v=h.x(a[1],a[2]),m=h.y(a[1],a[2]),s.translate(v-p,m-d)):s.translate(parseFloat(a[1]),parseFloat(a[2])):l=="r"?f==2?(g=g||t.getBBox(),s.rotate(parseFloat(a[1]),g.x+g.width/2,g.y+g.height/2)):f==4&&(c?(v=h.x(a[2],a[3]),m=h.y(a[2],a[3]),s.rotate(parseFloat(a[1]),v,m)):s.rotate(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]))):l=="s"?f==2||f==3?(g=g||t.getBBox(),s.scale(parseFloat(a[1]),parseFloat(a[f-1]),g.x+g.width/2,g.y+g.height/2)):f==5&&(c?(v=h.x(a[3],a[4]),m=h.y(a[3],a[4]),s.scale(parseFloat(a[1]),parseFloat(a[2]),v,m)):s.scale(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4]))):l=="m"&&f==7&&s.add(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4]),parseFloat(a[5]),parseFloat(a[6]),s)}return s.toString()},r._symbols={box:function(e,t,n){var r=.707*n;return[g,e-r,t-r,y,e+r,t-r,e+r,t+r,e-r,t+r,"Z"]},tri:function(e,t,n){return[g,e,t-1.33*n,y,e+n,t+.67*n,e-n,t+.67*n,"Z"]},invertedTri:function(e,t,n){return[g,e,t+1.33*n,y,e-n,t-.67*n,e+n,t-.67*n,"Z"]},diamond:function(e,t,n){return[g,e,t-n,y,e+n,t,e,t+n,e-n,t,"Z"]},cross:function(e,t,n){var r=.707*n;return[g,e-r,t-r,y,e+r,t+r,g,e-r,t+r,y,e+r,t-r]},arc:function(e,t,n,r){var i=r.start,s=r.end-1e-6,o=r.innerR,u=Math.cos(i),a=Math.sin(i),f=Math.cos(s),l=Math.sin(s),c=r.end-i<Math.PI?0:1;return[g,e+n*u,t+n*a,"A",n,n,0,c,1,e+n*f,t+n*l,y,e+o*f,t+o*l,"A",o,o,0,c,0,e+o*u,t+o*a,"Z"]}},r}(A),_=function(t){function n(){t.apply(this,arguments)}return e(n,t),n.prototype.init=function(e,t){var n=["<",t,' filled="f" stroked="f"'],r=["position: ",l,";"];(t==="shape"||t===f)&&r.push("left:0;top:0;width:10px;height:10px;"),s&&r.push("visibility: ",t===f?c:p),n.push(' style="',r.join(""),'"/>'),t&&(n=t===f||t==="span"||t==="img"?n.join(""):e.prepVML(n),this.element=C(n)),this.renderer=e},n.prototype.add=function(e){var t=this,n=t.renderer,r=t.element,i=n.box,o=e&&e.inverted,u=e?e.element||e:i;return o,s&&u.gVis===c&&N(r,{visibility:c}),u.appendChild(r),t.added=!0,t},n.prototype.attr=function(e,t){var n,r,i,o=this,u=o.element||{},a=u.style,l=u.nodeName,h=o.symbolName,g=o.renderer,y,b,w=o.shadows,C,k,L,A=o;if(e===undefined)return A;E(e)&&x(t)&&(n=e,e={},e[n]=t);if(E(e))n=e,n==="strokeWidth"||n==="stroke-width"?A=o.strokeweight:A=o[n];else if(e){L=this.raphaelObj;if(L&&L.attr)return L.attr(e),$.each(["visibility","class"],function(t,n){if(n in e){C=!1,r=e[n];switch(n){case"visibility":r===p?L.show():r===c&&L.hide(),C=!0;break;case"class":u.className=r}C||(s?u[n]=r:T(u,n,r))}}),A;$.each(e,function(t,n){r=n,C=!1;if(h&&/^(x|y|r|start|end|width|height|innerR)/.test(t))b||(o.symbolAttr(e),b=!0),C=!0;else if(t==="d"){r=r||[],o.d=r.join(" "),i=r.length,k=[];while(i--)S(r[i])?k[i]=Math.round(r[i]*10)-5:r[i]==="Z"?k[i]="x":k[i]=r[i];r=k.join(" ")||"x",u.path=r;if(w){i=w.length;while(i--)w[i].path=r}C=!0}else if(t==="zIndex"||t===d){if(s&&t===d&&l===f){u.gVis=r,y=u.childNodes,i=y.length;while(i--)N(y[i],{visibility:r});r===p&&(r=null)}r&&(a[t]=r),C=!0}else t==="class"?u.className=r:t==="stroke"?t="strokecolor":t==="stroke-width"||t==="strokeWidth"?(u.stroked=r?!0:!1,t="strokeweight",o[t]=r,S(r)&&(r+=v)):t==="fill"&&(l==="SPAN"?a.color=r:(u.filled=r!==m?!0:!1,r=g.color(r,u,t),t="fillcolor"));C||(t==="opacity"&&(t="fill-opacity"),s?u[t]=r:T(u,t,r)),u.attrs=u.attrs||{},u.attrs[t]=r})}return A},n.prototype.scale=function(e,t){var n=this,r=n.attr("stroke-width")||0;n.css({filter:"progid:DXImageTransform.Microsoft.Matrix(M11="+e+","+", M12=0, M21=0, M22="+t+", Dx=0, Dy=0, sizingmethod='auto expand')"}).attr("stroke-width",r)},n.prototype.clip=function(e){var t=this,n=e.members;return n.push(t),t.css(e.getCSS(t.inverted))},n.prototype.css=function(e){var t=this,n=t.element,r=e&&n.tagName==="SPAN"&&e.width;return r&&(delete e.width,t.textWidth=r),t.styles=$.extend(t.styles,e),N(t.element,e),t},n.prototype.destroy=function(){var e=this;return e.destroyClip&&e.destroyClip(),O.prototype.destroy.apply(e)},n.prototype.empty=function(){var e=this.element,t=e.childNodes,n=t.length,r;while(n--)r=t[n],r.parentNode.removeChild(r),$(r).remove()},n.prototype.getBBox=function(){var e=this,t=e.element,n=e.bBox;return n||(t.nodeName==="text"&&(t.style.position=l),n=e.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),n},n}(O),D=function(t){function i(){t.apply(this,arguments),this.isIE8=$.browser.msie&&parseInt($.browser.version)===8}return e(i,t),i.prototype.init=function(e,t,r,s){var o=this,u;this.RaphaelCanvas=e,this.Element=_,this.symbols=i._symbols,$(t).hasClass("vmlcontainer")?(o.box=t,u=new this.Element,u.element=t,u.render=this,o.boxWrapper=u):(u=o.createElement(f),t.appendChild(u.element),o.box=u.element,o.boxWrapper=u,o.setSize(r,s)),n.namespaces.v||(n.namespaces.add("v","urn:schemas-microsoft-com:vml"),n.createStyleSheet().cssText="v\\:fill, v\\:path, v\\:shape, v\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},i.prototype.clipRect=function(e,t,n,i){var o=this.createElement();return $.extend(o,{members:[],left:e,top:t,width:n,height:i,getCSS:function(e){var t=this,n=t.top,r=t.left,i=r+t.width,o=n+t.height,u={clip:"rect("+Math.round(e?r:n)+"px,"+Math.round(e?o:i)+"px,"+Math.round(e?i:o)+"px,"+Math.round(e?n:r)+"px)"};return!e&&s&&$.extend(u,{width:i+v,height:o+v}),u},updateClipping:function(){r(o.members,function(e,t){t.css(o.getCSS(t.inverted))})}}),o},i.prototype.color=function(e,t,n){var r,i=this,s="color",o,u,a,f,l=[],c,h,p,d,v=0;w.test(e)?s="linear":e=e.replace(b,function(e,t,n){return s="radial",t&&n&&(t=parseFloat(t),n=parseFloat(n),Math.pow(t-.5,2)+Math.pow(n-.5,2)>.25&&(n=Math.sqrt(.25-Math.pow(t-.5,2))*((n>.5?1:0)*2-1)+.5),p=t+" "+n),""});if(s!=="linear"&&s!=="radial")return h=t.getElementsByTagName(n),h.length&&(h[0].opacity=1),e;o=e.split(/\s*\-\s*/),s==="linear"&&(v=o.shift(),v=-parseFloat(v.toString())),d=i._parsegradientcolor(o),$.each(d,function(e,t){t.offset=t.offset?t.offset:e?"100%":"0%",l.push(t.offset+" "+t.color),u=t.color,e?f=u:a=u}),s==="radial"?r=['<fill colors="',l.join(),'" angle="0"','" focusposition="',p,'" color="',a,'" color2="',f,'" focussize="0 0"',' type="gradientTitle" focus="100%" method="none" />']:r=['<fill colors="',l.join(),'" angle="',v.toString(),'" type="gradient" focus="100%" method="sigma" />'],c=C(i.prepVML(r)),$(t).append(c)},i.prototype.prepVML=function(e){var t="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return e=e.join(""),n?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e.indexOf('style="')===-1?e=e.replace("/>",' style="'+t+'" />'):e=e.replace('style="','style="'+t)):e=e.replace("<","<v:"),e},i.prototype.path=function(e){var t=this.createElement("shape");return t.attr({coordsize:"100 100",d:e}),t},i.prototype.g=function(e){var t,n;return e&&(n={className:h+e,"class":h+e}),t=this.createElement(f).attr(n),t},i.prototype.text=function(e,t,n){var r,i,s,o,u=this.RaphaelCanvas;if(u&&u.text){r=new this.Element;var a=u.text(e,t,n);$(a.node).css({visibility:p}),r.raphaelObj=a,r.element=a.node,r.renderer=this}else r=this.createElement("span"),i=r.element,i.innerHTML=n,$(i).appendTo("body"),s=$(i).width(),o=$(i).height(),e-=s/2,t-=o/2,r.x=e,r.y=t,$(i).css({position:"absolute","white-space":"nowrap","font-family":"Arial","font-size":"10",left:e+"px",top:t+"px"});return r},i._symbols=$.extend({},M._symbols,{arc:function(e,t,n,r){var i=r.start,s=r.end,o=Math.cos(i),u=Math.sin(i),a=Math.cos(s),f=Math.sin(s),l=r.innerR,c=.07/n,h=l&&.1/l||0;return s-i===0?["x"]:(2*Math.PI-s+i<c?a=-c:s-i<h&&(a=Math.cos(i+h)),["wa",e-n,t-n,e+n,t+n,e+n*o,t+n*u,e+n*a,t+n*f,"at",e-l,t-l,e+l,t+l,e+l*a,t+l*f,e+l*o,t+l*u,"x","e"])},circle:function(e,t,n){return["wa",e-n,t-n,e+n,t+n,e+n,t,e+n,t,"e"]},rect:function(e,t,n,r){if(!x(r))return[];var i=r.width,s=r.height,o=e+i,u=t+s;return n=Math.min(n,i,s),[g,e+n,t,y,o-n,t,"wa",o-2*n,t,o,t+2*n,o-n,t,o,t+n,y,o,u-n,"wa",o-2*n,u-2*n,o,u,o,u-n,o-n,u,y,e+n,u,"wa",e,u-2*n,e+2*n,u,e+n,u,e,u-n,y,e,t+n,"wa",e,t,e+2*n,t+2*n,e,t+n,e+n,t,"x","e"]}}),i}(M);t.createRender=P})(t.render||(t.render={}));var n=t.render})(t.chart||(t.chart={}));var n=t.chart}(wijmo||(wijmo={}))});