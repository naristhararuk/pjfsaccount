var wijmo;define(["./wijmo.widget"],function(){var e=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};(function(t){(function(n){var r=jQuery,i="wijslider",s="ui-slider-handle",o=function(t){function n(){t.apply(this,arguments)}return e(n,t),n.prototype._valueMin=function(){return r.ui.slider.prototype._valueMin.apply(this,arguments)},n.prototype._valueMax=function(){return r.ui.slider.prototype._valueMax.apply(this,arguments)},n.prototype._refreshValue=function(){return r.ui.slider.prototype._refreshValue.apply(this,arguments)},n.prototype._create=function(){return r.ui.slider.prototype._create.apply(this,arguments)},n.prototype._createHandles=function(){return r.ui.slider.prototype._createHandles.apply(this,arguments)},n.prototype.values=function(e,t){return r.ui.slider.prototype.values.apply(this,arguments)},n.prototype.value=function(e){return r.ui.slider.prototype.value.apply(this,arguments)},n.prototype._slide=function(e,t,n){return r.ui.slider.prototype._slide.apply(this,arguments)},n.prototype._change=function(e,t){return r.ui.slider.prototype._change.apply(this,arguments)},n.prototype._normValueFromMouse=function(e){return r.ui.slider.prototype._normValueFromMouse.apply(this,arguments)},n}(t.JQueryUIWidget);n.JQueryUISlider=o;var u=function(t){function n(){t.apply(this,arguments)}return e(n,t),n.prototype._setOption=function(e,t){var n=this._isDisabled(),i;if(e==="values")t=this._pre_set_values(t),this._parseToNumberArray(t),this.options[e]=t,this._setValuesOption();else if(e==="disabled"){this.options[e]=t,i=this._isDisabled();if(n===i)return;this._toggleDisabledSlider()}else t=this._parseToNumberValue(e,t),r.ui.slider.prototype._setOption.call(this,e,t);return e==="range"&&this._setRangeOption(t),this},n.prototype._toggleDisabledSlider=function(){var e=this.options.wijCSS,t=this._isDisabled(),n=this._container.find("."+e.wijmoSliderDecButton),r=this._container.find("."+e.wijmoSliderIncButton);this.element.toggleClass(e.stateDisabled,t),n&&n.length>0&&n.toggleClass(e.stateDisabled,t),r&&r.length>0&&r.toggleClass(e.stateDisabled,t)},n.prototype._setRangeOption=function(e){var t=this,n=t.options,r;e===!0&&(!n.values||n.values&&n.values.length===0?(r=t._valueMin(),n.values=[r,r]):n.values.length&&n.values.length!==2&&(r=n.values[0],n.values=[r,r]),t._refresh_handle(2)),t._re_createRange(),t._refreshValue()},n.prototype._setValuesOption=function(){var e=this,t=0,n;e._animateOff=!0,e._refreshValue(),r.isArray(e.options.values)&&(t=e.options.values.length);for(n=0;n<t;n++)e._change(null,n);e._animateOff=!1},n.prototype._re_createRange=function(){var e=this,t=e.options,n=t.wijCSS;e.range&&(e.range.remove(),r(".ui-slider-range",e.element).length>0&&r(".ui-slider-range",e.element).remove()),t.range&&(e.range=r("<div></div>").appendTo(e.element).addClass(n.uiSliderRange).addClass(n.header),t.range==="min"?e.range.addClass(n.uiSliderRangeMin):t.range==="max"&&e.range.addClass(n.uiSliderRangeMax))},n.prototype._pre_set_values=function(e){var t=this,n=t.options,r=1,i;return r=e&&e.length?e.length:1,n.range===!0&&(!e||e&&e.length===0?(i=t._valueMin(),e=[i,i]):e.length&&e.length!==2&&(i=e[0],e=[i,i]),r=2),t._refresh_handle(r),t._re_createRange(),e},n.prototype._createHandles=function(){var e=this.options.wijCSS;t.prototype._createHandles.call(this),this.handles.each(function(t){r(this).removeClass("ui-slider-handle").removeClass("ui-state-default").removeClass("ui-corner-all").addClass(s).addClass(e.uiSliderHandle).addClass(e.stateDefault).addClass(e.cornerAll)})},n.prototype._refresh_handle=function(e){var t=this,n=this.options.wijCSS,r=t.handles.length,i="<a class='"+s+" "+n.uiSliderHandle+" "+n.stateDefault+" "+n.cornerAll+"' href='#'></a>",o=[],u;if(r!==e){if(e>r){for(u=r;u<e;u++)o.push(i);t.element.append(o.join(""))}else t.element.find("."+s).eq(e-1).nextAll().remove();t.handles=t.element.find("."+s)}},n.prototype._initState=function(){this._dragFillTarget=!1,this._dragFillStart=0,this._rangeValue=0,this._oldValue1=0,this._oldValue2=0,this._oldX=0,this._oldY=0},n.prototype._create=function(){var e=this,n=e.element,i=e.options,o=i.wijCSS,u,a,f,l,c,h,p,d,v,m,g;r.each(i,function(t,n){t==="values"?e._parseToNumberArray(n):i[t]=e._parseToNumberValue(t,n)}),window.wijmoApplyWijTouchUtilEvents&&(r=window.wijmoApplyWijTouchUtilEvents(r)),this._initState(),e._oriStyle=n.attr("style");if(n.is(":input")){i.orientation==="horizontal"?u=r("<div></div>").width(n.width()).appendTo(document.body):u=r("<div></div>").height(n.height()).appendTo(document.body),a=n.val();if(a!=="")try{f=a.split(";"),c=f.length;if(c>0){for(l=0;l<c;l++)f[l]=parseInt(f[l],10);c===1?i.value=f[0]:i.values=f}}catch(y){}n.data(e.widgetName,u.wijslider(i)).after(r(document.body).children("div:last")).hide(),this._isDisabled()&&this._toggleDisabledSlider();return}t.prototype._create.call(this),e.range&&e.range.removeClass("ui-slider-range").addClass(o.uiSliderRange),n.removeClass("ui-slider").removeClass("ui-slider-"+this.options.orientation).removeClass("ui-widget").removeClass("ui-widget-content").removeClass("ui-corner-all").addClass(o.uiSlider).addClass(i.orientation==="horizontal"?o.uiSliderHorizontal:o.uiSliderVertical).addClass(o.widget).addClass(o.content).addClass(o.cornerAll),n.data("originalStyle",n.attr("style")),n.data("originalContent",n.html()),h=n.width(),p=n.height(),d=r("<div></div>"),i.orientation==="horizontal"?d.addClass(o.wijmoSliderHorizontal):d.addClass(o.wijmoSliderVertical),d.width(h).height(p),v=r("<a><span></span></a>").addClass(o.wijmoSliderDecButton),m=r("<a><span></span></a>").addClass(o.wijmoSliderIncButton),n.wrap(d).before(v).after(m),e._container=n.parent(),e._attachClass(),g=n.find("."+s),e._adjustSliderLayout(v,m,g),this._isDisabled()&&this._toggleDisabledSlider(),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e._refreshSlider(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijslider"),e._bindEvents()},n.prototype.values=function(e,t){return r.ui.slider.prototype.values.apply(this,arguments)},n.prototype.value=function(e){return r.ui.slider.prototype.value.apply(this,arguments)},n.prototype.refresh=function(){var e=this.element.data("wijslider"),t=this.element.data("wijmo-wijslider");this.destroy(),this.element.data("wijslider",e),this.element.data("wijmo-wijslider",t),this._create()},n.prototype._refreshSlider=function(){var e=this,t=e.options.wijCSS,n,r,i;r=e._container.find("."+t.wijmoSliderDecButton),n=e._container.find("."+t.wijmoSliderIncButton),i=e._container.find("."+s),e._adjustSliderLayout(r,n,i),e._refreshValue()},n.prototype._adjustSliderLayout=function(e,t,n){var r=this,i=r.element,s=r.options,o,u,a,f,l,c,h,p,d,v,m,g;o=r._container.width(),u=r._container.height(),a=e.outerWidth(),f=e.outerHeight(),l=t.outerWidth(),c=t.outerHeight(),h=n.outerWidth(),p=n.outerHeight(),s.orientation==="horizontal"?(d=u/2-f/2,e.css("top",d).css("left",0),v=u/2-c/2,t.css("top",v).css("right",0),i.css("left",a+h/2-1).css("top",u/2-i.outerHeight()/2).width(o-a-l-h-2)):(m=o/2-a/2,e.css("left",m).css("top",0),g=o/2-l/2,t.css("left",g).css("bottom",0),i.css("left",o/2-i.outerWidth()/2).css("top",f+p/2+1).height(u-f-c-p-2))},n.prototype.destroy=function(){var e=this,n,i,o=e.options.wijCSS;n=this._getDecreBtn(),i=this._getIncreBtn(),n.unbind("."+e.widgetName),i.unbind("."+e.widgetName),e.element.removeClass(o.uiSlider).removeClass(o.uiSliderHorizontal).removeClass(o.uiSliderVertical).removeClass(o.widget).removeClass(o.content).removeClass(o.cornerAll).removeClass(s),t.prototype.destroy.call(this),r("a",e.element.parent()).remove(),e.element.unbind("."+e.widgetName),e.element.unwrap(),e._oriStyle===undefined?e.element.removeAttr("style"):e.element.attr("style",e._oriStyle),e.element.removeData(e.widgetName).removeData("originalStyle").removeData("originalContent"),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null)},n.prototype._slide=function(e,n,r){var i=this,s=i.options,o=s.minRange,u=r,a;s.range===!0&&(a=i.values(),n===0&&a[1]-o<r?u=a[1]-o:n===1&&a[0]+o>r&&(u=a[0]+o)),t.prototype._slide.call(this,e,n,u)},n.prototype._getDecreBtn=function(){var e=this.element.parent().find("."+this.options.wijCSS.wijmoSliderDecButton);return e},n.prototype._getIncreBtn=function(){var e=this.element.parent().find("."+this.options.wijCSS.wijmoSliderIncButton);return e},n.prototype._attachClass=function(){var e=this.options.wijCSS;this._getDecreBtn().addClass(e.cornerAll).addClass(e.stateDefault).attr("role","button"),this._getIncreBtn().addClass(e.cornerAll).addClass(e.stateDefault).attr("role","button"),this.element.parent().attr("role","slider").attr("aria-valuemin",this.options.min).attr("aria-valuenow","0").attr("aria-valuemax",this.options.max),this.options.orientation==="horizontal"?(this.element.parent().addClass(e.wijmoSliderHorizontal),this._getDecreBtn().find("> span").addClass(e.icon).addClass(e.iconArrowLeft),this._getIncreBtn().find("> span").addClass(e.icon).addClass(e.iconArrowRight)):(this.element.parent().addClass(e.wijmoSliderVertical),this._getDecreBtn().find("> span").addClass(e.icon).addClass(e.iconArrowUp),this._getIncreBtn().find("> span").addClass(e.icon).addClass(e.iconArrowDown))},n.prototype._bindEvents=function(){var e=this,t,n,r;t=this._getDecreBtn(),n=this._getIncreBtn(),r=e.element,t.bind("click."+e.widgetName,e,e._decreBtnClick),n.bind("click."+e.widgetName,e,e._increBtnClick),t.bind("mouseover."+e.widgetName,e,e._decreBtnMouseOver),t.bind("mouseout."+e.widgetName,e,e._decreBtnMouseOut),t.bind("mousedown."+e.widgetName,e,e._decreBtnMouseDown),t.bind("mouseup."+e.widgetName,e,e._decreBtnMouseUp),n.bind("mouseover."+e.widgetName,e,e._increBtnMouseOver),n.bind("mouseout."+e.widgetName,e,e._increBtnMouseOut),n.bind("mousedown."+e.widgetName,e,e._increBtnMouseDown),n.bind("mouseup."+e.widgetName,e,e._increBtnMouseUp),r.bind("mouseup."+e.widgetName,e,e._elementMouseupEvent)},n.prototype._decreBtnMouseOver=function(e){var t=e.data,n,r;if(t._isDisabled())return;n={buttonType:"decreButton"},t._trigger("buttonMouseOver",e,n),r=t._getDecreBtn(),r.addClass(t.options.wijCSS.stateHover)},n.prototype._increBtnMouseOver=function(e){var t=e.data,n,r;if(t._isDisabled())return;n={buttonType:"increButton"},t._trigger("buttonMouseOver",e,n),r=t._getIncreBtn(),r.addClass(t.options.wijCSS.stateHover)},n.prototype._decreBtnMouseOut=function(e){var t=e.data,n,r,i=t.options.wijCSS;if(t._isDisabled())return;n={buttonType:"decreButton"},t._trigger("buttonMouseOut",e,n),r=t._getDecreBtn(),r.removeClass(i.stateHover).removeClass(i.stateActive)},n.prototype._increBtnMouseOut=function(e){var t=e.data,n,r,i=t.options.wijCSS;if(t._isDisabled())return;n={buttonType:"increButton"},t._trigger("buttonMouseOut",e,n),r=t._getIncreBtn(),r.removeClass(i.stateHover).removeClass(i.stateActive)},n.prototype._decreBtnMouseDown=function(e){var t=e.data,n,i;if(t._isDisabled())return;n={buttonType:"decreButton"},t._trigger("buttonMouseDown",e,n),i=t._getDecreBtn(),i.addClass(t.options.wijCSS.stateActive),r(document).bind("mouseup."+t.widgetName,{self:t,ele:i},t._documentMouseUp),t._intervalID!==null&&(window.clearInterval(t._intervalID),t._intervalID=null),t._intervalID=window.setInterval(function(){t._decreBtnHandle(t)},200)},n.prototype._documentMouseUp=function(e){var t=e.data.self,n=e.data.ele;if(t._isDisabled())return;n.removeClass(t.options.wijCSS.stateActive),t._intervalID!==null&&(window.clearInterval(t._intervalID),t._intervalID=null),r(document).unbind("mouseup."+t.widgetName,t._documentMouseUp)},n.prototype._increBtnMouseDown=function(e){var t=e.data,n,i;if(t._isDisabled())return;n={buttonType:"increButton"},t._trigger("buttonMouseDown",e,n),i=t._getIncreBtn(),i.addClass(t.options.wijCSS.stateActive),r(document).bind("mouseup."+t.widgetName,{self:t,ele:i},t._documentMouseUp),t._intervalID!==null&&(window.clearInterval(t._intervalID),t._intervalID=null),t._intervalID=window.setInterval(function(){t._increBtnHandle(t)},200)},n.prototype._decreBtnMouseUp=function(e){var t=e.data,n,r;if(t._isDisabled())return;n={buttonType:"decreButton"},t._trigger("buttonMouseUp",e,n),r=t._getDecreBtn(),r.removeClass(t.options.wijCSS.stateActive),window.clearInterval(t._intervalID)},n.prototype._increBtnMouseUp=function(e){var t=e.data,n,r;if(t._isDisabled())return;n={buttonType:"increButton"},t._trigger("buttonMouseUp",e,n),r=t._getIncreBtn(),r.removeClass(t.options.wijCSS.stateActive),window.clearInterval(t._intervalID)},n.prototype._decreBtnHandle=function(e){e.options.orientation==="horizontal"?e._decre():e._incre()},n.prototype._decreBtnClick=function(e){var t=e.data,n;if(t._isDisabled())return;t._mouseSliding=!1,t._decreBtnHandle(t),n={buttonType:"decreButton",value:t.value()},t._trigger("buttonClick",e,n)},n.prototype._increBtnHandle=function(e){e.options.orientation==="horizontal"?e._incre():e._decre()},n.prototype._increBtnClick=function(e){var t=e.data,n;if(t._isDisabled())return;t._mouseSliding=!1,t._increBtnHandle(t),n={buttonType:"increButton",value:t.value()},t._trigger("buttonClick",e,n)},n.prototype._decre=function(){var e=this,t=e.value(),n=e.options,r=n.min,i=n.step;n.values&&n.values.length?(t=e.values(0),t<=r?e.values(0,r):e.values(0,t-i)):(t=e.value(),t<=r?e.value(r):e.value(t-i)),e.element.parent().attr("aria-valuenow",e.value())},n.prototype._incre=function(){var e=this,t=e.value(),n=e.options,r=n.max,i=n.step,s;n.values&&n.values.length?(s=n.values.length===1?0:1,t=e.values(s),t>=r?e.values(s,r):e.values(s,t+i)):(t=e.value(),t>=r?e.value(r):e.value(t+i)),e.element.parent().attr("aria-valuenow",e.value())},n.prototype._elementMouseupEvent=function(e){var t=e.data;t.options.dragFill&&t.options.range&&t._dragFillStart>0&&(t._dragFillStart=0)},n.prototype._isDisabled=function(){var e=this.options;return e.disabledState===!0||e.disabled===!0},n.prototype._isUISlider=function(e){var t=this.options.wijCSS,n=r(e);return n.hasAllClasses(t.uiSliderRange)&&n.hasAllClasses(t.header)&&n.hasAllClasses(t.cornerAll)||n.hasAllClasses(t.uiSliderRange)&&n.hasAllClasses(t.header)},n.prototype._mouseCapture=function(e){this.element.parent().attr("aria-valuenow",this.value());if(this.options.dragFill){if(this._isUISlider(e.target))return this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),!0;try{return r.ui.slider.prototype._mouseCapture.apply(this,arguments)}catch(t){}}else try{return r.ui.slider.prototype._mouseCapture.apply(this,arguments)}catch(t){}},n.prototype._mouseStart=function(e){if(this._isDisabled())return!1;if(this.options.dragFill){if(e.target&&this._isUISlider(e.target))return this._setStateForDragFill(e),this._trigger("start",e,null);this._dragFillTarget=!1}return!0},n.prototype._mouseDrag=function(e){return this.options.dragFill?this._processDragFill(e)?!1:r.ui.slider.prototype._mouseDrag.apply(this,arguments):r.ui.slider.prototype._mouseDrag.apply(this,arguments)},n.prototype._mouseStop=function(e){var t=r.ui.slider.prototype._mouseStop.apply(this,arguments);return this.options.dragFill&&this._resetStateForDragFill(),t},n.prototype._setStateForDragFill=function(e){this._dragFillTarget=!0,this._rangeValue=this.values(1)-this.values(0),this._oldValue1=this.values(0),this._oldValue2=this.values(1),this._oldX=e.pageX,this._oldY=e.pageY},n.prototype._resetStateForDragFill=function(){r(document.documentElement).css("cursor","default"),window.setTimeout(function(){this._dragFillTarget=!1,this._dragFillStart=0},500)},n.prototype._processDragFill=function(e){var t,n,i,s,o,u,a,f;return t=e.pageX-this._oldX,n=this.element.outerWidth(),this.options.orientation==="vertical"&&(n=this.element.outerHeight(),t=-(e.pageY-this._oldY)),i=(this.options.max-this.options.min)/n*t,this._dragFillTarget?(this.options.orientation==="vertical"?r(document.documentElement).css("cursor","s-resize"):r(document.documentElement).css("cursor","w-resize"),this._dragFillStart>0&&(s=this._rangeValue,this.values(0,this._oldValue1+i),this.values(1,this._oldValue1+i+s),o=this.values(0),u=this.values(1),o+s>this.options.max&&this.values(0,this.options.max-s),u-s<this.options.min&&this.values(1,this.options.min+s)),this._dragFillStart++,!0):!1},n.prototype._parseToNumberValue=function(e,t){var n;switch(e){case"minRange":case"max":case"min":case"step":case"value":typeof t=="string"?n=parseFloat(t):n=t;break;default:n=t}return n},n.prototype._parseToNumberArray=function(e){e&&r.isArray(e)&&r.each(e,function(t,n){typeof n=="string"&&(e[t]=parseFloat(n))})},n}(o);n.wijslider=u,u.prototype.widgetEventPrefix="wijslider";var a=function(){function e(){this.wijCSS={uiSliderRange:"ui-slider-range",uiSliderHandle:"ui-slider-handle",wijmoSliderDecButton:"wijmo-wijslider-decbutton",wijmoSliderIncButton:"wijmo-wijslider-incbutton",wijmoSliderHorizontal:"wijmo-wijslider-horizontal",wijmoSliderVertical:"wijmo-wijslider-vertical",uiSliderRangeMax:"ui-slider-range-max",uiSliderRangeMin:"ui-slider-range-min",uiSlider:"ui-slider",uiSliderHorizontal:"ui-slider-horizontal",uiSliderVertical:"ui-slider-vertical"},this.buttonMouseOver=null,this.buttonMouseOut=null,this.buttonMouseDown=null,this.buttonMouseUp=null,this.buttonClick=null,this.dragFill=!0,this.minRange=0,this.animate=!1,this.max=100,this.min=0,this.orientation="horizontal",this.range=!1,this.step=1,this.value=0,this.values=null,this.change=null,this.slide=null,this.start=null,this.stop=null}return e}();r.ui&&r.ui.slider&&(u.prototype.options=r.extend(!0,{},r.ui.slider.prototype.options,t.wijmoWidget.prototype.options,new a),r.wijmo.registerWidget(i,r.ui.slider,u.prototype))})(t.slider||(t.slider={}));var n=t.slider})(wijmo||(wijmo={}))});