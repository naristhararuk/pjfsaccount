var wijmo;define(["./wijmo.widget","./wijmo.wijtooltip"],function(){var e=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};(function(t){(function(n){var r=jQuery,i="wijtreemap",s={wijtreemap:"wijmo-wijtreemap",container:"wijmo-wijtreemap-container",item:"wijmo-wijtreemap-item",itemContainer:"wijmo-wijtreemap-itemcontainer",title:"wijmo-wijtreemap-title",label:"wijmo-wijtreemap-label",stateDefault:"wijstate-default",stateHover:"wijstate-hover",buttons:"wijmo-wijtreemap-buttons",backButton:"wijmo-wijtreemap-back",homeButton:"wijmo-wijtreemap-home"},o=[{max:"#00277d",mid:"#5f7ec1",min:"#a8bbe6"},{max:"#7d1f00",mid:"#c1785f",min:"#e6b7a8"},{max:"#007d27",mid:"#5fc17e",min:"#a8e6bc"},{max:"#7d003c",mid:"#c15f8f",min:"#e6a8c6"},{max:"#7d4300",mid:"#c1945f",min:"#e6c9a8"},{max:"#51007d",mid:"#9f5fc2",min:"#d1aae6"},{max:"#7d7400",mid:"#c2bb5f",min:"#e6e2a8"},{max:"#970000",mid:"#c25f5f",min:"#e6a9a9"}],u=function(t){function n(){t.apply(this,arguments)}return e(n,t),n.prototype._setOption=function(e,n){var r=this,i=r.options;if(n===i[e])return;t.prototype._setOption.call(this,e,n);switch(e){case"width":r._setWidth(n),r._repaintBox();break;case"height":r._setHeight(n),r._repaintBox();break;case"type":r._repaintBox();break;case"showDepth":break;case"data":r._refresh();break;case"valueBinding":r._resetBinding("value"),r._repaint();break;case"labelBinding":r._resetBinding("label"),r._resetLabels();break;case"colorBinding":r._resetBinding("color"),r._repaintColor();break;case"animation":break;case"showLabel":r._showLabels();break;case"labelFormatter":r._resetLabels();break;case"showTooltip":break;case"tooltipOptions":r._destroyTooltip(),r._createTooltip();break;case"showTitle":case"titleHeight":r._repaintBox();break;case"titleFormatter":r._resetTitles();break;case"minColor":case"minColorValue":case"midColor":case"midColorValue":case"maxColor":case"maxColorValue":r._resetColor(e,n);break;case"itemPainting":case"itemPainted":case"painting":case"painted":r._refresh();break;default:}},n.prototype.refresh=function(){this._refresh()},n.prototype._refresh=function(){var e=this;e._calcBounds(),e._recreateItems(),e._createColor(),e._destroyTooltip(),e._createTooltip(),e._recreateBackButtons()},n.prototype._create=function(){var e=this;t.prototype._create.call(this),e._decorate(!0),e._calcBounds(),e._createItems(),e._createColor(),e._bindEvents(),e._createBackButtons(),e._createTooltip()},n.prototype._createBackButtons=function(){var e=this,t=e.options.wijCSS,n=[s.backButton,t.tmbackButton,t.icon,t.iconArrowReturn],i=[s.homeButton,t.tmhomeButton,t.icon,t.iconHome],o=r("<span><span").addClass(s.buttons).addClass(t.tmbuttons),u=r("<span title='"+e.localizeString("backButtonTitle","back")+"'></span>").addClass(n.join(" ")),a=r("<span title='"+e.localizeString("homeButtonTitle","home")+"'></span>").addClass(i.join(" "));o.append(u).append(a),e.tmItemContainer.ele.append(o),e.buttons=o,e._showBackButtons(),e.buttons.bind("click",function(t){t.stopPropagation(),t.preventDefault();var n=r(t.target);n.hasClass(s.backButton)?e._play(e.currentContainer,e.currentContainer.parent):n.hasClass(s.homeButton)&&e._play(e.currentContainer,e.tmItemContainer)})},n.prototype.localizeString=function(e,t){var n=this.options;return n.localization&&n.localization[e]?n.localization[e]:t},n.prototype._destroyBackButtons=function(){var e=this.buttons;e&&(e.unbind("click"),e.remove(),this.buttons=null)},n.prototype._recreateBackButtons=function(){this._destroyBackButtons(),this._createBackButtons()},n.prototype._showBackButtons=function(){var e=this,t=e.options;if(!e.buttons)return;!t.showBackButtons||e.currentContainer===e.tmItemContainer?e.buttons.hide():e.buttons.show()},n.prototype._createTooltip=function(){if(!r.wijmo.wijtooltip)return;var e=this,t=e.options,n=t.tooltipOptions,i=n&&n.content,o=n&&n.showing;r("."+s.item+"."+s.stateDefault,e.element).wijtooltip(r.extend(!0,{position:{at:"right-30 top+30"}},n,{content:function(){var t=e._getItemByEle(this);if(t)return i?i.call(this,t.data):t.label()+": "+t.value()},showing:function(){if(!t.showTooltip||e._isDisabled())return!1;if(o)return o.apply(this,arguments)}}))},n.prototype._destroyTooltip=function(){if(r.wijmo.wijtooltip){var e=r("."+s.item+"."+s.stateDefault,this.element);e.data("wijmo-wijtooltip")&&e.wijtooltip("destroy")}},n.prototype._bindEvents=function(){var e=this;e.element.on("click.wijtreemap",r.proxy(e._onClick,e)).on("contextmenu.wijtreemap",r.proxy(e._onRightClick,e)).on("mouseover.wijtreemap",r.proxy(e._onMouseOver,e)).on("mouseout.wijtreemap",r.proxy(e._onMouseOut,e))},n.prototype._onClick=function(e){if(this._isDisabled())return;var t=this._getItemByEle(r(e.target));t&&this._play(t,t)},n.prototype._play=function(e,t){var n=this,r=n.tmItemContainer,i=t,s;if(i===n.currentContainer)return;s=n._isDrillDown(n.currentContainer.ele,i.ele);if(n._triggerPlaying(e,n.currentContainer,i,s)===!1)return;i!==r&&(r.box.width=0,r.box.height=0,r.applyBox()),n.currentContainer=i,n._resetContainerBox(i),i.applyBox(),n._triggerPlayed(i,s),n._showBackButtons()},n.prototype._resetContainerBox=function(e){e.box.width=this.width,e.box.height=this.height,e.box.top=0,e.box.left=0},n.prototype._isDrillDown=function(e,t){return r.contains(e.get(0),t.get(0))?!0:!1},n.prototype._triggerPlaying=function(e,t,n,r){var i=e,s=t,o=n,u;return u={currentData:s.data,targetData:o.data,clickItemData:i==null?null:i.data},r?this._triggerDrillingDown(u):this._triggerRollingUp(u)},n.prototype._triggerDrillingDown=function(e){return this._trigger("drillingDown",null,e)},n.prototype._triggerRollingUp=function(e){return this._trigger("rollingUp",null,e)},n.prototype._triggerPlayed=function(e,t){var n=e.data;t?this._triggerDrilledDown(n):this._triggerRolledUp(n)},n.prototype._triggerDrilledDown=function(e){this._trigger("drilledDown",null,e)},n.prototype._triggerRolledUp=function(e){this._trigger("rolledUp",null,e)},n.prototype._onRightClick=function(e){if(this._isDisabled())return!1;var t=this,n=t._getItemByEle(r(e.target));return t.currentContainer===t.tmItemContainer?!1:(t._play(n,t.currentContainer.parent),!1)},n.prototype._onMouseOver=function(e){if(this._isDisabled())return;var t=this._getItemByEle(r(e.target));t&&t.mouseOver()},n.prototype._onMouseOut=function(e){if(this._isDisabled())return;var t=this._getItemByEle(r(e.target));t&&t.mouseOut()},n.prototype._getItemByEle=function(e){var t=this,n,i,o=t.tmItemContainer.items,u;return n=e.closest("."+s.item),n&&n.length?(i=n.data("index"),i==null?null:(r.each(i,function(e,t){u=o[t];if(!u||!u.items)return!1;o=u.items}),u)):null},n.prototype.destroy=function(){var e=this;e._unbindEvents(),e._destroyItems(),e._destroyBackButtons(),e._getContainer().remove(),e._decorate(!1),e.colorConverter=null,e._destroyTooltip(),t.prototype.destroy.call(this)},n.prototype._unbindEvents=function(){this.element.off(".wijtreemap")},n.prototype._destroyItems=function(){this.tmItemContainer.destroy(),this._getContainer().empty()},n.prototype._createItems=function(){var e=this,t=e.options,n=e._getContainer();e._triggerPainting(),e.tmItemContainer=new l(n,t.data,e),e._resetContainerBox(e.tmItemContainer),e.tmItemContainer.render(),e.currentContainer=e.tmItemContainer,n.appendTo(e.element),e._triggerPainted()},n.prototype._triggerPainting=function(){this._trigger("painting",null,this.element)},n.prototype._triggerPainted=function(){this._trigger("painted")},n.prototype._recreateItems=function(){this._destroyItems(),this._createItems()},n.prototype._createColor=function(){var e=this,t=e.options,n=t.minColorValue,r=t.maxColorValue,i;if(n==null||r==null)i=e._getMinMaxItemValue(e.tmItemContainer),n==null&&(n=i.min),r==null&&(r=i.max);e.colorConverter&&(e.colorConverter=null),e.colorConverter=new a(t.minColor||"#000000",n,t.maxColor||"#ffffff",r,t.midColor,t.midColorValue),e.tmItemContainer.colorConverter=e.colorConverter,e._repaintColor()},n.prototype._resetColor=function(e,t){this.colorConverter["_reset"+e](t),this._repaintColor()},n.prototype._getColor=function(e){return this.colorConverter.getColor(e)},n.prototype._getMinMaxItemValue=function(e){var t=this,n=e,i={min:Number.MAX_VALUE,max:Number.MIN_VALUE},s;return r.each(n.items,function(e,n){var r=t._getMinMaxItemValue(n);r.max>i.max&&(i.max=r.max),r.min<i.min&&(i.min=r.min)}),e.value&&n.items.length===0&&(s=e.value(),s>i.max&&(i.max=s),s<i.min&&(i.min=s)),i},n.prototype._decorate=function(e){var t=this,n=t.element,r=t.options,i=[s.wijtreemap,r.wijCSS.widget,r.wijCSS.wijtreemap].join(" ");n.toggleClass(i,e)},n.prototype._getContainer=function(){var e=this,t=e.options,n=[s.container,t.wijCSS.tmcontainer,s.itemContainer,t.wijCSS.tmitemContainer].join(" ");return e.container||(e.container=r("<div></div>").addClass(n)),e.container},n.prototype._calcBounds=function(){var e=this,t=e.element,n=e.options,r=n.width?n.width:t.width(),i=n.height?n.height:t.height();e._setWidth(r),e._setHeight(i)},n.prototype._setWidth=function(e){this.width=e,this._getContainer().css("width",e.toString()),this.tmItemContainer&&(this.tmItemContainer.box.width=e)},n.prototype._setHeight=function(e){this.height=e,this._getContainer().css("height",e.toString()),this.tmItemContainer&&(this.tmItemContainer.box.height=e)},n.prototype._showLabels=function(){this.tmItemContainer.toggleLabelVisibility()},n.prototype._resetBinding=function(e){this.tmItemContainer.setBinding(e)},n.prototype._resetLabels=function(){this.tmItemContainer.setLabels(!1)},n.prototype._resetTitles=function(){this.tmItemContainer.setLabels(!0)},n.prototype._repaintBox=function(){this.currentContainer.applyBox()},n.prototype._repaintColor=function(){this.tmItemContainer.applyColor()},n.prototype._repaint=function(){this._repaintBox(),this._repaintColor()},n}(t.wijmoWidget);n.wijtreemap=u;var a=function(){function e(e,t,n,r,i,s){var o=this;o.minColor=o._convertColorToRGB(e),o.minColorValue=t,o.maxColor=o._convertColorToRGB(n),o.maxColorValue=r,o.midColorValue=o.originalMidColorValue=s,o._calculateMidColorValue(),o.midColor=o.originalMidColor=o._convertColorToRGB(i),o._calculateMidColor()}return e.prototype._resetminColor=function(e){var t=this;t.minColor=t._convertColorToRGB(e),t._calculateMidColor()},e.prototype._resetmidColor=function(e){var t=this;t.midColor=t.originalMidColor=t._convertColorToRGB(e),t._calculateMidColor()},e.prototype._resetmaxColor=function(e){var t=this;t.maxColor=t._convertColorToRGB(e),t._calculateMidColor()},e.prototype._resetminColorValue=function(e){var t=this;t.minColorValue=e,t._calculateMidColorValue()},e.prototype._resetmidColorValue=function(e){var t=this;t.midColorValue=t.originalMidColorValue=e,t._calculateMidColorValue()},e.prototype._resetmaxColorValue=function(e){var t=this;t.maxColorValue=e,t._calculateMidColorValue()},e.prototype._convertColorToRGB=function(e){if(e==null)return null;var t,n;t=r("<div></div>").css("background-color",e).css("background-color"),n=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(n.length<=3)return;return{R:parseInt(n[1]),G:parseInt(n[2]),B:parseInt(n[3])}},e.prototype._calculateMidColorValue=function(){var e=this;e.originalMidColorValue==null&&(e.midColorValue=(e.maxColorValue+e.minColorValue)/2)},e.prototype._calculateMidColor=function(){var e=this;e.originalMidColor==null&&(e.midColor=e._calculateColorByVal(e.midColorValue,!0))},e.prototype._calculateColorByVal=function(e,t){typeof t=="undefined"&&(t=!1);var n=this,i,s,o,u=n.maxColor,a=n.minColor,f=n.maxColorValue,l=n.minColorValue;if(e>n.maxColorValue)return r.extend({},n.maxColor);if(e<n.minColorValue)return r.extend({},n.minColor);if(!t){if(e===n.midColorValue)return r.extend({},n.midColor);e<n.midColorValue?(u=n.midColor,f=n.midColorValue):(a=n.midColor,l=n.midColorValue)}return n._getColor(e,u,f,a,l)},e.prototype._getColor=function(e,t,n,r,i){var s=this;return{R:s._getValueByRatio(e,t.R,n,r.R,i),G:s._getValueByRatio(e,t.G,n,r.G,i),B:s._getValueByRatio(e,t.B,n,r.B,i)}},e.prototype._getValueByRatio=function(e,t,n,r,i){var s=this;return Math.abs(r+Math.round((e-i)*(t-r)/(n-i)))},e.prototype.getColor=function(e){var t=this,n=t._calculateColorByVal(e);return"#"+t._hex(n.R)+t._hex(n.G)+t._hex(n.B)},e.prototype._hex=function(e){return("0"+e.toString(16)).slice(-2)},e}(),f=function(){function e(){}return e.squarified=function(t){var n=t.box,i=r.extend(!0,{},n),s=t.items.slice(),o,u=t.titleBox,a=u.width||u.height;a=i.width===0||i.height===0?0:a,i.top+=a,i.height-=a,o=i.width*i.height/t.total,u.width=i.width,u.height=a;do{var f=e.getRowedItems(s,i,o);e.layoutRowedItems(n,f,i,i.width>i.height)}while(s.length)},e.horizontal=function(t){var n=t.box,i=r.extend(!0,{},n),s=t.items,o=t.titleBox,u=o.width||o.height;u=i.width===0||i.height===0?0:u,i.left+=u,i.width-=u,o.width=u,o.height=i.height,r.each(s,function(r,s){var o=[{item:s,val:s.value()*(n.width-u)*n.height/t.total}];e.layoutRowedItems(n,o,i,!1)})},e.vertical=function(t){var n=t.box,i=r.extend(!0,{},n),s=t.items,o=t.titleBox,u=o.width||o.height;u=i.width===0||i.height===0?0:u,i.top+=u,i.height-=u,o.width=i.width,o.height=u,r.each(s,function(r,s){var o=[{item:s,val:s.value()*n.width*(n.height-u)/t.total}];e.layoutRowedItems(n,o,i,!0)})},e.getNarrowLen=function(e){return Math.min(e.width,e.height)},e.getRowedItem=function(e,t,n){var r=n*e.value();return{item:e,val:r}},e.getRowedItems=function(t,n,r){var i=t.shift(),s=[],o=[],u=e.getNarrowLen(n),a=e.getRowedItem(i,n,r);s.push(a),o.push(a);if(t.length>0)do{o.push(e.getRowedItem(t[0],n,r));if(!(e.worst(s,u)>e.worst(o,u)))break;s=o.slice(),t.shift()}while(t.length);return s},e.layoutRowedItems=function(t,n,i,s){var o=i.left,u=i.top,a=o+i.width,f=u+i.height,l,c=e.sumRowedArray(n);s?(l=i.height===0?0:c/i.height,o+l>=a&&(l=a-o),r.each(n,function(e,i){var s=l===0?0:i.val/l;if(u+s>f||e===n.length-1)s=f-u;r.extend(i.item.box,{left:o-t.left,top:u-t.top,width:l,height:s}),u+=s}),i.left+=l,i.width-=l):(l=i.width===0?0:c/i.width,u+l>=f&&(l=f-u),r.each(n,function(e,i){var s=l===0?0:i.val/l;if(o+s>a||e===n.length-1)s=a-o;r.extend(i.item.box,{left:o-t.left,top:u-t.top,width:s,height:l}),o+=s}),i.top+=l,i.height-=l)},e.sumRowedArray=function(e){var t=0,n=e.length;for(var r=0;r<n;r++)t+=e[r].val;return t},e.worst=function(t,n){var i,s,o,u=e.sumRowedArray(t),a=u*u,f=n*n;return i=s=t[0].val,r.each(t,function(e,t){t.val>i?i=t.val:t.val<s&&(s=t.val)}),Math.max(f*i/a,a/(f*s))},e}(),l=function(){function e(e,t,n,r){typeof r=="undefined"&&(r=null);var i=this;i.level=r&&!isNaN(r.level)?r.level+1:0,i.box=i._initBox(),i.titleBox=i._initBox(),i.tm=n,i.ele=e,i.data=t,i.parent=r,i.depth=i.parent===null?0:i.parent.depth+1,i.total=0,i.items=[],i._init()}return e.prototype._initBox=function(){return{width:0,height:0,left:0,top:0}},e.prototype._init=function(){var e=this,t;if(!e.data||e.data.length===0)return;r.each(e.data,function(n,r){t=e._createTMItem(r,n),e.items.push(t),e.total+=t.value()})},e.prototype._createTMItem=function(e,t){var n=this,i=r("<div></div>"),o=n.tm.options,u=[s.item,o.wijCSS.tmitem],a;return a=new c(i,e,n.tm,n,t),a.items.length>0?u.push(s.itemContainer,o.wijCSS.tmitemContainer):u.push(o.wijCSS.stateDefault,s.stateDefault),i.addClass(u.join(" ")),a},e.prototype.getColorConverter=function(){return this.colorConverter?this.colorConverter:this.parent?this.parent.getColorConverter():null},e.prototype.toggleLabelVisibility=function(){var e=this;e.items&&e.items.length&&r.each(e.items,function(e,t){t.toggleLabelVisibility()})},e.prototype.setLabels=function(e){var t=this;t.items&&t.items.length&&r.each(t.items,function(t,n){n.setLabels(e)})},e.prototype.setBinding=function(e){var t=this;t.items&&t.items.length&&r.each(t.items,function(t,n){n.setBinding(e)})},e.prototype.applyBox=function(){var e=this,t={applyBox:!0,applyColor:!1,applyHtml:!1};e.titleBox=e._initBox(),e._render(t),e._resetParentTitle()},e.prototype._resetParentTitle=function(){var e=this,t=e.tm.options,n=e.parent,r;t.showTitle&&n!=null&&n instanceof c&&(r=n.ele,r.css({left:0,top:0}),n._resetParentTitle())},e.prototype.applyColor=function(){var e=this,t={applyBox:!1,applyColor:!0,applyHtml:!1};e._render(t)},e.prototype.render=function(){var e={applyBox:!0,applyColor:!1,applyHtml:!0};this._render(e)},e.prototype._render=function(e){var t=this;t.items&&t.items.length?t._renderChildren(e):t._renderContent(e)},e.prototype._renderChildren=function(e){var t=this,n=t.tm.options,i=n.type||"squarified";e.applyBox&&f[i](t),r.each(t.items,function(t,n){n._render(e)})},e.prototype._renderContent=function(e){},e.prototype._renderColor=function(){},e.prototype.destroy=function(){r.each(this.items,function(e,t){t.destroy()}),this.items=null},e}(),c=function(t){function n(e,i,s,o,u){var a=this;a._label="label",a._value=0,a._color=null,a.titleEle=r("<div></div>"),a.labelEle=r("<span></span>"),a._isContent=!1,a._isCustomizeHtml=!1,o instanceof n?a.index=o.index.concat([u]):a.index=[u],e.data("index",a.index),t.call(this,e,i,s,o)}return e(n,t),n.prototype._init=function(){var e=this,t=e.data,n=e.tm.options,i=o[e.index[e.index.length-1]%o.length],s;e._reset("label")._reset("value")._reset("color");if(!t.items||t.items.length===0)return;r.each(t.items,function(t,n){s=e._createTMItem(n,t),e.items.push(s)}),e.total=e.value(),t.minColor&&t.maxColor?e._createColorConverter(t.maxColor,t.midColor,t.minColor):e.level===1&&(n.maxColor==null||n.minColor==null)&&e._createColorConverter(i.max,i.mid,i.min)},n.prototype._createColorConverter=function(e,t,n){var r=this,i=r.data,s=i.minColorValue,o=i.maxColorValue,u;if(s==null||o==null)u=r.tm._getMinMaxItemValue(r),s==null&&(s=u.min),o==null&&(o=u.max);r.colorConverter&&(r.colorConverter=null),r.colorConverter=new a(n,s,e,o,t,i.midColorValue)},n.prototype._applyBox=function(){var e=this,t=e.box;e.ele.css({width:t.width,height:t.height,left:t.left,top:t.top})},n.prototype._applyTitleBox=function(){var e=this,t=e.tm.options,n=e.titleBox;e.titleEle.css({top:0,left:0,width:n.width,height:n.height}),t.showTitle?e.titleEle.show():e.titleEle.hide()},n.prototype._createTitle=function(){var e=this,t=e.tm.options.wijCSS;e.titleEle.addClass([s.title,t.header,t.tmtitle].join(" ")),e.titleEle.prependTo(e.ele)},n.prototype._setTitle=function(){var e=this,t=e.tm.options,n=e.label(),i=t.titleFormatter;i&&r.isFunction(i)&&(n=r.proxy(i,e.data)()),this.titleEle.html(n)},n.prototype._createLabel=function(){var e=this,t=e.tm.options;e.labelEle.addClass([s.label,t.wijCSS.tmlabel].join(" ")),e.labelEle.prependTo(e.ele)},n.prototype._setLabel=function(){var e=this,t=e.tm.options,n=e.label(),i=t.labelFormatter;i&&r.isFunction(i)&&(n=r.proxy(i,e.data)()),e.labelEle.html(n)},n.prototype._render=function(e){var n=this;t.prototype._render.call(this,e),e.applyBox&&(n._applyBox(),n._applyTitleBox()),e.applyHtml&&n.ele.appendTo(n.parent.ele)},n.prototype._renderChildren=function(e){var n=this,r=n.tm.options;n._isContent=!1,e.applyHtml&&(n._createTitle(),n._setTitle()),e.applyBox&&(n.titleBox.height=0,r.showTitle?n.titleBox.width=parseInt(r.titleHeight):n.titleBox.width=0),t.prototype._renderChildren.call(this,e)},n.prototype._renderContent=function(e){var n=this,i=e.applyHtml,s,o=n.tm;n._isContent=!0,t.prototype._renderContent.call(this,e),i&&(s=n._triggerItemPainting(r.extend(!0,{htmlTemplate:""},n.data)),typeof s=="string"&&s.length>0?(n._isCustomizeHtml=!0,n.ele.empty(),n.ele.html(s),n._triggerItemPainted()):n._isCustomizeHtml=!1),n._isCustomizeHtml||(i&&(n._renderHtml(),n._triggerItemPainted()),e.applyColor&&n._renderColor())},n.prototype._triggerItemPainting=function(e){return this.tm._trigger("itemPainting",null,e),e.htmlTemplate},n.prototype._triggerItemPainted=function(){this.tm._trigger("itemPainted")},n.prototype._renderHtml=function(){var e=this;e.ele.empty(),e._createLabel(),e._setLabel(),e.toggleLabelVisibility()},n.prototype._renderColor=function(){var e=this,t=e.tm,n=e.color();n==null&&(n=e.parent.getColorConverter().getColor(e.value())),e.ele.css("background-color",n)},n.prototype.toggleLabelVisibility=function(){var e=this,n=e.tm.options;e._isContent?n.showLabel?e.labelEle.show():e.labelEle.hide():t.prototype.toggleLabelVisibility.call(this)},n.prototype.setLabels=function(e){var n=this;n._isContent?e||n._setLabel():(e&&n._setTitle(),t.prototype.setLabels.call(this,e))},n.prototype.setBinding=function(e){this._reset(e),this._isContent||t.prototype.setBinding.call(this,e)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.colorConverter&&(this.colorConverter=null)},n.prototype._reset=function(e){var t=this,n=t.tm.options,r=n[e+"Binding"]||e;return r in t.data&&(t["_"+e]=t.data[r]),t},n.prototype.label=function(e){var t=this;return e===undefined?t._label:(t._label=e,t)},n.prototype.value=function(e){var t=this;return e===undefined?t._value:(t._value=e,t)},n.prototype.color=function(e){var t=this;return e===undefined?t._color:(t._color=e,t)},n.prototype.click=function(e){},n.prototype.mouseOver=function(){if(this._isContent){var e=this.tm.options;this.ele.addClass(e.wijCSS.stateHover).addClass(s.stateHover)}},n.prototype.mouseOut=function(){if(this._isContent){var e=this.tm.options;this.ele.removeClass(e.wijCSS.stateHover).removeClass(s.stateHover)}},n}(l),h=function(){function e(){this.initSelector=":jqmData(role='wijtreemap')",this.wijCSS={wijtreemap:"",tmcontainer:"",tmitem:"",tmitemContainer:"",tmtitle:"",tmlabel:"",tmbuttons:"",tmbackButton:"",tmhomeButton:""},this.wijMobileCSS={},this.width=null,this.height=null,this.type="squarified",this.data=null,this.valueBinding=null,this.labelBinding=null,this.colorBinding=null,this.showLabel=!0,this.labelFormatter=null,this.showTooltip=!1,this.tooltipOptions=null,this.showTitle=!0,this.titleHeight=20,this.titleFormatter=null,this.minColor=null,this.minColorValue=null,this.midColor=null,this.midColorValue=null,this.maxColor=null,this.maxColorValue=null,this.showBackButtons=!1,this.itemPainting=null,this.itemPainted=null,this.painting=null,this.painted=null,this.drillingDown=null,this.drilledDown=null,this.rollingUp=null,this.rolledUp=null}return e}();u.prototype.options=r.extend(!0,{},t.wijmoWidget.prototype.options,new h),r.wijmo.registerWidget(i,u.prototype)})(t.treemap||(t.treemap={}));var n=t.treemap})(wijmo||(wijmo={}))});